{"version":3,"sources":["webpack:///./src/utils/graph/index.js?88e4","actions/index.js","reducers/flags.js","utils/worker.js","actions/graph.js","reducers/graph.js","reducers/layers.js","config.js","utils/index.js","store/load-data.js","store/helpers.js","store/normalize-data.js","utils/flags.js","store/initial-state.js","actions/pipelines.js","actions/nodes.js","reducers/loading.js","reducers/nodes.js","actions/node-type.js","reducers/node-type.js","reducers/pipeline.js","actions/tags.js","reducers/tags.js","actions/modular-pipelines.js","reducers/modular-pipelines.js","reducers/visible.js","reducers/index.js","selectors/pipeline.js","utils/search-utils.js","selectors/modular-pipelines.js","selectors/tags.js","selectors/disabled.js","utils/short-type.js","selectors/edges.js","selectors/ranks.js","selectors/nodes.js","selectors/metadata.js","selectors/layout.js","store/store.js","store/index.js","apollo/utils.js","apollo/config.js","apollo/queries.js","apollo/mocks.js","components/provider/provider.js","selectors/loading.js","components/icons/experiments.js","components/ui/icon-button/icon-button.js","components/ui/icon-button/index.js","components/icons/logo.js","components/icons/settings.js","components/icons/theme.js","components/icons/tree.js","components/global-toolbar/index.js","components/global-toolbar/global-toolbar.js","components/icons/close.js","components/ui/modal/index.js","components/ui/modal/modal.js","components/ui/button/button.js","components/ui/button/index.js","components/export-modal/export-graph.js","components/export-modal/index.js","components/export-modal/export-modal.js","selectors/layers.js","selectors/linked-nodes.js","utils/modifiers.js","components/icons/node-icon.js","components/flowchart/draw.js","utils/view.js","components/ui/tooltip/tooltip.js","components/ui/tooltip/index.js","components/flowchart/flowchart.js","components/flowchart/index.js","components/large-pipeline-warning/index.js","components/large-pipeline-warning/large-pipeline-warning.js","components/icons/loading.js","components/metadata/metadata-value.js","components/icons/copy.js","components/ui/command-copier/command-copier.js","utils/plot-templates/dark.js","utils/plot-templates/light.js","components/plotly-chart/plotly-chart.js","components/plotly-chart/index.js","components/icons/expand.js","components/metadata/metadata-list.js","components/metadata/metadata-parameters-theme.js","components/metadata/metadata-object.js","components/metadata/metadata-row.js","components/metadata/metadata-code.js","components/ui/toggle/index.js","components/ui/toggle/toggle.js","components/metadata/index.js","components/metadata/metadata.js","components/icons/collapse.js","components/icons/back.js","components/plotly-modal/index.js","components/plotly-modal/plotly-modal.js","apollo/mutations.js","components/icons/pencil.js","components/icons/bookmark.js","components/icons/export.js","components/icons/bookmark-stroke.js","components/icons/menu.js","components/primary-toolbar/index.js","components/primary-toolbar/primary-toolbar.js","components/icons/show-changes.js","utils/experiment-tracking-utils.js","components/experiment-tracking/experiment-primary-toolbar/index.js","components/experiment-tracking/experiment-primary-toolbar/experiment-primary-toolbar.js","components/icons/label.js","components/icons/layers.js","components/flowchart-primary-toolbar/index.js","components/flowchart-primary-toolbar/flowchart-primary-toolbar.js","components/minimap/draw.js","components/minimap/minimap.js","components/minimap/index.js","components/icons/map.js","components/icons/plus.js","components/icons/minus.js","components/icons/reset.js","components/minimap-toolbar/minimap-toolbar.js","components/minimap-toolbar/index.js","components/icons/search.js","components/ui/search-bar/search-input/search-input.js","components/ui/search-bar/search-input/index.js","components/ui/search-bar/search-bar-renderer.js","components/ui/search-bar/search-bar.js","components/ui/search-bar/index.js","components/search-list/search-list.js","components/search-list/index.js","components/icons/visible.js","components/icons/invisible.js","components/icons/focus-mode.js","components/node-list/node-list-row.js","components/lazy-list/lazy-list.js","components/lazy-list/index.js","components/node-list/node-list-row-list.js","components/node-list/node-list-group.js","components/node-list/node-list-groups.js","selectors/node-types.js","components/node-list/node-list-tree-item.js","components/node-list/node-list-tree.js","components/split-panel/index.js","components/split-panel/split-panel.js","components/node-list/node-list.js","components/icons/indicator.js","components/icons/indicator-off.js","components/icons/indicator-partial.js","components/node-list/node-list-items.js","components/node-list/index.js","components/ui/dropdown/event-controller.js","utils/key-events.js","components/icons/dropdown-arrow.js","components/ui/dropdown/dropdown-renderer.js","components/ui/dropdown/dropdown.js","utils/hooks.js","components/ui/dropdown/index.js","components/ui/menu-option/menu-option.js","components/ui/menu-option/index.js","components/pipeline-list/pipeline-list.js","components/pipeline-list/index.js","components/ui/switch/index.js","components/ui/switch/switch.js","components/experiment-tracking/accordion/index.js","components/experiment-tracking/accordion/accordion.js","utils/date-utils.js","components/icons/check.js","components/experiment-tracking/runs-list-card/index.js","components/experiment-tracking/runs-list-card/runs-list-card.js","components/experiment-tracking/runs-list/index.js","components/experiment-tracking/runs-list/runs-list.js","components/sidebar/index.js","components/sidebar/sidebar.js","components/flowchart-wrapper/index.js","components/flowchart-wrapper/flowchart-wrapper.js","apollo/subscriptions.js","components/icons/kebab.js","components/icons/selected-pin.js","components/icons/un-selected-pin.js","components/experiment-tracking/run-metadata/run-metadata.js","components/experiment-tracking/run-metadata/index.js","components/icons/pin-arrow.js","components/experiment-tracking/run-dataset/run-dataset.js","components/experiment-tracking/run-dataset/index.js","components/ui/input/index.js","components/experiment-tracking/run-details-modal/index.js","components/experiment-tracking/run-details-modal/run-details-modal.js","components/experiment-tracking/details/index.js","components/experiment-tracking/details/details.js","components/experiment-wrapper/index.js","components/experiment-wrapper/experiment-wrapper.js","components/settings-modal/settings-modal-row.js","components/settings-modal/index.js","components/settings-modal/settings-modal.js","components/update-reminder/index.js","components/update-reminder/update-reminder.js","components/wrapper/index.js","components/wrapper/wrapper.js","components/app/app.js","components/app/index.js","utils/random-utils.js","utils/random-data.js","utils/data-source.js","components/container/index.js","components/container/container.js","index.js","utils/graph/common.js","utils/graph/solver.js","utils/graph/constraints.js","utils/graph/layout.js","utils/graph/routing.js","utils/graph/graph.js","utils/graph/index.js"],"names":["addMethods","methods","module","exports","w","Worker","URL","createObjectURL","Blob","name","RESET_DATA","resetData","data","type","TOGGLE_LAYERS","TOGGLE_EXPORT_MODAL","toggleExportModal","visible","TOGGLE_SETTINGS_MODAL","toggleSettingsModal","TOGGLE_PLOT_MODAL","togglePlotModal","TOGGLE_GRAPH","toggleGraph","TOGGLE_TEXT_LABELS","TOGGLE_PRETTY_NAME","TOGGLE_SIDEBAR","TOGGLE_THEME","UPDATE_CHART_SIZE","UPDATE_ZOOM","updateZoom","zoom","TOGGLE_MINIMAP","CHANGE_FLAG","changeFlag","value","TOGGLE_IGNORE_LARGE_WARNING","TOGGLE_CODE","TOGGLE_PARAMETERS_HOVERED","TOGGLE_MODULAR_PIPELINE_FOCUS_MODE","toggleFocusMode","modularPipeline","flagsReducer","worker","flagsState","action","Object","assign","isTest","jest","graphWorker","require","graph","mockWorker","terminate","keys","forEach","payload","Promise","resolve","TOGGLE_GRAPH_LOADING","toggleLoading","loading","UPDATE_GRAPH_LAYOUT","updateGraph","layoutWorker","getJob","instance","running","then","response","preventWorkerQueues","state","graphNew","nodeReducer","graphState","updateState","newState","layerReducer","layerState","pathRoot","localStorageName","metaSidebarWidth","open","closed","sidebarWidth","breakpoint","codeSidebarWidth","flags","sizewarning","description","default","icon","expandAllPipelines","settings","sidebarGroups","elementType","tag","sidebarElementTypes","task","parameters","shortTypeMapping","arrayToObject","array","callback","newObject","key","getUrl","id","join","Error","unique","d","i","arr","indexOf","loadJsonData","path","fallback","json","catch","fullPath","substr","noWindow","window","loadState","serializedState","localStorage","getItem","JSON","parse","err","console","error","saveState","hasOwnProperty","nodeTypeDisabled","stringify","setItem","pruneFalseyKeys","obj","newObj","normalizeData","pipeline","ids","tree","expanded","active","node","fullName","tags","layer","disabled","pipelines","clicked","hovered","fetched","code","filepath","inputs","outputs","plot","trackingData","datasetType","originalType","transcodedTypes","runCommand","modularPipelines","nodeType","edge","sources","targets","enabled","hoveredParameters","dataSource","source","Array","isArray","edges","nodes","validateInput","push","full_name","dataset_type","original_type","transcoded_types","modular_pipelines","addNode","target","createEdgeID","includes","addEdge","addPipeline","length","main","selected_pipeline","nodeId","children","child","addTag","layers","addLayer","Flags","isDefined","names","flagsConfig","defaults","reduce","result","flag","getFlagsFromUrl","url","urlParams","document","location","href","searchParams","e","warn","mergeLocalStorage","localStorageState","deepmerge","preparePipelineState","applyFixes","prepareNonPipelineState","props","chartSize","textLabels","theme","prettyName","ignoreLargeWarning","labelBtn","layerBtn","exportBtn","exportModal","plotModal","settingsModal","sidebar","innerWidth","miniMapBtn","miniMap","modularPipelineFocusMode","display","globalToolbar","newVisibleProps","minimap","getInitialState","nonPipelineState","pipelineState","UPDATE_ACTIVE_PIPELINE","updateActivePipeline","TOGGLE_PIPELINE_LOADING","getPipelineUrl","TOGGLE_NODE_CLICKED","toggleNodeClicked","nodeClicked","TOGGLE_NODES_DISABLED","TOGGLE_NODE_HOVERED","toggleNodeHovered","nodeHovered","TOGGLE_NODE_DATA_LOADING","toggleNodeDataLoading","ADD_NODE_METADATA","loadNodeData","nodeID","dispatch","getState","a","nodeData","loadingReducer","loadingState","nodeState","nodeIDs","isDisabled","tracking_data","run_command","TOGGLE_TYPE_DISABLED","allNodeTypesUnset","isNodeTypeUnset","nodeTypeValue","isNodeTypeDisabled","nodeTypeReducer","nodeTypeState","nextDisabledState","typeIDs","nextTypesDisabled","values","every","pipelineReducer","TOGGLE_TAG_ACTIVE","TOGGLE_TAG_FILTER","tagReducer","tagState","batchChanges","tagIDs","tagID","TOGGLE_MODULAR_PIPELINE_ACTIVE","TOGGLE_MODULAR_PIPELINE_EXPANDED","modularPipelineReducer","modularPipelineState","modularPipelineIDs","modularPipelineID","newVisibleState","isExpanding","expandedIDs","expandedModularPipelines","filter","expandedID","expandedModularPipeline","collapsedModularPipelines","setChildrenInvisible","collapsedModularPipeline","startsWith","visibleReducer","visibleState","createReducer","initialState","combinedReducer","combineReducers","rootReducer","resetDataReducer","getNodeIDs","getNodeDisabledPipeline","createSelector","nodePipelines","activePipeline","getPipelineNodeIDs","nodeDisabledPipeline","getPipelineTagIDs","nodeTags","visibleTags","getHighlightedText","nodeModularPipelines","visibleModularPipelines","text","valueRegex","RegExp","escapeRegExp","getValueRegex","matches","match","replace","str","textMatchesSearch","searchValue","test","getFocusedModularPipeline","getModularPipelinesTree","searchString","isTreeLeaf","treeNode","searchTree","currentNodeID","foundChildren","childNode","found","highlightedLabel","getModularPipelinesSearchResult","modularPipelinesTree","searchResult","getTagEnabled","getTagData","tagName","tagActive","tagEnabled","sort","map","Boolean","getTagCount","total","getTagNodeCounts","counts","tagIds","tagId","getVisibleSidebarNodes","getVisibleModularPipelineInputsOutputs","visibleSidebarNodes","modularPipelineData","Set","add","getNodeDisabledTag","tagCount","some","getNodeDisabled","nodeDisabledNode","nodeDisabledTag","typeDisabled","focusedModularPipeline","visibleModularPipelineInputsOutputs","isDisabledViaSidebar","has","isDisabledViaFocusedModularPipeline","inputOutputNodeIDs","getVisibleNodeIDs","nodeDisabled","getVisibleLayerIDs","nodeLayer","layerIDs","layersVisible","visibleLayerIDs","layerID","getEdgeDisabled","edgeIDs","edgeSources","edgeTargets","edgeID","getShortType","longTypeName","getEdgeIDs","getEdgeSources","getEdgeTargets","getNodeModularPipelines","getTransitiveEdges","transitiveEdges","walkGraphEdges","isNotInputEdge","concat","addNewEdge","getVisibleEdges","edgeDisabled","getInputOutputDataEdges","visibleEdges","edgesList","getLayerNodes","layerNodes","getNodeRank","nodeDeps","sourceID","targetID","toposortedNodes","batchingToposort","nodeRanks","rank","getNodeName","getNodeFullName","getNodeDisabledNode","getNodeType","getNodeDatasetType","getNodeTypeDisabled","getGraphNodes","getNodeActive","hoveredNode","modularPipelineActive","activeModularPipelines","nodesActiveViaModularPipeline","flatMap","activeViaTag","activeModularPipeline","activeViaModularPipeline","getNodeSelected","clickedNode","getNodeLabel","nodeName","nodeFullName","getNodeData","nodeLabel","nodeDatasetType","b","disabledNode","disabledTag","disabledType","getNodeDataObject","getGroupedNodes","item","getNodeTextWidth","nodeTextWidth","svg","select","body","append","attr","selectAll","enter","each","width","this","getBBox","remove","getNodeSize","iconSize","padding","showLabels","x","y","getPadding","textWidth","showText","height","textOffset","iconOffset","getVisibleNodes","nodeSize","nodeRank","getNodesWithInputParams","nodesList","getInputOutputNodesForFocusedModularPipeline","focusedModularPipelineID","graphNodes","getClickedNode","sortAlpha","localeCompare","getVisibleMetaSidebar","getClickedNodeMetaData","tagNames","nodeFilepaths","nodeInputs","nodeOutputs","nodeCodes","nodeParameters","nodePlot","nodeTrackingData","nodeDatasetTypes","nodeOriginalTypes","nodeTranscodedTypes","nodeRunCommand","entries","Math","round","getTriggerLargeGraphWarning","graphHasNodes","sizeWarningFlag","getGraphInput","triggerLargeGraphWarning","getSidebarWidth","getChartSize","visibleSidebar","visibleMetaSidebar","visibleCodeSidebar","left","top","sidebarWidthActual","metaSidebarWidthActual","codeSidebarWidthActual","outerWidth","outerHeight","minWidthScale","getChartZoom","updateGraphOnChange","store","watchGraph","watch","subscribe","graphInput","configureStore","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducer","applyMiddleware","thunk","otherVisibleProps","saveStateToLocalStorage","useApolloQuery","query","options","useState","undefined","setData","useQuery","subscribeToMore","queryData","useEffect","wsHost","host","wsProtocol","protocol","wsLink","WebSocketLink","uri","reconnect","httpLink","createHttpLink","fetch","splitLink","split","definition","getMainDefinition","kind","operation","client","ApolloClient","connectToDevTools","link","cache","InMemoryCache","defaultOptions","errorPolicy","mutate","GET_RUNS","gql","GET_RUN_METADATA","GET_RUN_TRACKING_DATA","GET_VERSIONS","RunMock","Factory","define","sequence","author","faker","git","shortSha","bookmark","datatype","boolean","gitBranch","branch","gitSha","commitSha","notes","random","words","title","TrackingDatasetMock","runId","number","TrackingDataMock","datasetName","buildList","runsListQueryMock","request","runsList","runMetadataQueryMock","variables","runs","runMetadata","runTrackingDataMock","GraphQLProvider","useMocks","MockedProvider","mocks","ApolloProvider","isLoading","graphLoading","pipelineLoading","nodeLoading","ExperimentsIcon","className","viewBox","IconButton","ariaLabel","ariaLive","container","Container","hasReminder","labelText","onClick","Icon","classnames","defaultProps","LogoIcon","fill","fillRule","stroke","strokeWidth","SettingsIcon","cx","cy","r","ThemeIcon","TreeIcon","GlobalToolbar","connect","onToggleSettingsModal","onToggleTheme","isOutdated","exact","to","pathname","CloseIcon","Modal","onClose","message","handleKeyDown","event","keyCode","addEventListener","removeEventListener","role","React","Fragment","Button","size","mode","exportGraph","format","graphSize","mockFn","downloadFormats","png","downloadPng","downloadSvg","download","querySelector","clone","parentNode","appendChild","cloneNode","classList","hasGraph","isFinite","marginx","marginy","setAttribute","removeAttribute","min","style","createElement","innerHTML","prepend","css","removeChild","ExportModal","onToggle","getLayers","layerName","bounds","nearestLayer","bound","Infinity","currentBound","prevBound","nextBound","start","end","rectWidth","max","getVisibleEdgesByNode","sourceEdges","targetEdges","findLinkedNodes","edgesByNode","visited","getLinkedNodes","linkedNodes","modifiers","others","classes","modifier","paths","plotly","NodeIcon","lineShape","line","curve","curveBasis","matchFloats","toSinglePoint","parseFloat","toFixed","drawLayers","el","layerGroup","enterLayers","exit","merge","drawLayerNames","layerNameGroup","transition","duration","DURATION","layerNames","enterLayerNames","updateNodeRects","nodeRects","updateParameterRect","drawNodes","changed","nodeActive","nodeSelected","nodesWithInputParams","inputOutputDataNodes","focusMode","isInputOutputNode","nodeGroup","updateNodes","enterNodes","exitNodes","allNodes","classed","on","handleNodeClick","handleNodeMouseOver","handleNodeMouseOut","handleNodeKeyDown","handleParamsIndicatorMouseOver","call","nodeIcons","order","drawEdges","inputOutputDataEdges","isInputOutputEdge","edgeGroup","updateEdges","enterEdges","exitEdges","allEdges","sourceNode","attrTween","current","points","previous","interpolatePath","viewing","wrapper","onViewChanged","onViewEnd","allowUserInput","d3Zoom","transform","isInvalidTransform","interpolate","origin","zoomIdentity","isOrigin","k","isNaN","getViewTransform","view","zoomTransform","negateTransform","translate","scale","setViewTransformExact","final","__zoom","viewTransformToFit","offset","focus","viewWidth","viewHeight","objectWidth","objectHeight","minScaleX","minScaleFocus","focusOffset","scaleY","scaleX","scaleXClamp","isCroppedY","objectCenterY","focusCenterOffsetX","focusCenterOffsetY","zeroWidthSpace","String","fromCharCode","insertZeroWidthSpace","Tooltip","targetRect","isRight","isTop","xOffset","yOffset","FlowChart","handleWindowResize","updateChartSize","handleBeforePrint","handleAfterPrint","getHoveredParameterLabel","parameterNames","onLoadNodeData","stopPropagation","handleChartClick","onToggleNodeHovered","showTooltip","label","hideTooltip","tooltip","onViewChange","bind","onViewChangeEnd","containerRef","createRef","svgRef","wrapperRef","edgesRef","nodesRef","layersRef","layerNamesRef","MARGIN","MIN_SCALE","MAX_SCALE","selectD3Elements","updateViewExtents","addGlobalEventListeners","update","removeGlobalEventListeners","prevProps","chartZoom","resetView","onChartZoomChanged","objectA","objectB","prop","onUpdateChartSize","chartSizeTestFallback","getBoundingClientRect","ResizeObserver","resizeObserver","observe","unobserve","updateY","extents","scaleExtent","translateExtent","minX","minY","maxX","maxY","minK","maxK","getViewExtents","onUpdateZoom","applied","relative","minScale","maxScale","chartWidth","chartHeight","graphWidth","graphHeight","leftSidebarOffset","rightSidebarOffset","margin","setViewExtents","reset","hasTranslation","translateTo","scaleTo","setViewTransform","find","isFirstTransform","setState","visibleGraph","displayGlobalToolbar","ref","refX","refY","markerUnits","markerWidth","markerHeight","orient","Component","right","bottom","emptyEdges","emptyNodes","emptyGraphSize","ownProps","visibleCode","LargePipelineWarning","sidebarVisible","onDisable","onHide","LoadingIcon","MetaDataValue","empty","CopyIcon","CommandCopier","command","showCopied","setShowCopied","navigator","clipboard","writeText","setTimeout","darkTemplate","autosize","annotationdefaults","arrowcolor","arrowhead","arrowwidth","autotypenumbers","coloraxis","autocolorscale","colorbar","thickness","showticklabels","ticks","tickwidth","tickcolor","ticklen","tickfont","color","ticklabelposition","font","colorscale","diverging","sequential","sequentialminus","colorway","hoverlabel","align","hovermode","legend","mapbox","paper_bgcolor","plot_bgcolor","xref","yref","xanchor","yanchor","xaxis","automargin","gridcolor","linewidth","linecolor","rangemode","showline","zerolinecolor","zerolinewidth","yaxis","l","t","darkPreviewTemplate","showlegend","nticks","darkModalTemplate","lightTemplate","lightPreviewTemplate","lightModalTemplate","Plot","createPlotlyComponent","Plotly","updateLayout","layout","PlotlyChart","plotConfig","staticPlot","config","useResizeHandler","ExpandIcon","MetaDataList","property","inline","commas","limit","setExpanded","showValues","slice","remainder","index","darkjsonViewerTheme","base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F","lightjsonViewerTheme","MetaDataObject","indentWidth","collapsed","collapseStringsAfterLength","enableClipboard","displayDataTypes","src","MetaDataRow","showList","showObject","hljs","registerLanguage","python","yaml","javascript","codeRef","useRef","highlighted","useMemo","detected","highlightAuto","language","second_best","highlight","dangerouslySetInnerHTML","__html","Toggle","checked","onChange","htmlFor","MetaData","metadata","onToggleNodeSelected","onToggleCode","toggleCode","onTogglePlotModal","isTaskNode","isDataNode","isParametersNode","nodeTypeIcon","hasPlot","hasTrackingData","hasCode","isTranscoded","showCodePanel","showCodeSwitch","onExpandPlotClick","CollapseIcon","BackIcon","PlotlyModal","onCollapsePlotClick","UPDATE_RUN_DETAILS","useUpdateRunDetails","useMutation","_updateRunDetails","updateRunDetails","PencilIcon","BookmarkIcon","ExportIcon","BookmarkStrokeIcon","MenuIcon","PrimaryToolbar","displaySidebar","onToggleSidebar","ShowChangesIcon","sanitizeValue","ExperimentPrimaryToolbar","enableComparisonView","enableShowChanges","runTrackingData","selectedRunData","setEnableShowChanges","setSidebarVisible","showChangesIconDisabled","showRunDetailsModal","exportData","setExportData","updateExportData","useCallback","csvData","runTitle","run","createdBy","trackingDataset","dataKeyNames","keyData","datafield","constructExportData","runInput","asyncOnClick","filename","LabelIcon","LayersIcon","FlowchartPrimaryToolbar","disableLayerBtn","visibleLayers","onToggleExportModal","onToggleLayers","toggleSidebar","onToggleTextLabels","drawViewport","mapSize","getViewport","viewport","sizeOffset","MiniMap","onPointerEnter","isPointerInside","onPointerLeave","onPointerUpGlobal","isPointerDown","onPointerDown","onPointerMove","onPointerWheel","onUpdateChartZoom","deltaY","ZOOM_RATE","onPointerWheelGlobal","contains","preventDefault","useTransition","time","Number","Date","lastTransitionTime","TRANSITION_WAIT","chartScale","containerRect","pointerX","clientX","pointerY","clientY","centerX","centerY","viewportRef","passive","pointerEventName","mapWidth","mapHeight","mapScale","translateX","translateY","transformStyle","_","inputEvents","onWheel","PointerEvent","getMapSize","scaledWidth","MapIcon","PlusIcon","MinusIcon","ResetIcon","scaleZoom","factor","MiniMapToolbar","displayMiniMap","onToggleMiniMap","SearchIcon","SearchInput","onBlur","onFocus","placeholder","inputValue","focused","setFocused","setValue","_handleFocused","_handleBlurred","labelWrapper","SearchBarRenderer","isFocused","onClear","onSubmit","showClearButton","SearchBar","setIsFocused","setShowClearButton","onUpdateSearchValue","handleWindowKeyDown","isKeyF","isKeyCtrlOrCmd","ctrlKey","metaKey","input","activeElement","blur","onKeyDown","SearchList","VisibleIcon","InvisibleIcon","FocusModeIcon","xmlns","shouldMemo","nextProps","NodeListRow","memo","allUnchecked","faded","count","onMouseEnter","onMouseLeave","selected","visibleIcon","invisibleIcon","focusModeIcon","rowType","VisibilityIcon","TextButton","range","rangeUnion","rangeA","rangeB","rangeEqual","visibleRangeOf","element","buffer","childTotal","childHeight","clip","list","bufferCount","ceil","innerHeight","documentElement","clientHeight","floor","useRequestFrameOnce","cancelAnimationFrame","requestAnimationFrame","thresholds","from","useIntersection","observer","useLayoutEffect","disconnect","IntersectionObserver","LazyList","lazy","dispose","offsetParent","supported","setRange","rangeRef","listRef","upperRef","lowerRef","itemHeight","totalHeight","upperHeight","lowerHeight","requestUpdate","visibleRange","effectiveRange","observerOptions","threshold","childProps","listStyle","position","paddingTop","upperStyle","lowerStyle","NodeRowList","items","group","onItemClick","onItemChange","onItemMouseEnter","onItemMouseLeave","fade","NodeListGroup","onToggleChecked","onToggleCollapsed","toLowerCase","storedState","NodeListGroups","groups","onGroupToggleChanged","groupsCollapsed","setCollapsed","onToggleGroupCollapsed","groupID","getNodeTypeIDs","isModularPipelineType","getTypeNodeCount","types","typeNodeIDs","visibleTypeNodeIDs","getNodeTypes","typeName","typeNodeCount","nodeCount","arrowIconColor","NodeListTreeItem","TreeItem","collapseIcon","expandIcon","GROUPED_NODES_DISPLAY_ORDER","parameter","useStyles","makeStyles","root","flexGrow","maxWidth","StyledTreeView","withStyles","TreeView","isOnFocusedModePath","focusModeID","getModularPipelineRowData","getNodeRowData","modularPipelinesSearchResult","onNodeToggleExpanded","renderTree","sortBy","renderLeafNode","isFocusedModularPipeline","defaultCollapseIcon","defaultExpandIcon","onNodeToggle","expandedItemIds","SplitPanel","splitDefault","splitMin","splitMax","keyboardStep","orientation","handleRef","getRects","handle","clamp","splitValue","rects","handleSize","isResizing","setIsResizing","setSplit","onMouse","mouseOffsetVertical","onMouseMove","onMouseUp","panelA","panelB","tabIndex","onMouseDown","keyboardOffset","ArrowUp","ArrowLeft","ArrowDown","ArrowRight","NodeList","getGroupState","onModularPipelineToggleExpanded","autoHide","hideTracksWhenNotNeeded","IndicatorIcon","rx","OffIndicatorIcon","PartialIndicatorIcon","isTagType","isElementType","isGroupType","nodeGroups","highlightMatch","highlightedGroups","nodeMatchesSearch","filterNodeGroups","filteredGroups","nodeGroupId","getFilteredNodes","filteredNodes","getFilteredTags","getFilteredTagItems","tagNodeCounts","filteredTags","IndicatorOffIcon","getFilteredElementTypes","getFilteredElementTypeItems","nodeTypes","filteredElementTypes","compareEnabledThenAlpha","itemA","itemB","byEnabledTag","byAlpha","getFilteredNodeItems","filteredNodeItems","getGroups","itemsOfType","allChecked","IndicatorPartialIcon","getFilteredItems","filteredTagItems","filteredElementTypeItems","onToggleTagActive","toggleTagActive","onToggleTagFilter","toggleTagFilter","onToggleModularPipelineActive","toggleModularPipelineActive","onToggleTypeDisabled","typeID","toggleTypeDisabled","onToggleModularPipelineExpanded","onToggleNodeActive","onToggleParametersActive","onToggleNodesDisabled","toggleNodesDisabled","onToggleFocusMode","updateSearchValue","onGroupItemChange","wasChecked","debounce","groupType","groupItems","groupItemsDisabled","groupItem","EventController","eventHandler","__bodyEventHandlers","__bodyListenerAttached","handler","KEYS","handleKeyEvent","keyActions","handleSingleKey","keyName","DropdownArrow","DropdownRenderer","defaultText","focusedOption","onLabelClicked","onOptionSelected","onSelectChanged","selectedOption","wrapperClasses","optionIndex","_extendMenuOption","extraProps","onSelected","cloneElement","childElements","Children","toArray","sectionWrapRequired","sectionChild","j","uniqueId","optionsNode","toString","escape","up","down","Dropdown","onChanged","onClosed","onOpened","_findSelectedOption","selectedOptionElement","_findSelectedOptionElement","primaryText","flow","flatten","usePrevious","setFocusedOption","haveClicked","setHaveClicked","setSelectedOption","setOpen","selectedObject","setSelectedObject","dropdownRef","handleOptionSelectedRef","selectedObjRef","mounted","isEqual","_childrenHaveChanged","removeBodyListeners","focusClass","_handleBodyClicked","_handleClose","_focusLabel","addBodyListener","newSelectedOption","direction","newFocusedOption","optionsLength","getSectionChildren","MenuOption","_handleClicked","asyncDataSource","onUpdateActivePipeline","pipelineID","onToggleOpen","PipelineList","Switch","defaultChecked","setChecked","Accordion","heading","headingClassName","headingDetail","isCollapsed","onCallback","_dayJs","dayjs","extend","relativeTime","formatTimestamp","timestamp","toHumanReadableTime","fromNow","sortRunByTime","runIds","runsWithTimestamps","dateObj","CheckIcon","RunsListCard","disableRunSelection","onRunSelection","selectedRunIds","setActive","humanReadableTime","isMatchSearchValue","displayValue","isSearchValueInNotes","onRunsListCardClick","RunsList","onToggleComparisonView","runData","filteredRunList","getFilteredRunList","bookmarkedRuns","unbookmarkedRuns","Sidebar","isExperimentView","runsListData","pipelineIsOpen","togglePipeline","FlowChartWrapper","NEW_RUN_SUBSCRIPTION","KebabIcon","SelectedPinIcon","UnSelectedPinIcon","sanitiseEmptyValue","HiddenMenu","isBookmarked","isVisible","setIsVisible","RunMetadata","isSingleRun","pinnedRun","setPinnedRun","setRunMetadataToEdit","setShowRunDetailsModal","toggleNotes","setToggleNotes","onTitleOrNoteClick","colSpan","SelectedPin","UnSelectedPin","upArrow","downArrow","PinArrowIcon","determinePinIcon","pinValue","RunDataset","dataset","rowIndex","datasetKey","datasetValues","updatedDatasetValues","metrics","foundIdIndex","findIndex","fillEmptyMetrics","runDataWithPin","pinIcon","resolveRunDataWithPin","buildDatasetDataMarkup","Input","characterLimit","defaultValue","resetValueTrigger","isLimitSet","scrollHeight","rows","RunDetailsModal","runMetadataToEdit","valuesToUpdate","setValuesToUpdate","Details","metadataError","trackingDataError","ExperimentWrapper","setDisableRunSelection","setEnableComparisonView","isSidebarVisible","setIsSidebarVisible","setSelectedRunIds","setSelectedRunData","skip","showDiff","singleSelectedRunData","updateQuery","prev","subscriptionData","newRuns","runsAdded","rel","SettingsModalRow","toggleValue","onToggleChange","SettingsModal","onToggleFlag","onTogglePrettyName","latestVersion","flagData","settingsConfig","UpdateReminder","versions","setDismiss","expand","setExpand","latest","installed","Wrapper","versionData","dismissed","setDismissed","setIsOutdated","setLatestVersion","version","App","announceFlags","updatePipelineData","flagsEnabled","allNames","info","private","isEnabled","status","statusIcon","getFlagsMessage","getSeedFromURL","seed","get","characters","charAt","generateHash","set","getNumberArray","LOREM_IPSUM","randomUtils","seedrandom","randomIndex","randomNumber","getRandom","randomNumberBetween","getRandomName","numWords","getRandomSelection","numItems","len","taken","LAYERS","Pipeline","utils","generatePipelines","rankCount","getRankCount","rankLayers","getRankLayers","generateTags","generateNodes","generateEdges","generateModularPipelines","finalise","pipelineCount","__root__","layerSize","rankNodeCount","getRankNodeCount","createNode","_sources","initialRank","getNodePipelines","getRandomTags","_targets","generateCodeSnippet","getOwnPropertyNames","prototype","nodesByRank","edgeCount","getNodesByRank","ranks","getRandomNodeAtRank","rankIndex","rankValue","rankNodes","sourceRankIndex","remainingRankCount","biasedRandom","_sourceNode","_targetNode","degree","visibleNodes","sortedNodes","getType","getNodeMetaData","activeNodes","activeTags","activeEdges","generateRandomPipeline","all","getPipelineData","nameSource","spaceflights","demo","selectors","getRandomPipeline","getDataValue","REACT_APP_DATA_SOURCE","process","isDemo","encodeURIComponent","getSourceID","ReactDOM","render","getElementById","HALF_PI","PI","snap","unit","angle","atan2","nodeLeft","nodeRight","nodeTop","nodeBottom","groupByRow","rowNumbers","row","sortedRows","compare","delta","offsetNode","offsetEdge","point","nearestOnLine","ax","ay","bx","by","dx","dy","positionClamped","solveLoose","constraints","iterations","constants","constraint","base","solve","solveStrict","solver","Solver","variableId","addVariable","variable","Variable","unsolvableCount","addConstraint","strict","updateVariables","rowConstraint","variableA","variableB","Constraint","minus","Operator","Ge","spaceY","Strength","required","layerConstraint","layerSpace","parallelConstraint","strength","Eq","create","crossingConstraint","edgeA","edgeB","separationA","separationB","resolveSource","resolveTarget","targetNode","separationConstraint","separation","spaceX","spreadX","layerSpaceY","rowConstraints","createRowConstraints","layerConstraints","createLayerConstraints","crossingConstraints","createCrossingConstraints","parallelConstraints","createParallelConstraints","separationConstraints","createSeparationConstraints","expandDenseRows","layerGroups","nextLayerNodes","intermediary","sourceA","targetA","edgeADegree","sourceB","targetB","edgeBDegree","rowNodes","nodeA","nodeB","degreeA","degreeB","spread","space","densities","rowDensity","spaceYUnit","currentOffsetY","density","offsetY","edgeAngle","abs","sourceRow","targetRow","routing","minPassageGap","stemUnit","stemMinSource","stemMinTarget","stemMax","stemSpaceSource","stemSpaceTarget","sourceOffsetX","currentPoint","firstNode","nearestPoint","nearestDistance","rowExtended","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","nextNode","nodeGap","offsetX","candidatePoint","distance","sourceSeparation","targetSeparation","sourceEdgeDistance","targetEdgeDistance","targetOffsetX","sourceOffsetY","targetOffsetY","sourceStem","targetStem","pointYMax","addEdgeLinks","nodeById","addNearestLayers","validLayers","hasValidLayer","lastLayer","layerNode","findNodeBy","targetNodes","orderRankAscending","successors","accept","successor"],"mappings":"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","file":"static/js/main.9cdec8b4.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"graphNew\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(URL.createObjectURL(new Blob([\"!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\\\"object\\\"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:t}),2&e&&\\\"string\\\"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\\\"a\\\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\\\"./\\\",r(r.s=0)}([function(t,e,r){\\\"use strict\\\";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){if(t){if(\\\"string\\\"===typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return\\\"Object\\\"===r&&t.constructor&&(r=t.constructor.name),\\\"Map\\\"===r||\\\"Set\\\"===r?Array.from(t):\\\"Arguments\\\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function u(t,e){var r;if(\\\"undefined\\\"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=s(t))||e&&t&&\\\"number\\\"===typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}var i,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}r.r(e),r.d(e,\\\"graphNew\\\",(function(){return ut}));var c=.5*Math.PI,f=function(t,e){return Math.round(t/e)*e},p=function(t,e){return Math.atan2(t.y-e.y,t.x-e.x)},l=function(t){return t.x-.5*t.width},h=function(t){return t.x+.5*t.width},d=function(t){return t.y-.5*t.height},y=function(t){return t.y+.5*t.height},v=function(t){var e,r={},n=u(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;r[o.y]=r[o.y]||[],r[o.y].push(o)}}catch(p){n.e(p)}finally{n.f()}var i=Object.keys(r).map((function(t){return parseFloat(t)}));i.sort((function(t,e){return t-e}));for(var a=i.map((function(t){return r[t]})),s=0;s<a.length;s+=1){a[s].sort((function(t,e){return m(t.x,e.x,t.id,e.id)}));var c,f=u(a[s]);try{for(f.s();!(c=f.n()).done;){c.value.row=s}}catch(p){f.e(p)}finally{f.f()}}return a},m=function t(e,r){for(var n=\\\"string\\\"===typeof e?e.localeCompare(r):e-r,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return 0!==n||0===i.length?n:t.apply(void 0,i)},g=function(t,e){return t.x=t.x-e.x,t.y=t.y-e.y,t.order=t.x+9999*t.y,t},_=function(t,e){return t.points.forEach((function(t){t.x=t.x-e.x,t.y=t.y-e.y})),t},b=function(t,e,r,n,o,i){var a,s,u,c=o-r,f=i-n,p=(u=1,(a=((t-r)*c+(e-n)*f)/(c*c+f*f||1))<(s=0)?s:a>u?u:a);return{x:r+c*p,y:n+f*p,ax:r,ay:n,bx:o,by:i}};function x(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||s(t)||function(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function w(){return new M}var M=function(){function t(){this.index={},this.array=[]}return t.prototype.size=function(){return this.array.length},t.prototype.empty=function(){return 0===this.array.length},t.prototype.itemAt=function(t){return this.array[t]},t.prototype.contains=function(t){return void 0!==this.index[t.id()]},t.prototype.find=function(t){var e=this.index[t.id()];return void 0===e?void 0:this.array[e]},t.prototype.setDefault=function(t,e){var r=this.index[t.id()];if(void 0===r){var n=new S(t,e());return this.index[t.id()]=this.array.length,this.array.push(n),n}return this.array[r]},t.prototype.insert=function(t,e){var r=new S(t,e),n=this.index[t.id()];return void 0===n?(this.index[t.id()]=this.array.length,this.array.push(r)):this.array[n]=r,r},t.prototype.erase=function(t){var e=this.index[t.id()];if(void 0!==e){this.index[t.id()]=void 0;var r=this.array[e],n=this.array.pop();return r!==n&&(this.array[e]=n,this.index[n.first.id()]=e),r}},t.prototype.copy=function(){for(var e=new t,r=0;r<this.array.length;r++){var n=this.array[r].copy();e.array[r]=n,e.index[n.first.id()]=r}return e},t}(),S=function(){function t(t,e){this.first=t,this.second=e}return t.prototype.copy=function(){return new t(this.first,this.second)},t}(),E=function(){function t(t){void 0===t&&(t=\\\"\\\"),this._value=0,this._context=null,this._id=N++,this._name=t}return t.prototype.id=function(){return this._id},t.prototype.name=function(){return this._name},t.prototype.setName=function(t){this._name=t},t.prototype.context=function(){return this._context},t.prototype.setContext=function(t){this._context=t},t.prototype.value=function(){return this._value},t.prototype.setValue=function(t){this._value=t},t.prototype.plus=function(t){return new k(this,t)},t.prototype.minus=function(t){return new k(this,\\\"number\\\"===typeof t?-t:[-1,t])},t.prototype.multiply=function(t){return new k([t,this])},t.prototype.divide=function(t){return new k([1/t,this])},t.prototype.toJSON=function(){return{name:this._name,value:this._value}},t.prototype.toString=function(){return this._context+\\\"[\\\"+this._name+\\\":\\\"+this._value+\\\"]\\\"},t}(),N=0,k=function(){function t(){var t=A(arguments);this._terms=t.terms,this._constant=t.constant}return t.prototype.terms=function(){return this._terms},t.prototype.constant=function(){return this._constant},t.prototype.value=function(){for(var t=this._constant,e=0,r=this._terms.size();e<r;e++){var n=this._terms.itemAt(e);t+=n.first.value()*n.second}return t},t.prototype.plus=function(e){return new t(this,e)},t.prototype.minus=function(e){return new t(this,\\\"number\\\"===typeof e?-e:[-1,e])},t.prototype.multiply=function(e){return new t([e,this])},t.prototype.divide=function(e){return new t([1/e,this])},t.prototype.isConstant=function(){return 0==this._terms.size()},t.prototype.toString=function(){var t=this._terms.array.map((function(t){return t.second+\\\"*\\\"+t.first.toString()})).join(\\\" + \\\");return this.isConstant()||0===this._constant||(t+=\\\" + \\\"),t+=this._constant},t}();function A(t){for(var e=0,r=function(){return 0},n=w(),o=0,i=t.length;o<i;++o){var a=t[o];if(\\\"number\\\"===typeof a)e+=a;else if(a instanceof E)n.setDefault(a,r).second+=1;else if(a instanceof k){e+=a.constant();for(var s=0,u=(l=a.terms()).size();s<u;s++){var c=l.itemAt(s);n.setDefault(c.first,r).second+=c.second}}else{if(!(a instanceof Array))throw new Error(\\\"invalid Expression argument: \\\"+a);if(2!==a.length)throw new Error(\\\"array must have length 2\\\");var f=a[0],p=a[1];if(\\\"number\\\"!==typeof f)throw new Error(\\\"array item 0 must be a number\\\");if(p instanceof E)n.setDefault(p,r).second+=f;else{if(!(p instanceof k))throw new Error(\\\"array item 1 must be a variable or expression\\\");e+=p.constant()*f;var l;for(s=0,u=(l=p.terms()).size();s<u;s++){c=l.itemAt(s);n.setDefault(c.first,r).second+=c.second*f}}}}return{terms:n,constant:e}}var j,O=function(){function t(){}return t.create=function(t,e,r,n){void 0===n&&(n=1);var o=0;return o+=1e6*Math.max(0,Math.min(1e3,t*n)),o+=1e3*Math.max(0,Math.min(1e3,e*n)),o+=Math.max(0,Math.min(1e3,r*n))},t.clip=function(e){return Math.max(0,Math.min(t.required,e))},t.required=t.create(1e3,1e3,1e3),t.strong=t.create(1,0,0),t.medium=t.create(0,1,0),t.weak=t.create(0,0,1),t}();!function(t){t[t.Le=0]=\\\"Le\\\",t[t.Ge=1]=\\\"Ge\\\",t[t.Eq=2]=\\\"Eq\\\"}(j||(j={}));var z,P=function(){function t(t,e,r,n){void 0===n&&(n=O.required),this._id=C++,this._operator=e,this._strength=O.clip(n),this._expression=void 0===r&&t instanceof k?t:t.minus(r)}return t.prototype.id=function(){return this._id},t.prototype.expression=function(){return this._expression},t.prototype.op=function(){return this._operator},t.prototype.strength=function(){return this._strength},t.prototype.toString=function(){return this._expression.toString()+\\\" \\\"+[\\\"<=\\\",\\\">=\\\",\\\"=\\\"][this._operator]+\\\" 0 (\\\"+this._strength.toString()+\\\")\\\"},t}(),C=0,D=function(){function t(){this._cnMap=w(),this._rowMap=w(),this._varMap=w(),this._editMap=w(),this._infeasibleRows=[],this._objective=new q,this._artificial=null,this._idTick=0}return t.prototype.createConstraint=function(t,e,r,n){void 0===n&&(n=O.required);var o=new P(t,e,r,n);return this.addConstraint(o),o},t.prototype.addConstraint=function(t){if(void 0!==this._cnMap.find(t))throw new Error(\\\"duplicate constraint\\\");var e=this._createRow(t),r=e.row,n=e.tag,o=this._chooseSubject(r,n);if(o.type()===z.Invalid&&r.allDummies()){if(!I(r.constant()))throw new Error(\\\"unsatisfiable constraint\\\");o=n.marker}if(o.type()===z.Invalid){if(!this._addWithArtificialVariable(r))throw new Error(\\\"unsatisfiable constraint\\\")}else r.solveFor(o),this._substitute(o,r),this._rowMap.insert(o,r);this._cnMap.insert(t,n),this._optimize(this._objective)},t.prototype.removeConstraint=function(t){var e=this._cnMap.erase(t);if(void 0===e)throw new Error(\\\"unknown constraint\\\");this._removeConstraintEffects(t,e.second);var r=e.second.marker,n=this._rowMap.erase(r);if(void 0===n){var o=this._getMarkerLeavingSymbol(r);if(o.type()===z.Invalid)throw new Error(\\\"failed to find leaving row\\\");(n=this._rowMap.erase(o)).second.solveForEx(o,r),this._substitute(r,n.second)}this._optimize(this._objective)},t.prototype.hasConstraint=function(t){return this._cnMap.contains(t)},t.prototype.addEditVariable=function(t,e){if(void 0!==this._editMap.find(t))throw new Error(\\\"duplicate edit variable\\\");if((e=O.clip(e))===O.required)throw new Error(\\\"bad required strength\\\");var r=new k(t),n=new P(r,j.Eq,void 0,e);this.addConstraint(n);var o={tag:this._cnMap.find(n).second,constraint:n,constant:0};this._editMap.insert(t,o)},t.prototype.removeEditVariable=function(t){var e=this._editMap.erase(t);if(void 0===e)throw new Error(\\\"unknown edit variable\\\");this.removeConstraint(e.second.constraint)},t.prototype.hasEditVariable=function(t){return this._editMap.contains(t)},t.prototype.suggestValue=function(t,e){var r=this._editMap.find(t);if(void 0===r)throw new Error(\\\"unknown edit variable\\\");var n=this._rowMap,o=r.second,i=e-o.constant;o.constant=e;var a=o.tag.marker,s=n.find(a);if(void 0!==s)return s.second.add(-i)<0&&this._infeasibleRows.push(a),void this._dualOptimize();var u=o.tag.other;if(void 0!==(s=n.find(u)))return s.second.add(i)<0&&this._infeasibleRows.push(u),void this._dualOptimize();for(var c=0,f=n.size();c<f;++c){var p=n.itemAt(c),l=p.second,h=l.coefficientFor(a);0!==h&&l.add(i*h)<0&&p.first.type()!==z.External&&this._infeasibleRows.push(p.first)}this._dualOptimize()},t.prototype.updateVariables=function(){for(var t=this._varMap,e=this._rowMap,r=0,n=t.size();r<n;++r){var o=t.itemAt(r),i=e.find(o.second);void 0!==i?o.first.setValue(i.second.constant()):o.first.setValue(0)}},t.prototype._getVarSymbol=function(t){var e=this;return this._varMap.setDefault(t,(function(){return e._makeSymbol(z.External)})).second},t.prototype._createRow=function(t){for(var e=t.expression(),r=new q(e.constant()),n=e.terms(),o=0,i=n.size();o<i;++o){var a=n.itemAt(o);if(!I(a.second)){var s=this._getVarSymbol(a.first),u=this._rowMap.find(s);void 0!==u?r.insertRow(u.second,a.second):r.insertSymbol(s,a.second)}}var c=this._objective,f=t.strength(),p={marker:R,other:R};switch(t.op()){case j.Le:case j.Ge:var l=t.op()===j.Le?1:-1,h=this._makeSymbol(z.Slack);if(p.marker=h,r.insertSymbol(h,l),f<O.required){var d=this._makeSymbol(z.Error);p.other=d,r.insertSymbol(d,-l),c.insertSymbol(d,f)}break;case j.Eq:if(f<O.required){var y=this._makeSymbol(z.Error),v=this._makeSymbol(z.Error);p.marker=y,p.other=v,r.insertSymbol(y,-1),r.insertSymbol(v,1),c.insertSymbol(y,f),c.insertSymbol(v,f)}else{var m=this._makeSymbol(z.Dummy);p.marker=m,r.insertSymbol(m)}}return r.constant()<0&&r.reverseSign(),{row:r,tag:p}},t.prototype._chooseSubject=function(t,e){for(var r=t.cells(),n=0,o=r.size();n<o;++n){var i=r.itemAt(n);if(i.first.type()===z.External)return i.first}var a=e.marker.type();return(a===z.Slack||a===z.Error)&&t.coefficientFor(e.marker)<0?e.marker:((a=e.other.type())===z.Slack||a===z.Error)&&t.coefficientFor(e.other)<0?e.other:R},t.prototype._addWithArtificialVariable=function(t){var e=this._makeSymbol(z.Slack);this._rowMap.insert(e,t.copy()),this._artificial=t.copy(),this._optimize(this._artificial);var r=I(this._artificial.constant());this._artificial=null;var n=this._rowMap.erase(e);if(void 0!==n){var o=n.second;if(o.isConstant())return r;var i=this._anyPivotableSymbol(o);if(i.type()===z.Invalid)return!1;o.solveForEx(e,i),this._substitute(i,o),this._rowMap.insert(i,o)}for(var a=this._rowMap,s=0,u=a.size();s<u;++s)a.itemAt(s).second.removeSymbol(e);return this._objective.removeSymbol(e),r},t.prototype._substitute=function(t,e){for(var r=this._rowMap,n=0,o=r.size();n<o;++n){var i=r.itemAt(n);i.second.substitute(t,e),i.second.constant()<0&&i.first.type()!==z.External&&this._infeasibleRows.push(i.first)}this._objective.substitute(t,e),this._artificial&&this._artificial.substitute(t,e)},t.prototype._optimize=function(t){for(;;){var e=this._getEnteringSymbol(t);if(e.type()===z.Invalid)return;var r=this._getLeavingSymbol(e);if(r.type()===z.Invalid)throw new Error(\\\"the objective is unbounded\\\");var n=this._rowMap.erase(r).second;n.solveForEx(r,e),this._substitute(e,n),this._rowMap.insert(e,n)}},t.prototype._dualOptimize=function(){for(var t=this._rowMap,e=this._infeasibleRows;0!==e.length;){var r=e.pop(),n=t.find(r);if(void 0!==n&&n.second.constant()<0){var o=this._getDualEnteringSymbol(n.second);if(o.type()===z.Invalid)throw new Error(\\\"dual optimize failed\\\");var i=n.second;t.erase(r),i.solveForEx(r,o),this._substitute(o,i),t.insert(o,i)}}},t.prototype._getEnteringSymbol=function(t){for(var e=t.cells(),r=0,n=e.size();r<n;++r){var o=e.itemAt(r),i=o.first;if(o.second<0&&i.type()!==z.Dummy)return i}return R},t.prototype._getDualEnteringSymbol=function(t){for(var e=Number.MAX_VALUE,r=R,n=t.cells(),o=0,i=n.size();o<i;++o){var a=n.itemAt(o),s=a.first,u=a.second;if(u>0&&s.type()!==z.Dummy){var c=this._objective.coefficientFor(s)/u;c<e&&(e=c,r=s)}}return r},t.prototype._getLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=R,n=this._rowMap,o=0,i=n.size();o<i;++o){var a=n.itemAt(o),s=a.first;if(s.type()!==z.External){var u=a.second,c=u.coefficientFor(t);if(c<0){var f=-u.constant()/c;f<e&&(e=f,r=s)}}}return r},t.prototype._getMarkerLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=e,n=e,o=R,i=o,a=o,s=o,u=this._rowMap,c=0,f=u.size();c<f;++c){var p=u.itemAt(c),l=p.second,h=l.coefficientFor(t);if(0!==h){var d=p.first;if(d.type()===z.External)s=d;else if(h<0){(y=-l.constant()/h)<r&&(r=y,i=d)}else{var y;(y=l.constant()/h)<n&&(n=y,a=d)}}}return i!==o?i:a!==o?a:s},t.prototype._removeConstraintEffects=function(t,e){e.marker.type()===z.Error&&this._removeMarkerEffects(e.marker,t.strength()),e.other.type()===z.Error&&this._removeMarkerEffects(e.other,t.strength())},t.prototype._removeMarkerEffects=function(t,e){var r=this._rowMap.find(t);void 0!==r?this._objective.insertRow(r.second,-e):this._objective.insertSymbol(t,-e)},t.prototype._anyPivotableSymbol=function(t){for(var e=t.cells(),r=0,n=e.size();r<n;++r){var o=e.itemAt(r),i=o.first.type();if(i===z.Slack||i===z.Error)return o.first}return R},t.prototype._makeSymbol=function(t){return new F(t,this._idTick++)},t}();function I(t){return t<0?-t<1e-8:t<1e-8}!function(t){t[t.Invalid=0]=\\\"Invalid\\\",t[t.External=1]=\\\"External\\\",t[t.Slack=2]=\\\"Slack\\\",t[t.Error=3]=\\\"Error\\\",t[t.Dummy=4]=\\\"Dummy\\\"}(z||(z={}));var F=function(){function t(t,e){this._id=e,this._type=t}return t.prototype.id=function(){return this._id},t.prototype.type=function(){return this._type},t}(),R=new F(z.Invalid,-1),q=function(){function t(t){void 0===t&&(t=0),this._cellMap=w(),this._constant=t}return t.prototype.cells=function(){return this._cellMap},t.prototype.constant=function(){return this._constant},t.prototype.isConstant=function(){return this._cellMap.empty()},t.prototype.allDummies=function(){for(var t=this._cellMap,e=0,r=t.size();e<r;++e){if(t.itemAt(e).first.type()!==z.Dummy)return!1}return!0},t.prototype.copy=function(){var e=new t(this._constant);return e._cellMap=this._cellMap.copy(),e},t.prototype.add=function(t){return this._constant+=t},t.prototype.insertSymbol=function(t,e){void 0===e&&(e=1),I(this._cellMap.setDefault(t,(function(){return 0})).second+=e)&&this._cellMap.erase(t)},t.prototype.insertRow=function(t,e){void 0===e&&(e=1),this._constant+=t._constant*e;for(var r=t._cellMap,n=0,o=r.size();n<o;++n){var i=r.itemAt(n);this.insertSymbol(i.first,i.second*e)}},t.prototype.removeSymbol=function(t){this._cellMap.erase(t)},t.prototype.reverseSign=function(){this._constant=-this._constant;for(var t=this._cellMap,e=0,r=t.size();e<r;++e){var n=t.itemAt(e);n.second=-n.second}},t.prototype.solveFor=function(t){var e=this._cellMap,r=-1/e.erase(t).second;this._constant*=r;for(var n=0,o=e.size();n<o;++n)e.itemAt(n).second*=r},t.prototype.solveForEx=function(t,e){this.insertSymbol(t,-1),this.solveFor(e)},t.prototype.coefficientFor=function(t){var e=this._cellMap.find(t);return void 0!==e?e.second:0},t.prototype.substitute=function(t,e){var r=this._cellMap.erase(t);void 0!==r&&this.insertRow(e,r.second)},t}(),V=function(t,e,r){for(var n=0;n<e;n+=1){var o,i=u(t);try{for(i.s();!(o=i.n()).done;){var a=o.value;a.base.solve(a,r)}}catch(s){i.e(s)}finally{i.f()}}},X=function(t,e){var r,n=new D,o={},i=function(t,e){return\\\"\\\".concat(t.id,\\\"_\\\").concat(e)},a=function(t,e){var r=i(t,e);if(!o[r]){var n=o[r]=new E;n.property=e,n.obj=t}},s=u(t);try{for(s.s();!(r=s.n()).done;){var c=r.value;a(c.a,c.base.property),a(c.b,c.base.property)}}catch(m){s.e(m)}finally{s.f()}var f,p=0,l=u(t);try{for(l.s();!(f=l.n()).done;){var h=f.value;try{n.addConstraint(h.base.strict(h,e,o[i(h.a,h.base.property)],o[i(h.b,h.base.property)]))}catch(m){p+=1}}}catch(m){l.e(m)}finally{l.f()}p>0&&console.warn(\\\"Skipped \\\".concat(p,\\\" unsolvable constraints\\\")),n.updateVariables();for(var d=0,y=Object.values(o);d<y.length;d++){var v=y[d];v.obj[v.property]=v.value()}},L={property:\\\"y\\\",strict:function(t,e,r,n){return new P(r.minus(n),j.Ge,e.spaceY,O.required)}},T={property:\\\"y\\\",strict:function(t,e,r,n){return new P(r.minus(n),j.Ge,e.layerSpace,O.required)}},G={property:\\\"x\\\",solve:function(t){var e=t.a,r=t.b,n=t.strength*(e.x-r.x);e.x-=n,r.x+=n},strict:function(t,e,r,n){return new P(r.minus(n),j.Eq,0,O.create(1,0,0,t.strength))}},Y={property:\\\"x\\\",solve:function(t){var e=t.edgeA,r=t.edgeB,n=t.separationA,o=t.separationB,i=t.strength,a=i*((e.sourceNode.x-r.sourceNode.x-n)/n),s=i*((e.targetNode.x-r.targetNode.x-o)/o);e.sourceNode.x-=a,r.sourceNode.x+=a,e.targetNode.x-=s,r.targetNode.x+=s}},U={property:\\\"x\\\",strict:function(t,e,r,n){return new P(n.minus(r),j.Ge,t.separation,O.required)}},B=function(t){var e,r=t.nodes,n=t.edges,o=t.layers,i=t.spaceX,a=t.spaceY,s=t.spreadX,c=t.layerSpaceY,f=t.iterations,p=u(r);try{for(p.s();!(e=p.n()).done;){var l=e.value;l.x=0,l.y=0}}catch(M){p.e(M)}finally{p.f()}var h={spaceX:i,spaceY:a,spreadX:s,layerSpace:.5*(a+c)},d=W(n),y=J(r,o);X([].concat(x(d),x(y)),h);for(var m=v(r),g=$(n,h),_=H(n,h),b=0;b<f;b+=1)V(g,1,h),V(_,50,h);var w=K(m,h);X([].concat(x(w),x(_)),h),Q(n,m,a)},W=function(t){return t.map((function(t){return{base:L,a:t.targetNode,b:t.sourceNode}}))},J=function(t,e){var r=[];if(!e)return r;for(var n=e.map((function(e){return t.filter((function(t){return t.nearestLayer===e}))})),o=0;o<n.length-1;o+=1){var i,a=n[o],s=n[o+1],c={id:\\\"layer-\\\".concat(o),x:0,y:0},f=u(a);try{for(f.s();!(i=f.n()).done;){var p=i.value;r.push({base:T,a:c,b:p})}}catch(y){f.e(y)}finally{f.f()}var l,h=u(s);try{for(h.s();!(l=h.n()).done;){var d=l.value;r.push({base:T,a:d,b:c})}}catch(y){h.e(y)}finally{h.f()}}return r},$=function(t,e){for(var r=e.spaceX,n=[],o=0;o<t.length;o+=1)for(var i=t[o],a=i.sourceNode,s=i.targetNode,u=a.sources.length+a.targets.length+s.sources.length+s.targets.length,c=o+1;c<t.length;c+=1){var f=t[c],p=f.sourceNode,l=f.targetNode;if(!(a.row>=l.row||s.row<=p.row)){var h=p.sources.length+p.targets.length+l.sources.length+l.targets.length;n.push({base:Y,edgeA:i,edgeB:f,separationA:.5*a.width+r+.5*p.width,separationB:.5*s.width+r+.5*l.width,strength:1/Math.max(1,(u+h)/4)})}}return n},H=function(t){return t.map((function(t){var e=t.sourceNode,r=t.targetNode;return{base:G,a:e,b:r,strength:.6/Math.max(1,e.targets.length+r.sources.length-2)}}))},K=function(t,e){for(var r=e.spaceX,n=[],o=0;o<t.length;o+=1){var i=t[o];i.sort((function(t,e){return m(t.x,e.x,t.id,e.id)}));for(var a=0;a<i.length-1;a+=1){var s=i[a],u=i[a+1],c=Math.max(1,s.targets.length+s.sources.length-2),p=Math.max(1,u.targets.length+u.sources.length-2),l=Math.min(10,c*p*e.spreadX),h=f(l*r,r);n.push({base:U,a:s,b:u,separation:.5*s.width+h+.5*u.width})}}return n},Q=function(t,e,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.25,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.25,i=Z(t),a=Math.round(r*o),s=0,c=0;c<e.length-1;c+=1){var p=i[c]||0,l=f(p*n*r,a);s+=l;var h,d=u(e[c+1]);try{for(d.s();!(h=d.n()).done;){var y=h.value;y.y+=s}}catch(v){d.e(v)}finally{d.f()}}},Z=function(t){var e,r={},n=u(t);try{for(n.s();!(e=n.n()).done;){var o=e.value,i=Math.abs(p(o.targetNode,o.sourceNode)-c)/c,a=o.sourceNode.row,s=o.targetNode.row-1;r[a]=r[a]||[0,0],r[a][0]+=i,r[a][1]+=1,s!==a&&(r[s]=r[s]||[0,0],r[s][0]+=i,r[s][1]+=1)}}catch(l){n.e(l)}finally{n.f()}for(var f in r)r[f]=r[f][0]/(r[f][1]||1);return Object.values(r)},tt=function(t){var e,r=t.nodes,n=t.edges,o=t.spaceX,a=t.spaceY,s=t.minPassageGap,c=t.stemUnit,f=t.stemMinSource,g=t.stemMinTarget,_=t.stemMax,w=t.stemSpaceSource,M=t.stemSpaceTarget,S=v(r),E=u(r);try{for(E.s();!(e=E.n()).done;){e.value.targets.sort((function(t,e){return m(p(e.sourceNode,e.targetNode),p(t.sourceNode,t.targetNode))}))}}catch(mt){E.e(mt)}finally{E.f()}var N,k,A,j=u(n);try{for(j.s();!(N=j.n()).done;){var O=N.value,z=O.sourceNode,P=O.targetNode;O.points=[];for(var C=Math.min((z.width-w)/z.targets.length,w)*(z.targets.indexOf(O)-.5*(z.targets.length-1)),D={x:z.x+C,y:z.y},I=z.row+1;I<P.row;I+=1){for(var F=S[I][0],R={x:l(F)-o,y:F.y},q=1/0,V=[i(i({},F),{},{x:Number.MIN_SAFE_INTEGER})].concat(x(S[I]),[i(i({},F),{},{x:Number.MAX_SAFE_INTEGER})]),X=0;X<V.length-1;X+=1){var L=V[X],T=V[X+1],G=l(T)-h(L);if(!(G<s)){var Y=Math.min(o,.5*G),U=b(D.x,D.y,h(L)+Y,d(L)-a,l(T)-Y,d(T)-a),B=(k=D.x,A=U.x,Math.abs(k-A));if(B>q)break;B<q&&(q=B,R=U)}}var W=F.height+a;O.points.push({x:R.x+C,y:R.y}),O.points.push({x:R.x+C,y:R.y+W}),D={x:R.x,y:R.y+W}}}}catch(mt){j.e(mt)}finally{j.f()}var J,$=u(r);try{for($.s();!(J=$.n()).done;){var H=J.value;H.targets.sort((function(t,e){return m(p(e.sourceNode,e.points[0]||e.targetNode),p(t.sourceNode,t.points[0]||t.targetNode))})),H.sources.sort((function(t,e){return m(p(t.points[t.points.length-1]||t.sourceNode,t.targetNode),p(e.points[e.points.length-1]||e.sourceNode,e.targetNode))}))}}catch(mt){$.e(mt)}finally{$.f()}var K,Q=u(n);try{for(Q.s();!(K=Q.n()).done;){var Z,tt=K.value,et=tt.sourceNode,rt=tt.targetNode,nt=Math.min((et.width-w)/et.targets.length,w),ot=Math.min((rt.width-M)/rt.sources.length,M),it=et.targets.indexOf(tt)-.5*(et.targets.length-1),at=rt.sources.indexOf(tt)-.5*(rt.sources.length-1),st=nt*it,ut=ot*at,ct=c*et.targets.length*(1-Math.abs(it)/et.targets.length),ft=c*rt.sources.length*(1-Math.abs(at)/rt.sources.length),pt=[{x:et.x+st,y:y(et)},{x:et.x+st,y:y(et)+f},{x:et.x+st,y:y(et)+f+Math.min(ct,_)}],lt=[{x:rt.x+ut,y:d(rt)-g-Math.min(ft,_)},{x:rt.x+ut,y:d(rt)-g},{x:rt.x+ut,y:d(rt)}],ht=[].concat(pt,x(tt.points),lt),dt=ht[0].y,yt=u(ht);try{for(yt.s();!(Z=yt.n()).done;){var vt=Z.value;vt.y<dt?vt.y=dt:dt=vt.y}}catch(mt){yt.e(mt)}finally{yt.f()}tt.points=ht}}catch(mt){Q.e(mt)}finally{Q.f()}},et={layout:{spaceX:14,spaceY:110,layerSpaceY:55,spreadX:2.2,padding:100,iterations:25},routing:{spaceX:26,spaceY:28,minPassageGap:40,stemUnit:8,stemMinSource:5,stemMinTarget:5,stemMax:20,stemSpaceSource:6,stemSpaceTarget:10}},rt=function(t,e){var r,n={},o=u(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n[i.id]=i,i.targets=[],i.sources=[]}}catch(f){o.e(f)}finally{o.f()}var a,s=u(e);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.sourceNode=n[c.source],c.targetNode=n[c.target],c.sourceNode.targets.push(c),c.targetNode.sources.push(c)}}catch(f){s.e(f)}finally{s.f()}},nt=function(t,e){if(e&&e.length>0){var r,n={},o=u(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;n[i]=!0}}catch(h){o.e(h)}finally{o.f()}var a,s=function(t){return Boolean(t&&t.layer in n)},c=e[e.length-1],f=u(t);try{for(f.s();!(a=f.n()).done;){var p=a.value,l=at(p,ot,it,s);p.nearestLayer=l?l.layer:c}}catch(h){f.e(h)}finally{f.f()}}},ot=function(t){return t.targets.map((function(t){return t.targetNode}))},it=function(t,e){return t.rank-e.rank},at=function t(e,r,n,o,i){return o(e)?e:((i=i||{})[e.id]=!0,r(e).filter((function(t){return!i[t.id]})).sort(n).map((function(e){return t(e,r,n,o,i)})).filter(o).sort(n)[0])},st=function(t,e){var r,n={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},o=u(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=i.x,s=i.y;a<n.min.x&&(n.min.x=a),a>n.max.x&&(n.max.x=a),s<n.min.y&&(n.min.y=s),s>n.max.y&&(n.max.y=s)}}catch(c){o.e(c)}finally{o.f()}return n.width=n.max.x-n.min.x+2*e,n.height=n.max.y-n.min.y+2*e,n.min.x-=e,n.min.y-=e,n},ut=function(t){var e=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:et;rt(t,e),nt(t,r),B(i({nodes:t,edges:e,layers:r},n.layout)),tt(i({nodes:t,edges:e,layers:r},n.routing));var o=st(t,n.layout.padding);return t.forEach((function(t){return g(t,o.min)})),e.forEach((function(t){return _(t,o.min)})),{nodes:t,edges:e,layers:r,size:o}}(t.nodes,t.edges,t.layers);return i(i({},e),{},{size:i(i({},e.size),{},{marginx:100,marginy:100})})};addEventListener(\\\"message\\\",(function(t){var r,n=t.data,o=n.type,i=n.method,a=n.id,s=n.params;\\\"RPC\\\"===o&&i&&((r=e[i])?Promise.resolve().then((function(){return r.apply(e,s)})):Promise.reject(\\\"No such method\\\")).then((function(t){postMessage({type:\\\"RPC\\\",id:a,result:t})})).catch((function(t){var e={message:t};t.stack&&(e.message=t.message,e.stack=t.stack,e.name=t.name),postMessage({type:\\\"RPC\\\",id:a,error:e})}))})),postMessage({type:\\\"RPC\\\",method:\\\"ready\\\"})}]);\\n//# sourceMappingURL=bbd638c82ece6662d5c5.worker.js.map\"])), { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","export const RESET_DATA = 'RESET_DATA';\n\n/**\n * Overwrite the existing data store when receiving new data from upstream\n * @param {Object} data New pipeline state data\n */\nexport function resetData(data) {\n  return {\n    type: RESET_DATA,\n    data,\n  };\n}\n\nexport const TOGGLE_LAYERS = 'TOGGLE_LAYERS';\n\n/**\n * Toggle whether to show layers on/off\n * @param {Boolean} visible True if layers are to be shown\n */\nexport function toggleLayers(visible) {\n  return {\n    type: TOGGLE_LAYERS,\n    visible,\n  };\n}\n\nexport const TOGGLE_EXPORT_MODAL = 'TOGGLE_EXPORT_MODAL';\n\n/**\n * Toggle whether to show the export modal\n * @param {Boolean} visible True if the modal is to be shown\n */\nexport function toggleExportModal(visible) {\n  return {\n    type: TOGGLE_EXPORT_MODAL,\n    visible,\n  };\n}\n\nexport const TOGGLE_SETTINGS_MODAL = 'TOGGLE_SETTINGS_MODAL';\n\n/**\n * Toggle whether to show the settings modal\n * @param {Boolean} visible True if the modal is to be shown\n */\nexport function toggleSettingsModal(visible) {\n  return {\n    type: TOGGLE_SETTINGS_MODAL,\n    visible,\n  };\n}\n\nexport const TOGGLE_PLOT_MODAL = 'TOGGLE_PLOT_MODAL';\n\n/**\n * Toggle whether to show the plot modal\n * @param {Boolean} visible True if the modal is to be shown\n */\nexport function togglePlotModal(visible) {\n  return {\n    type: TOGGLE_PLOT_MODAL,\n    visible,\n  };\n}\n\nexport const TOGGLE_GRAPH = 'TOGGLE_GRAPH';\n\n/**\n * Toggle graph visible/hidden\n * @param {boolean} visible Whether graph is shown\n */\nexport function toggleGraph(visible) {\n  return {\n    type: TOGGLE_GRAPH,\n    visible,\n  };\n}\n\nexport const TOGGLE_TEXT_LABELS = 'TOGGLE_TEXT_LABELS';\n\n/**\n * Toggle whether to show text labels on/off\n * @param {Boolean} textLabels True if text labels are to be shown\n */\nexport function toggleTextLabels(textLabels) {\n  return {\n    type: TOGGLE_TEXT_LABELS,\n    textLabels,\n  };\n}\n\nexport const TOGGLE_PRETTY_NAME = 'TOGGLE_PRETTY_NAME';\n\n/**\n * Toggle whether to show pretty name on/off\n * @param {Boolean} prettyName True if pretty name is to be shown\n */\nexport function togglePrettyName(prettyName) {\n  return {\n    type: TOGGLE_PRETTY_NAME,\n    prettyName,\n  };\n}\n\nexport const TOGGLE_SIDEBAR = 'TOGGLE_SIDEBAR';\n\n/**\n * Toggle sidebar visible/hidden\n * @param {boolean} visible Whether sidebar nav is shown\n */\nexport function toggleSidebar(visible) {\n  return {\n    type: TOGGLE_SIDEBAR,\n    visible,\n  };\n}\n\nexport const TOGGLE_THEME = 'TOGGLE_THEME';\n\n/**\n * Switch between light/dark theme\n * @param {string} theme Theme name\n */\nexport function toggleTheme(theme) {\n  return {\n    type: TOGGLE_THEME,\n    theme,\n  };\n}\n\nexport const UPDATE_CHART_SIZE = 'UPDATE_CHART_SIZE';\n\n/**\n * Store the chart size, based on the window\n * @param {Object} chartSize getBoundingClientRect value\n */\nexport function updateChartSize(chartSize) {\n  return {\n    type: UPDATE_CHART_SIZE,\n    chartSize,\n  };\n}\n\nexport const UPDATE_ZOOM = 'UPDATE_ZOOM';\n\n/**\n * Store the zoom\n * @param {Object} zoom The zoom transform\n */\nexport function updateZoom(zoom) {\n  return {\n    type: UPDATE_ZOOM,\n    zoom,\n  };\n}\n\nexport const TOGGLE_MINIMAP = 'TOGGLE_MINIMAP';\n\n/**\n * Toggle mini map\n * @param {string} visible Visibility status\n */\nexport function toggleMiniMap(visible) {\n  return {\n    type: TOGGLE_MINIMAP,\n    visible,\n  };\n}\n\nexport const CHANGE_FLAG = 'CHANGE_FLAG';\n\n/**\n * Change the given feature flag\n * @param {string} name The flag name\n * @param {value} value The value to set\n */\nexport function changeFlag(name, value) {\n  return {\n    type: CHANGE_FLAG,\n    name,\n    value,\n  };\n}\n\nexport const TOGGLE_IGNORE_LARGE_WARNING = 'TOGGLE_IGNORE_LARGE_WARNING';\n\n/**\n * Resets the ignoreLargeWarning field in the state indicating user preference to enable large graphs to load\n * @param {boolean} ignoreLargeWarning\n */\nexport function toggleIgnoreLargeWarning(ignoreLargeWarning) {\n  return {\n    type: TOGGLE_IGNORE_LARGE_WARNING,\n    ignoreLargeWarning,\n  };\n}\n\nexport const TOGGLE_CODE = 'TOGGLE_CODE';\n\n/**\n * Toggle code panel\n * @param {string} visible Visibility status\n */\nexport function toggleCode(visible) {\n  return {\n    type: TOGGLE_CODE,\n    visible,\n  };\n}\n\nexport const TOGGLE_PARAMETERS_HOVERED = 'TOGGLE_PARAMETERS_HOVERED';\n\n/**\n * Update the value of the currently-active hovered node\n * @param {string|null} nodeHovered The node's unique identifier\n */\nexport function toggleParametersHovered(hoveredParameters) {\n  return {\n    type: TOGGLE_PARAMETERS_HOVERED,\n    hoveredParameters,\n  };\n}\n\nexport const TOGGLE_MODULAR_PIPELINE_FOCUS_MODE =\n  'TOGGLE_MODULAR_PIPELINE_FOCUS_MODE';\n\n/**\n * Update the value of the selected modular pipeline under focus mode\n * @param {Object} modularPipeline The selected modular pipeline for focus mode\n */\nexport function toggleFocusMode(modularPipeline) {\n  return {\n    type: TOGGLE_MODULAR_PIPELINE_FOCUS_MODE,\n    modularPipeline,\n  };\n}\n","import { CHANGE_FLAG } from '../actions';\n\nfunction flagsReducer(flagsState = {}, action) {\n  switch (action.type) {\n    case CHANGE_FLAG: {\n      return Object.assign({}, flagsState, {\n        [action.name]: action.value,\n      });\n    }\n\n    default:\n      return flagsState;\n  }\n}\n\nexport default flagsReducer;\n","// This file contains any web-workers used in the app, which are inlined by\n// webpack + workerize-loader, so that they can be used in the exported library\n// without needing any special configuration on the part of the consumer.\n// Web workers don't work in Jest, so in a test environment we directly import\n// them instead, and then mock up a faux-worker function\n\n/* eslint-disable import/no-webpack-loader-syntax */\n\n// Check for test environment\nconst isTest = typeof jest !== 'undefined';\n\n// Conditionally load task via web worker only in non-test env\nconst graphWorker = isTest\n  ? require('./graph')\n  : require('workerize-loader?inline!./graph');\n\n/**\n * Emulate a web worker for testing purposes\n */\nconst createMockWorker = (worker) => {\n  if (!isTest) {\n    return worker;\n  }\n  return () => {\n    const mockWorker = {\n      terminate: () => {},\n    };\n    Object.keys(worker).forEach((name) => {\n      mockWorker[name] = (payload) =>\n        new Promise((resolve) => resolve(worker[name](payload)));\n    });\n    return mockWorker;\n  };\n};\n\nexport const graph = createMockWorker(graphWorker);\n\n/**\n * Manage the worker, avoiding race conditions by terminating running\n * processes when a new request is made, and reinitialising the instance.\n * Example getJob: (instance, payload) => instance.job(payload)\n * @param {function} worker Init worker and return job functions\n * @param {function} getJob Callback to select correct job function\n * @return {function} Function which returns a promise\n */\nexport function preventWorkerQueues(worker, getJob) {\n  let instance = worker();\n  let running = false;\n\n  return (payload) => {\n    if (running) {\n      // If worker is already processing a job, cancel it and restart\n      instance.terminate();\n      instance = worker();\n    }\n    running = true;\n\n    return getJob(instance, payload).then((response) => {\n      running = false;\n      return response;\n    });\n  };\n}\n","import { graph as worker, preventWorkerQueues } from '../utils/worker';\nimport { toggleGraph } from './index';\n\nexport const TOGGLE_GRAPH_LOADING = 'TOGGLE_GRAPH_LOADING';\n\n/**\n * Toggle whether to display the loading spinner\n * @param {boolean} loading\n */\nexport function toggleLoading(loading) {\n  return {\n    type: TOGGLE_GRAPH_LOADING,\n    loading,\n  };\n}\n\nexport const UPDATE_GRAPH_LAYOUT = 'UPDATE_GRAPH_LAYOUT';\n\n/**\n * Update the graph layout object\n * @param {Object} graph\n */\nexport function updateGraph(graph) {\n  return {\n    type: UPDATE_GRAPH_LAYOUT,\n    graph,\n  };\n}\n\n/**\n * Assign layout engine to use based on the newgraph\n * @param {Object} instance Worker parent instance\n * @param {Object} state A subset of main state\n * @return {function} Promise function\n */\nconst layout = (instance, state) => instance.graphNew(state);\n\n// Prepare new layout worker\nconst layoutWorker = preventWorkerQueues(worker, layout);\n\n/**\n * Async action to calculate graph layout in a web worker\n * whiled displaying a loading spinner\n * @param {Object} graphState A subset of main state\n * @return {function} A promise that resolves when the calculation is done\n */\nexport function calculateGraph(graphState) {\n  if (!graphState) {\n    return updateGraph(graphState);\n  }\n  return async function (dispatch) {\n    dispatch(toggleLoading(true));\n    const graph = await layoutWorker(graphState);\n    dispatch(toggleGraph(true));\n    dispatch(toggleLoading(false));\n    return dispatch(updateGraph(graph));\n  };\n}\n","import { UPDATE_GRAPH_LAYOUT } from '../actions/graph';\n\nfunction nodeReducer(graphState = {}, action) {\n  const updateState = (newState) => Object.assign({}, graphState, newState);\n\n  switch (action.type) {\n    case UPDATE_GRAPH_LAYOUT: {\n      return updateState(action.graph);\n    }\n\n    default:\n      return graphState;\n  }\n}\n\nexport default nodeReducer;\n","import { TOGGLE_LAYERS } from '../actions';\n\nfunction layerReducer(layerState = {}, action) {\n  switch (action.type) {\n    case TOGGLE_LAYERS: {\n      return Object.assign({}, layerState, {\n        visible: action.visible,\n      });\n    }\n\n    default:\n      return layerState;\n  }\n}\n\nexport default layerReducer;\n","export const pathRoot = './api';\n\nexport const localStorageName = 'KedroViz';\n\n// These values are used in both SCSS and JS, and we don't have variable-sharing\n// across Sass and JavaScript, so they're defined in two places. If you update their\n// value here, please also update their corresponding value in src/styles/_variables.scss\nexport const globalToolbarWidth = 80;\n\nexport const metaSidebarWidth = {\n  open: 400,\n  closed: 0,\n};\n\nexport const sidebarWidth = {\n  open: 400 + globalToolbarWidth,\n  closed: 56 + globalToolbarWidth,\n  breakpoint: 700,\n};\n\nexport const codeSidebarWidth = {\n  open: 480,\n  closed: 0,\n};\n\nexport const chartMinWidthScale = 0.25;\n\n// Determine the number of nodes and edges in pipeline to trigger size warning\nexport const largeGraphThreshold = 1000;\n\n// Remember to update the 'Flags' section in the README when updating these:\nexport const flags = {\n  sizewarning: {\n    name: 'Size Warning',\n    description:\n      'Show a warning before rendering very large graphs (page reload required)',\n    default: true,\n    icon: '🐳',\n  },\n  expandAllPipelines: {\n    name: 'Expand all modular pipelines',\n    description:\n      'Expand all modular pipelines on first load (page reload required)',\n    default: false,\n    icon: '🔛',\n  },\n};\n\nexport const settings = {\n  prettyName: {\n    name: 'Pretty Name',\n    description: 'Display a formatted name for the kedro nodes',\n    default: true,\n  },\n};\n\n// Sidebar groups is an ordered map of { id: label }\nexport const sidebarGroups = {\n  elementType: 'Element types',\n  tag: 'Tags',\n};\n\n// Sidebar element types is an ordered map of { id: label }\nexport const sidebarElementTypes = {\n  task: 'Nodes',\n  data: 'Datasets',\n  parameters: 'Parameters',\n};\n\nexport const shortTypeMapping = {\n  'kedro.extras.datasets.plotly.plotly_dataset.PlotlyDataSet': 'plotly',\n  'kedro.extras.datasets.plotly.json_dataset.JSONDataSet': 'plotly',\n};\n","//--- Useful JS utility functions ---//\nimport { pathRoot } from '../config';\n\n/**\n * Loop through an array and output to an object\n * @param {Array} array\n * @param {Function} callback\n */\nexport const arrayToObject = (array, callback) => {\n  const newObject = {};\n  array.forEach((key) => {\n    newObject[key] = callback(key);\n  });\n  return newObject;\n};\n\n/**\n * Determine the endpoint URL for loading different data types\n * @param {string} type Data type\n * @param {string=} id Endpoint identifier e.g. pipeline ID\n */\nexport const getUrl = (type, id) => {\n  switch (type) {\n    case 'main':\n      return [pathRoot, 'main'].join('/');\n    case 'pipeline':\n      if (!id) {\n        throw new Error('No pipeline ID provided');\n      }\n      return [pathRoot, 'pipelines', id].join('/');\n    case 'nodes':\n      if (!id) {\n        throw new Error('No node ID provided');\n      }\n      return [pathRoot, 'nodes', id].join('/');\n    default:\n      throw new Error('Unknown URL type');\n  }\n};\n\n/**\n * Filter duplicate values from an array\n * @param {any} d Datum\n * @param {number} i Index\n * @param {Array} arr The array to remove duplicate values from\n */\nexport const unique = (d, i, arr) => arr.indexOf(d) === i;\n\n/**\n * Returns true if any of the given props are different between given objects.\n * Only shallow changes are detected.\n * @param {Array} props The prop names to check\n * @param {object} objectA The first object\n * @param {object} objectB The second object\n * @returns {boolean} True if any prop changed else false\n */\nexport const changed = (props, objectA, objectB) => {\n  return (\n    objectA && objectB && props.some((prop) => objectA[prop] !== objectB[prop])\n  );\n};\n","import { json } from 'd3-fetch';\nimport { getUrl } from '../utils';\n\n/**\n * Asynchronously load and parse data from json file using d3-fetch.\n * Throws an error if the request for `main` fails.\n * For requests other than `main`, returns the given or default fallback response.\n * @param {string} path JSON file location. Defaults to main data url from config.js\n * @param {object} fallback The fallback response object on request failure. Default `{}`.\n * @return {function} A promise that will return when the file is loaded and parsed\n */\nconst loadJsonData = (path = getUrl('main'), fallback = {}) =>\n  json(path).catch(() => {\n    const fullPath = `/public${path.substr(1)}`;\n\n    // For main route throw a user error\n    if (path === getUrl('main')) {\n      throw new Error(\n        `Unable to load data from ${path}. If you're running Kedro-Viz as a standalone (e.g. for JavaScript development), please check that you have placed a data file at ${fullPath}.`\n      );\n    }\n\n    return new Promise((resolve) => resolve(fallback));\n  });\n\nexport default loadJsonData;\n","import { localStorageName } from '../config';\n\nconst noWindow = typeof window === 'undefined';\n\n/**\n * Retrieve state data from localStorage\n * @return {Object} State\n */\nexport const loadState = () => {\n  if (noWindow) {\n    return {};\n  }\n  try {\n    const serializedState = window.localStorage.getItem(localStorageName);\n    if (serializedState === null) {\n      return {};\n    }\n    return JSON.parse(serializedState);\n  } catch (err) {\n    console.error(err);\n    return {};\n  }\n};\n\n/**\n * Save updated state to localStorage\n * @param {Object} state New state object\n */\nexport const saveState = (state) => {\n  if (noWindow) {\n    return;\n  }\n  try {\n    const newState = Object.assign(loadState(), state);\n    // Remove deprecated key from localStorage to suppress error.\n    // This can be removed in future versions of KedroViz:\n    if (newState.hasOwnProperty('nodeTypeDisabled')) {\n      delete newState.nodeTypeDisabled;\n    }\n    const serializedState = JSON.stringify(newState);\n    window.localStorage.setItem(localStorageName, serializedState);\n  } catch (err) {\n    console.error(err);\n  }\n};\n\n/**\n * Remove unnecessary keys to prevent them being stored in state forever\n * @param {object} obj An object containing keys and booleans\n * @return {object} A new clone object but with the falsey keys removed\n */\nexport const pruneFalseyKeys = (obj) => {\n  const newObj = {};\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key) && obj[key]) {\n      newObj[key] = obj[key];\n    }\n  }\n  return newObj;\n};\n","import { arrayToObject } from '../utils';\n\n/**\n * Create new default pipeline state instance\n * @return {object} state\n */\nexport const createInitialPipelineState = () => ({\n  pipeline: {\n    ids: [],\n    name: {},\n  },\n  modularPipeline: {\n    ids: [],\n    tree: {},\n    visible: {},\n    expanded: [],\n    active: {},\n  },\n  node: {\n    ids: [],\n    name: {},\n    fullName: {},\n    type: {},\n    tags: {},\n    layer: {},\n    disabled: {},\n    pipelines: {},\n    clicked: null,\n    hovered: null,\n    fetched: {},\n    code: {},\n    parameters: {},\n    filepath: {},\n    inputs: {},\n    outputs: {},\n    plot: {},\n    trackingData: {},\n    datasetType: {},\n    originalType: {},\n    transcodedTypes: {},\n    runCommand: {},\n    modularPipelines: {},\n  },\n  nodeType: {\n    ids: ['task', 'data', 'parameters', 'modularPipeline'],\n    name: {\n      data: 'Datasets',\n      task: 'Nodes',\n      parameters: 'Parameters',\n      modularPipeline: 'Modular Pipelines',\n    },\n    disabled: {},\n  },\n  edge: {\n    ids: [],\n    sources: {},\n    targets: {},\n  },\n  layer: {\n    ids: [],\n    name: {},\n    visible: true,\n  },\n  tag: {\n    ids: [],\n    name: {},\n    active: {},\n    enabled: {},\n  },\n  hoveredParameters: false,\n});\n\n/**\n * Check whether data is in expected format\n * @param {Object} data - The parsed data input\n * @return {Boolean} True if valid for formatting\n */\nconst validateInput = (data) => {\n  if (!data) {\n    throw new Error('No data provided to Kedro-Viz');\n  }\n  if (data === 'json') {\n    // Data is still loading\n    return false;\n  }\n  if (!Array.isArray(data.edges) || !Array.isArray(data.nodes)) {\n    if (typeof jest === 'undefined') {\n      console.error('Invalid Kedro-Viz data:', data);\n    }\n    throw new Error(\n      'Invalid Kedro-Viz data input. Please ensure that your pipeline data includes arrays of nodes and edges'\n    );\n  }\n  return true;\n};\n\n/**\n * Get unique, reproducible ID for each edge, based on its nodes\n * @param {Object} source - Name and type of the source node\n * @param {Object} target - Name and type of the target node\n */\nconst createEdgeID = (source, target) => [source, target].join('|');\n\n/**\n * Add a new pipeline\n * @param {string} pipeline.id - Unique ID\n * @param {string} pipeline.name - Pipeline name\n */\nconst addPipeline = (state) => (pipeline) => {\n  const { id } = pipeline;\n  if (state.pipeline.name[id]) {\n    return;\n  }\n  state.pipeline.ids.push(id);\n  state.pipeline.name[id] = pipeline.name;\n};\n\n/**\n * Add a new node if it doesn't already exist\n * @param {string} name - Default node name\n * @param {string} type - 'data' or 'task'\n * @param {Array} tags - List of associated tags\n */\nconst addNode = (state) => (node) => {\n  const { id } = node;\n  if (state.node.name[id]) {\n    return;\n  }\n  state.node.ids.push(id);\n  state.node.name[id] = node.name;\n  state.node.fullName[id] = node.full_name || node.name;\n  state.node.type[id] = node.type;\n  state.node.layer[id] = node.layer;\n  state.node.pipelines[id] = node.pipelines\n    ? arrayToObject(node.pipelines, () => true)\n    : {};\n  state.node.tags[id] = node.tags || [];\n  // supports for metadata in case it exists on initial load\n  state.node.code[id] = node.code;\n  state.node.parameters[id] = node.parameters;\n  state.node.filepath[id] = node.filepath;\n  state.node.plot[id] = node.plot;\n  state.node.datasetType[id] = node.dataset_type;\n  state.node.originalType[id] = node.original_type;\n  state.node.transcodedTypes[id] = node.transcoded_types;\n  state.node.runCommand[id] = node.runCommand;\n  state.node.modularPipelines[id] = node.modular_pipelines || [];\n};\n\n/**\n * Create a new link between two nodes and add it to the edges array\n * @param {Object} source - Parent node\n * @param {Object} target - Child node\n */\nconst addEdge =\n  (state) =>\n  ({ source, target }) => {\n    const id = createEdgeID(source, target);\n    if (state.edge.ids.includes(id)) {\n      return;\n    }\n    state.edge.ids.push(id);\n    state.edge.sources[id] = source;\n    state.edge.targets[id] = target;\n  };\n\n/**\n * Add a new Tag if it doesn't already exist\n * @param {Object} tag - Tag object\n */\nconst addTag = (state) => (tag) => {\n  const { id } = tag;\n  state.tag.ids.push(id);\n  state.tag.name[id] = tag.name;\n};\n\n/**\n * Add a new Layer if it doesn't already exist\n * @param {Object} layer - Layer object\n */\nconst addLayer = (state) => (layer) => {\n  // using layer name as both layerId and name.\n  // It futureproofs it if we need a separate layer ID in the future.\n  state.layer.ids.push(layer);\n  state.layer.name[layer] = layer;\n};\n\n/**\n * Convert the pipeline data into a normalized state object\n * @param {Object} data Raw unformatted data input\n * @return {Object} Formatted, normalized state\n */\nconst normalizeData = (data, expandAllPipelines) => {\n  const state = createInitialPipelineState();\n\n  if (data === 'json') {\n    state.dataSource = 'json';\n  } else if (data.source) {\n    state.dataSource = data.source;\n  }\n\n  if (!validateInput(data)) {\n    return state;\n  }\n\n  data.nodes.forEach(addNode(state));\n  data.edges.forEach(addEdge(state));\n  if (data.pipelines) {\n    data.pipelines.forEach(addPipeline(state));\n    if (state.pipeline.ids.length) {\n      state.pipeline.main = data.selected_pipeline || state.pipeline.ids[0];\n      state.pipeline.active = state.pipeline.main;\n    }\n  }\n  if (data.modular_pipelines) {\n    state.modularPipeline.ids = Object.keys(data.modular_pipelines);\n    state.modularPipeline.tree = data.modular_pipelines;\n\n    // Case for expandAllPipelines in component props or within flag\n    if (expandAllPipelines) {\n      // assign all modular pipelines into expanded state\n      state.modularPipeline.expanded = state.modularPipeline.ids;\n      // assign all nodes as visible nodes in modular pipelines\n      const nodeIds = state.node.ids;\n      nodeIds.forEach((nodeId) => {\n        if (!state.modularPipeline.ids.includes(nodeId)) {\n          state.modularPipeline.visible[nodeId] = true;\n        }\n      });\n    } else {\n      for (const child of data.modular_pipelines['__root__'].children) {\n        state.modularPipeline.visible[child.id] = true;\n      }\n    }\n  }\n\n  if (data.tags) {\n    data.tags.forEach(addTag(state));\n  }\n  if (data.layers) {\n    data.layers.forEach(addLayer(state));\n  }\n\n  return state;\n};\n\nexport default normalizeData;\n","import { flags as flagsConfig } from '../config';\n\n/**\n * Flag definitions\n */\nexport const Flags = {\n  /**\n   * Returns `true` if the flag is defined otherwise `false`\n   * @param {string} name The flag name to test\n   * @returns {boolean} The result\n   */\n  isDefined: (name) => Flags.names().includes(name),\n\n  /**\n   * Returns an array of defined flag names\n   * @returns {array} The defined flag names\n   */\n  names: () => Object.keys(flagsConfig),\n\n  /**\n   * Returns an object mapping flag names to their default values\n   * @returns {object} The defined flag defaults\n   */\n  defaults: () =>\n    Flags.names().reduce(\n      (result, flag) =>\n        Object.assign(result, { [flag]: flagsConfig[flag].default }),\n      {}\n    ),\n};\n\n/**\n * Returns an object with flags as set in given or current URL\n * @param {string=} url The URL (optional, default current location)\n * @returns {object} An object with flags and their values\n */\nexport const getFlagsFromUrl = (url) => {\n  const flags = {};\n\n  let urlParams;\n  try {\n    urlParams = new URL(url || document.location.href).searchParams;\n  } catch (e) {\n    console.warn('Feature flags are not supported in this browser');\n    return flags;\n  }\n\n  [...urlParams].forEach(([name, value]) =>\n    Flags.isDefined(name)\n      ? (flags[name] = value === 'true' || value === '1' || value === '')\n      : null\n  );\n\n  return flags;\n};\n\n/**\n * Returns a user info message describing the status of all defined flags\n * @param {object} flagsEnabled An object mapping of flag status\n * @returns {string} The info message\n */\nexport const getFlagsMessage = (flagsEnabled) => {\n  const allNames = Flags.names();\n\n  if (allNames.length > 0) {\n    let info = 'Experimental features 🏄‍♂️\\n';\n\n    allNames.forEach((name) => {\n      if (flagsConfig[name].private) {\n        return;\n      }\n      const isEnabled = flagsEnabled[name];\n      const status = isEnabled ? 'Enabled' : 'Disabled';\n      const statusIcon = isEnabled ? '🟢' : '⚪️';\n      const icon = flagsConfig[name].icon;\n      const description = flagsConfig[name].description;\n      info += `\\n${statusIcon} ${icon} \"${name}\" · ${description} · ${status}`;\n    });\n\n    info += `\\n\\nSee docs on flags for more info 📖`;\n    info += `\\nhttps://github.com/kedro-org/kedro-viz#flags`;\n\n    return info;\n  }\n};\n\nexport const getFlagsState = () => {\n  const allNames = Flags.names();\n  return allNames.map((flag) => {\n    return {\n      name: flagsConfig[flag].name,\n      value: flag,\n      description: flagsConfig[flag].description,\n    };\n  });\n};\n","import deepmerge from 'deepmerge';\nimport { loadState, saveState } from './helpers';\nimport normalizeData from './normalize-data';\nimport { getFlagsFromUrl, Flags } from '../utils/flags';\nimport { settings, sidebarWidth } from '../config';\n\n/**\n * Create new default state instance for properties that aren't overridden\n * when the pipeline is reset with new data via the App component's data prop\n * @return {object} state\n */\nexport const createInitialState = () => ({\n  chartSize: {},\n  flags: Flags.defaults(),\n  textLabels: true,\n  theme: 'dark',\n  prettyName: settings.prettyName.default,\n  ignoreLargeWarning: false,\n  loading: {\n    graph: false,\n    pipeline: false,\n    node: false,\n  },\n  visible: {\n    graph: true,\n    labelBtn: true,\n    layerBtn: true,\n    exportBtn: true,\n    exportModal: false,\n    plotModal: false,\n    settingsModal: false,\n    sidebar: window.innerWidth > sidebarWidth.breakpoint,\n    code: false,\n    miniMapBtn: true,\n    miniMap: true,\n    modularPipelineFocusMode: null,\n  },\n  display: {\n    globalToolbar: true,\n    sidebar: true,\n    miniMap: true,\n    expandAllPipelines: false,\n  },\n  zoom: {},\n});\n\n/**\n * Load values from localStorage and combine with existing state,\n * but filter out any unused values from localStorage\n * @param {object} state Initial/extant state\n * @return {object} Combined state from localStorage\n */\nexport const mergeLocalStorage = (state) => {\n  const localStorageState = loadState();\n  Object.keys(localStorageState).forEach((key) => {\n    if (!state[key]) {\n      delete localStorageState[key];\n    }\n  });\n  return deepmerge(state, localStorageState);\n};\n\n/**\n * Prepare the pipeline data part of the state by normalizing the raw data,\n * and applying saved state from localStorage.\n * This part is separated so that it can be reset without overriding user settings,\n * because it can be run both on initial state load and again later on.\n * The applyFixes part should only ever be run once, on first load.\n * Exactly when it runs depends on whether the data is loaded asynchronously or not.\n * @param {object} data Data prop passed to App component\n * @param {boolean} applyFixes Whether to override initialState\n */\nexport const preparePipelineState = (data, applyFixes, expandAllPipelines) => {\n  const state = mergeLocalStorage(normalizeData(data, expandAllPipelines));\n  if (applyFixes) {\n    // Use main pipeline if active pipeline from localStorage isn't recognised\n    if (!state.pipeline.ids.includes(state.pipeline.active)) {\n      state.pipeline.active = state.pipeline.main;\n    }\n  }\n\n  return state;\n};\n\n/**\n * Prepare the non-pipeline data part of the state. This part is separated so that it\n * will persist if the pipeline data is reset.\n * Merge local storage and add custom state overrides from props etc\n * @param {object} props Props passed to App component\n * @return {object} Updated initial state\n */\nexport const prepareNonPipelineState = (props) => {\n  const state = mergeLocalStorage(createInitialState());\n\n  let newVisibleProps = {};\n  if (props.display?.sidebar === false || state.display.sidebar === false) {\n    newVisibleProps['sidebar'] = false;\n  }\n\n  if (props.display?.minimap === false || state.display.miniMap === false) {\n    newVisibleProps['miniMap'] = false;\n  }\n\n  return {\n    ...state,\n    flags: { ...state.flags, ...getFlagsFromUrl() },\n    theme: props.theme || state.theme,\n    visible: { ...state.visible, ...props.visible, ...newVisibleProps },\n    display: { ...state.display, ...props.display },\n  };\n};\n\n/**\n * Configure the redux store's initial state, by merging default values\n * with normalised pipeline data and localStorage.\n * If parameters flag is set to true, then disable parameters on initial load\n * @param {object} props App component props\n * @return {object} Initial state\n */\nconst getInitialState = (props = {}) => {\n  const nonPipelineState = prepareNonPipelineState(props);\n  saveState({\n    nodeType: {\n      // Default to disabled parameters and other types enabled\n      disabled: { parameters: true, task: false, data: false },\n    },\n  });\n\n  const expandAllPipelines =\n    nonPipelineState.display.expandAllPipelines ||\n    nonPipelineState.flags.expandAllPipelines;\n\n  const pipelineState = preparePipelineState(\n    props.data,\n    props.data !== 'json',\n    expandAllPipelines\n  );\n\n  return {\n    ...nonPipelineState,\n    ...pipelineState,\n  };\n};\n\nexport default getInitialState;\n","import { getUrl } from '../utils';\nimport loadJsonData from '../store/load-data';\nimport { preparePipelineState } from '../store/initial-state';\nimport { resetData, toggleGraph } from './index';\n\n/**\n * This file contains actions that update the active pipeline, and if loading data\n * asynchronously, they also handle loading this pipeline data from different endpoints.\n *\n * Many different cases need to be addressed, including:\n * 1. Loading data synchronously, or asynchonously.\n * 2. Loading data and updating the pipeline on first page load, or on user actions.\n * 3. Whether the dataset has pipelines defined in it, or not.\n * 4. Whether localStorage has an active pipeline already defined.\n * 5. If so, whether it exists in the current dataset.\n * 6. Whether the requested endpoint is the 'main' one, or not.\n *\n * These are mostly handled either within this file, in the preparePipelineState\n * utility, or in the getNodeDisabledPipeline selector. Please see their tests\n * for more info about implementation requirements.\n */\n\nexport const UPDATE_ACTIVE_PIPELINE = 'UPDATE_ACTIVE_PIPELINE';\n\n/**\n * Update the actively-selected pipeline\n * @param {string} pipeline Pipeline ID\n */\nexport function updateActivePipeline(pipeline) {\n  return {\n    type: UPDATE_ACTIVE_PIPELINE,\n    pipeline,\n  };\n}\n\nexport const TOGGLE_PIPELINE_LOADING = 'TOGGLE_PIPELINE_LOADING';\n\n/**\n * Toggle whether to display the loading spinner\n * @param {boolean} loading True if pipeline is still loading\n */\nexport function toggleLoading(loading) {\n  return {\n    type: TOGGLE_PIPELINE_LOADING,\n    loading,\n  };\n}\n\n/**\n * Determine where to load data from\n * @param {object} pipeline Pipeline state\n */\nexport const getPipelineUrl = (pipeline) => {\n  if (pipeline.active === pipeline.main) {\n    return getUrl('main');\n  }\n  return getUrl('pipeline', pipeline.active);\n};\n\n/**\n * Check whether another async data pipeline request is needed on first page-load.\n * A second request is typically only required when an active pipeline is set in\n * localStorage, and it's not the 'main' pipeline endpoint.\n * @param {object} pipeline Pipeline state\n * @return {boolean} True if another request is needed\n */\nexport const requiresSecondRequest = (pipeline) => {\n  // Pipelines are not present in the data\n  if (!pipeline.ids.length || !pipeline.main) {\n    return false;\n  }\n  // There is no active pipeline set\n  if (!pipeline.active) {\n    return false;\n  }\n\n  // The active pipeline is not 'main'\n  return pipeline.active !== pipeline.main;\n};\n\n/**\n * Load pipeline data on initial page-load\n * @return {function} A promise that resolves when the data is loaded\n */\nexport function loadInitialPipelineData() {\n  return async function (dispatch, getState) {\n    // Get a copy of the full state from the store\n    const state = getState();\n    // If data is passed synchronously then this process isn't necessary\n    if (state.dataSource !== 'json') {\n      return;\n    }\n    dispatch(toggleLoading(true));\n    // Load 'main' data file. This is always loaded first, because it's needed\n    // in order to obtain the list of pipelines, which is required for determining\n    // whether the active pipeline (from localStorage) exists in the data.\n    const url = getUrl('main');\n    // obtain the status of expandAllPipelines to decide whether it needs to overwrite the\n    // list of visible nodes\n    const expandAllPipelines =\n      state.display.expandAllPipelines || state.flags.expandAllPipelines;\n    let newState = await loadJsonData(url).then((data) =>\n      preparePipelineState(data, true, expandAllPipelines)\n    );\n    // If the active pipeline isn't 'main' then request data from new URL\n    if (requiresSecondRequest(newState.pipeline)) {\n      const url = getPipelineUrl(newState.pipeline);\n      newState = await loadJsonData(url).then((data) =>\n        preparePipelineState(data, false, expandAllPipelines)\n      );\n    }\n    dispatch(resetData(newState));\n    dispatch(toggleLoading(false));\n  };\n}\n\n/**\n * Change pipeline on selection, loading new data if necessary\n * @param {string} pipelineID Unique ID for new pipeline\n * @return {function} A promise that resolves when the data is loaded\n */\nexport function loadPipelineData(pipelineID) {\n  return async function (dispatch, getState) {\n    const { dataSource, pipeline, display, flags } = getState();\n    if (pipelineID && pipelineID === pipeline.active) {\n      return;\n    }\n    if (dataSource === 'json') {\n      dispatch(toggleLoading(true));\n      // Remove the previous graph to show that a new pipeline is being loaded\n      dispatch(toggleGraph(false));\n      const url = getPipelineUrl({\n        main: pipeline.main,\n        active: pipelineID,\n      });\n      const expandAllPipelines =\n        display.expandAllPipelines || flags.expandAllPipelines;\n      const newState = await loadJsonData(url).then((data) =>\n        preparePipelineState(data, false, expandAllPipelines)\n      );\n      // Set active pipeline here rather than dispatching two separate actions,\n      // to improve performance by only requiring one state recalculation\n      newState.pipeline.active = pipelineID;\n      dispatch(resetData(newState));\n      dispatch(toggleLoading(false));\n    } else {\n      dispatch(updateActivePipeline(pipelineID));\n    }\n  };\n}\n","import { getUrl } from '../utils';\nimport loadJsonData from '../store/load-data';\n\nexport const TOGGLE_NODE_CLICKED = 'TOGGLE_NODE_CLICKED';\n\n/**\n * Update the value of the currently-active clicked node\n * @param {string|null} nodeClicked The node's unique identifier\n */\nexport function toggleNodeClicked(nodeClicked) {\n  return {\n    type: TOGGLE_NODE_CLICKED,\n    nodeClicked,\n  };\n}\n\nexport const TOGGLE_NODES_DISABLED = 'TOGGLE_NODES_DISABLED';\n\n/**\n * Toggle a selected group of nodes' visibility on/off\n * @param {Array} nodeIDs The nodes' unique identifiers\n * @param {Boolean} isDisabled Whether the node should be visible\n */\nexport function toggleNodesDisabled(nodeIDs, isDisabled) {\n  return {\n    type: TOGGLE_NODES_DISABLED,\n    nodeIDs,\n    isDisabled,\n  };\n}\n\nexport const TOGGLE_NODE_HOVERED = 'TOGGLE_NODE_HOVERED';\n\n/**\n * Update the value of the currently-active hovered node\n * @param {string|null} nodeHovered The node's unique identifier\n */\nexport function toggleNodeHovered(nodeHovered) {\n  return {\n    type: TOGGLE_NODE_HOVERED,\n    nodeHovered,\n  };\n}\n\nexport const TOGGLE_NODE_DATA_LOADING = 'TOGGLE_NODE_DATA_LOADING';\n\n/**\n * Toggle whether to display the loading spinner\n * @param {boolean} loading True if pipeline is still loading\n */\nexport function toggleNodeDataLoading(loading) {\n  return {\n    type: TOGGLE_NODE_DATA_LOADING,\n    loading,\n  };\n}\n\nexport const ADD_NODE_METADATA = 'ADD_NODE_METADATA';\n\n/**\n * Toggle whether to display the loading spinner\n * @param {boolean} loading True if pipeline is still loading\n */\nexport function addNodeMetadata(data) {\n  return {\n    type: ADD_NODE_METADATA,\n    data,\n  };\n}\n\n/**\n * update node metadata on selection, loading new data if it has not been previously called\n * @param {string} nodeID node id of clicked node\n * @return {function} A promise that resolves when the data is loaded\n */\nexport function loadNodeData(nodeID) {\n  return async function (dispatch, getState) {\n    const { dataSource, node } = getState();\n\n    // since we don't have design for a modular pipeline metadata side panel just yet,\n    // disable clicking on modular pipeline node\n    if (node.type[nodeID] === 'modularPipeline') {\n      return;\n    }\n\n    dispatch(toggleNodeClicked(nodeID));\n\n    if (dataSource === 'json' && nodeID && !node.fetched[nodeID]) {\n      dispatch(toggleNodeDataLoading(true));\n      const url = getUrl('nodes', nodeID);\n      const nodeData = await loadJsonData(url);\n      dispatch(addNodeMetadata({ id: nodeID, data: nodeData }));\n      dispatch(toggleNodeDataLoading(false));\n    }\n  };\n}\n","import { TOGGLE_GRAPH_LOADING } from '../actions/graph';\nimport { TOGGLE_PIPELINE_LOADING } from '../actions/pipelines';\nimport { TOGGLE_NODE_DATA_LOADING } from '../actions/nodes';\n\nfunction loadingReducer(loadingState = {}, action) {\n  switch (action.type) {\n    case TOGGLE_PIPELINE_LOADING: {\n      return Object.assign({}, loadingState, {\n        pipeline: action.loading,\n      });\n    }\n\n    case TOGGLE_GRAPH_LOADING: {\n      return Object.assign({}, loadingState, {\n        graph: action.loading,\n      });\n    }\n\n    case TOGGLE_NODE_DATA_LOADING: {\n      return Object.assign({}, loadingState, {\n        node: action.loading,\n      });\n    }\n\n    default:\n      return loadingState;\n  }\n}\n\nexport default loadingReducer;\n","import {\n  TOGGLE_NODE_CLICKED,\n  TOGGLE_NODES_DISABLED,\n  TOGGLE_NODE_HOVERED,\n  ADD_NODE_METADATA,\n} from '../actions/nodes';\nimport { UPDATE_ACTIVE_PIPELINE } from '../actions/pipelines';\n\nfunction nodeReducer(nodeState = {}, action) {\n  const updateState = (newState) => Object.assign({}, nodeState, newState);\n\n  switch (action.type) {\n    case TOGGLE_NODE_CLICKED: {\n      return updateState({\n        clicked: action.nodeClicked,\n      });\n    }\n\n    case TOGGLE_NODES_DISABLED: {\n      return updateState({\n        clicked: action.nodeIDs.includes(nodeState.clicked)\n          ? null\n          : nodeState.clicked,\n        disabled: action.nodeIDs.reduce(\n          (disabled, id) =>\n            Object.assign({}, disabled, {\n              [id]: action.isDisabled,\n            }),\n          nodeState.disabled\n        ),\n      });\n    }\n\n    case TOGGLE_NODE_HOVERED: {\n      return updateState({\n        hovered: action.nodeHovered,\n      });\n    }\n\n    case UPDATE_ACTIVE_PIPELINE: {\n      return updateState({\n        clicked: null,\n        hovered: null,\n      });\n    }\n\n    case ADD_NODE_METADATA: {\n      const { id, data } = action.data;\n      return updateState({\n        fetched: Object.assign({}, nodeState.fetched, {\n          [id]: true,\n        }),\n        code: Object.assign({}, nodeState.code, {\n          [id]: data.code,\n        }),\n        filepath: Object.assign({}, nodeState.filepath, {\n          [id]: data.filepath,\n        }),\n        parameters: Object.assign({}, nodeState.parameters, {\n          [id]: data.parameters,\n        }),\n        inputs: Object.assign({}, nodeState.inputs, {\n          [id]: data.inputs,\n        }),\n        outputs: Object.assign({}, nodeState.outputs, {\n          [id]: data.outputs,\n        }),\n        // the data returned from the API under the field name 'type' for dataset type nodes\n        datasetType: Object.assign({}, nodeState.datasetType, {\n          [id]: data.type,\n        }),\n        originalType: Object.assign({}, nodeState.originalType, {\n          [id]: data.original_type,\n        }),\n        transcodedTypes: Object.assign({}, nodeState.transcodedTypes, {\n          [id]: data.transcoded_types,\n        }),\n        plot: Object.assign({}, nodeState.plot, {\n          [id]: data.plot,\n        }),\n        trackingData: Object.assign({}, nodeState.trackingData, {\n          [id]: data.tracking_data,\n        }),\n        runCommand: Object.assign({}, nodeState.runCommand, {\n          [id]: data.run_command,\n        }),\n      });\n    }\n\n    default:\n      return nodeState;\n  }\n}\n\nexport default nodeReducer;\n","export const TOGGLE_TYPE_DISABLED = 'TOGGLE_TYPE_DISABLED';\n\n/**\n * The default enabled / disabled value for all types is 'unset', meaning not explicitly set by user.\n * The value `0` is chosen to be falsy, JSON serializable but distinct from `false`.\n * In this state the type is effectively enabled by default, see reducers/node-type.js for usage.\n */\nexport const NODE_TYPE_DISABLED_UNSET = 0;\n\n/**\n * Toggle one or more node-type's visibility on/off\n * @param {string|Object} typeIDs A single type id string, or an object map of type id to disabled booleans\n * @param {?Boolean} disabled True if type is disabled (when passing a single type id string)\n */\nexport function toggleTypeDisabled(typeIDs, disabled) {\n  return {\n    type: TOGGLE_TYPE_DISABLED,\n    typeIDs: typeof typeIDs === 'string' ? { [typeIDs]: disabled } : typeIDs,\n  };\n}\n","import {\n  TOGGLE_TYPE_DISABLED,\n  NODE_TYPE_DISABLED_UNSET,\n} from '../actions/node-type';\n\n/**\n * See actions/node-type.js for details on the 'unset' value.\n */\nconst allNodeTypesUnset = {\n  parameters: NODE_TYPE_DISABLED_UNSET,\n  task: NODE_TYPE_DISABLED_UNSET,\n  data: NODE_TYPE_DISABLED_UNSET,\n};\n\nconst isNodeTypeUnset = (nodeTypeValue) =>\n  nodeTypeValue === NODE_TYPE_DISABLED_UNSET;\n\nconst isNodeTypeDisabled = (nodeTypeValue) => nodeTypeValue === true;\n\nfunction nodeTypeReducer(nodeTypeState = {}, action) {\n  switch (action.type) {\n    case TOGGLE_TYPE_DISABLED: {\n      const nextDisabledState = {\n        ...nodeTypeState.disabled,\n        ...action.typeIDs,\n      };\n\n      const nextTypesDisabled = Object.values(nextDisabledState);\n\n      // If no types will be enabled\n      if (nextTypesDisabled.every(isNodeTypeDisabled)) {\n        // Then reset all types to unset (defaulting to enabled)\n        return {\n          ...nodeTypeState,\n          disabled: { ...allNodeTypesUnset },\n        };\n      }\n\n      // At least one type is enabled, set any unset types to disabled\n      for (const type in nextDisabledState) {\n        if (isNodeTypeUnset(nextDisabledState[type])) {\n          nextDisabledState[type] = true;\n        }\n      }\n\n      return {\n        ...nodeTypeState,\n        disabled: nextDisabledState,\n      };\n    }\n    default:\n      return nodeTypeState;\n  }\n}\n\nexport default nodeTypeReducer;\n","import { UPDATE_ACTIVE_PIPELINE } from '../actions/pipelines';\n\nfunction pipelineReducer(pipelineState = {}, action) {\n  switch (action.type) {\n    case UPDATE_ACTIVE_PIPELINE: {\n      return Object.assign({}, pipelineState, {\n        active: action.pipeline,\n      });\n    }\n\n    default:\n      return pipelineState;\n  }\n}\n\nexport default pipelineReducer;\n","export const TOGGLE_TAG_ACTIVE = 'TOGGLE_TAG_ACTIVE';\n\n/**\n * Toggle a tag's highlighting on/off (or array of tags)\n * @param {string|Array} tagIDs Tag id(s)\n * @param {Boolean} active True if tag(s) active\n */\nexport function toggleTagActive(tagIDs, active) {\n  return {\n    type: TOGGLE_TAG_ACTIVE,\n    tagIDs: Array.isArray(tagIDs) ? tagIDs : [tagIDs],\n    active,\n  };\n}\n\nexport const TOGGLE_TAG_FILTER = 'TOGGLE_TAG_FILTER';\n\n/**\n * Toggle a tag's filtering on/off (or array of tags)\n * @param {string|Array} tagIDs Tag id(s)\n * @param {Boolean} enabled True if tag(s) enabled\n */\nexport function toggleTagFilter(tagIDs, enabled) {\n  return {\n    type: TOGGLE_TAG_FILTER,\n    tagIDs: Array.isArray(tagIDs) ? tagIDs : [tagIDs],\n    enabled,\n  };\n}\n","import { TOGGLE_TAG_ACTIVE, TOGGLE_TAG_FILTER } from '../actions/tags';\n\nfunction tagReducer(tagState = {}, action) {\n  const updateState = (newState) => Object.assign({}, tagState, newState);\n\n  /**\n   * Batch update tags from an array of tag IDs\n   * @param {string} key Tag action value prop\n   */\n  const batchChanges = (key) =>\n    action.tagIDs.reduce((result, tagID) => {\n      result[tagID] = action[key];\n      return result;\n    }, {});\n\n  switch (action.type) {\n    case TOGGLE_TAG_ACTIVE: {\n      return updateState({\n        active: Object.assign({}, tagState.active, batchChanges('active')),\n      });\n    }\n\n    case TOGGLE_TAG_FILTER: {\n      return updateState({\n        enabled: Object.assign({}, tagState.enabled, batchChanges('enabled')),\n      });\n    }\n\n    default:\n      return tagState;\n  }\n}\n\nexport default tagReducer;\n","export const TOGGLE_MODULAR_PIPELINE_ACTIVE = 'TOGGLE_MODULAR_PIPELINE_ACTIVE';\n\n/**\n * Toggle a modular pipeline item's highlighting on/off (or array of modular pipelines)\n * @param {string|Array} modularPipelineIDs Modular pipeline id(s)\n * @param {Boolean} active True if modualr pipeline(s) active\n */\nexport function toggleModularPipelineActive(modularPipelineIDs, active) {\n  return {\n    type: TOGGLE_MODULAR_PIPELINE_ACTIVE,\n    modularPipelineIDs: Array.isArray(modularPipelineIDs)\n      ? modularPipelineIDs\n      : [modularPipelineIDs],\n    active,\n  };\n}\n\nexport const TOGGLE_MODULAR_PIPELINE_EXPANDED =\n  'TOGGLE_MODULAR_PIPELINE_EXPANDED';\n\n/**\n * Toggle a set of modular pipelines to be expanded.\n * @param {Array[Number]} expandedIDs\n */\nexport function toggleModularPipelineExpanded(expandedIDs) {\n  return {\n    type: TOGGLE_MODULAR_PIPELINE_EXPANDED,\n    expandedIDs,\n  };\n}\n","import {\n  TOGGLE_MODULAR_PIPELINE_ACTIVE,\n  TOGGLE_MODULAR_PIPELINE_EXPANDED,\n} from '../actions/modular-pipelines';\n\nfunction modularPipelineReducer(modularPipelineState = {}, action) {\n  const updateState = (newState) =>\n    Object.assign({}, modularPipelineState, newState);\n\n  /**\n   * Batch update tags from an array of tag IDs\n   * @param {string} key Tag action value prop\n   */\n  const batchChanges = (key) =>\n    action.modularPipelineIDs.reduce((result, modularPipelineID) => {\n      result[modularPipelineID] = action[key];\n      return result;\n    }, {});\n\n  switch (action.type) {\n    case TOGGLE_MODULAR_PIPELINE_ACTIVE: {\n      return updateState({\n        active: Object.assign(\n          {},\n          modularPipelineState.active,\n          batchChanges('active')\n        ),\n      });\n    }\n\n    // The expanded IDs for tree nodes directly emitted from modular pipelines\n    // are not directly usable for our purpose. For example, for a tree a -> b -> c,\n    // when a is collapsed, [b,c] are passed to the action payload as expanded.\n    // What we care about, however, is not what is currently \"expanded\", but actually\n    // what is currently \"visible\" on the tree.\n    // Therefore there are 2 states here: expanded and visible.\n    // We use expanded state and the action's payload to work out what's visible:\n    // - When a modular pipeline is collapsed, we have to mark all of its children\n    // as invisible recursively.\n    // - When a modular pipeline is expanded, we have to mark all of its children\n    // as visible, but not recursively.\n    case TOGGLE_MODULAR_PIPELINE_EXPANDED: {\n      const newVisibleState = { ...modularPipelineState.visible };\n      const isExpanding =\n        action.expandedIDs.length > modularPipelineState.expanded.length;\n      let expandedIDs = action.expandedIDs;\n\n      if (isExpanding) {\n        const expandedModularPipelines = expandedIDs.filter(\n          (expandedID) => !modularPipelineState.expanded.includes(expandedID)\n        );\n        expandedModularPipelines.forEach((expandedModularPipeline) => {\n          newVisibleState[expandedModularPipeline] = false;\n          modularPipelineState.tree[expandedModularPipeline].children.forEach(\n            (child) => (newVisibleState[child.id] = true)\n          );\n        });\n      } else {\n        const collapsedModularPipelines = modularPipelineState.expanded.filter(\n          (expandedID) => !expandedIDs.includes(expandedID)\n        );\n\n        // recursively set all children of a node in the tree as invisible\n        const setChildrenInvisible = (node) => {\n          modularPipelineState.tree[node].children.forEach((child) => {\n            newVisibleState[child.id] = false;\n            if (child.type === 'modularPipeline') {\n              setChildrenInvisible(child.id);\n            }\n          });\n        };\n\n        collapsedModularPipelines.forEach((collapsedModularPipeline) => {\n          newVisibleState[collapsedModularPipeline] = true;\n          setChildrenInvisible(collapsedModularPipeline);\n          expandedIDs = expandedIDs.filter(\n            (id) => !id.startsWith(collapsedModularPipeline)\n          );\n        });\n      }\n\n      return updateState({\n        expanded: expandedIDs,\n        visible: newVisibleState,\n      });\n    }\n\n    default:\n      return modularPipelineState;\n  }\n}\n\nexport default modularPipelineReducer;\n","import {\n  TOGGLE_GRAPH,\n  TOGGLE_EXPORT_MODAL,\n  TOGGLE_SETTINGS_MODAL,\n  TOGGLE_PLOT_MODAL,\n  TOGGLE_SIDEBAR,\n  TOGGLE_CODE,\n  TOGGLE_MINIMAP,\n  TOGGLE_MODULAR_PIPELINE_FOCUS_MODE,\n} from '../actions';\n\nfunction visibleReducer(visibleState = {}, action) {\n  switch (action.type) {\n    case TOGGLE_GRAPH: {\n      return Object.assign({}, visibleState, {\n        graph: action.visible,\n      });\n    }\n\n    case TOGGLE_PLOT_MODAL: {\n      return Object.assign({}, visibleState, {\n        plotModal: action.visible,\n      });\n    }\n\n    case TOGGLE_EXPORT_MODAL: {\n      return Object.assign({}, visibleState, {\n        exportModal: action.visible,\n      });\n    }\n\n    case TOGGLE_SETTINGS_MODAL: {\n      return Object.assign({}, visibleState, {\n        settingsModal: action.visible,\n      });\n    }\n\n    case TOGGLE_SIDEBAR: {\n      return Object.assign({}, visibleState, {\n        sidebar: action.visible,\n      });\n    }\n\n    case TOGGLE_MINIMAP: {\n      return Object.assign({}, visibleState, {\n        miniMap: action.visible,\n      });\n    }\n\n    case TOGGLE_CODE: {\n      return Object.assign({}, visibleState, {\n        code: action.visible,\n      });\n    }\n\n    case TOGGLE_MODULAR_PIPELINE_FOCUS_MODE: {\n      return Object.assign({}, visibleState, {\n        modularPipelineFocusMode: action.modularPipeline,\n      });\n    }\n\n    default:\n      return visibleState;\n  }\n}\n\nexport default visibleReducer;\n","import { combineReducers } from 'redux';\nimport flags from './flags';\nimport graph from './graph';\nimport layer from './layers';\nimport loading from './loading';\nimport node from './nodes';\nimport nodeType from './node-type';\nimport pipeline from './pipeline';\nimport tag from './tags';\nimport modularPipeline from './modular-pipelines';\nimport visible from './visible';\nimport {\n  RESET_DATA,\n  TOGGLE_TEXT_LABELS,\n  TOGGLE_THEME,\n  UPDATE_CHART_SIZE,\n  UPDATE_ZOOM,\n  TOGGLE_IGNORE_LARGE_WARNING,\n  TOGGLE_PRETTY_NAME,\n} from '../actions';\nimport { TOGGLE_PARAMETERS_HOVERED } from '../actions';\n\n/**\n * Create a generic reducer\n * @param {*} initialState Default state\n * @param {string} type Action type\n * @param {string} key Action payload key\n * @return {*} Updated state\n */\nconst createReducer =\n  (initialState, type, key) =>\n  (state = initialState, action) => {\n    if (typeof key !== 'undefined' && action.type === type) {\n      return action[key];\n    }\n    return state;\n  };\n\n/**\n * Reset/update application-wide data\n * @param {Object} state Complete app state\n * @param {Object} action Redux action\n * @return {Object} Updated(?) state\n */\nfunction resetDataReducer(state = {}, action) {\n  if (action.type === RESET_DATA) {\n    return Object.assign({}, state, action.data);\n  }\n  return state;\n}\n\nconst combinedReducer = combineReducers({\n  // These props have their own reducers in other files\n  flags,\n  graph,\n  layer,\n  loading,\n  node,\n  nodeType,\n  pipeline,\n  tag,\n  modularPipeline,\n  visible,\n  // These props don't have any actions associated with them\n  display: createReducer(null),\n  dataSource: createReducer(null),\n  edge: createReducer({}),\n  // These props have very simple non-nested actions\n  chartSize: createReducer({}, UPDATE_CHART_SIZE, 'chartSize'),\n  zoom: createReducer({}, UPDATE_ZOOM, 'zoom'),\n  textLabels: createReducer(true, TOGGLE_TEXT_LABELS, 'textLabels'),\n  theme: createReducer('dark', TOGGLE_THEME, 'theme'),\n  prettyName: createReducer(true, TOGGLE_PRETTY_NAME, 'prettyName'),\n  hoveredParameters: createReducer(\n    false,\n    TOGGLE_PARAMETERS_HOVERED,\n    'hoveredParameters'\n  ),\n  ignoreLargeWarning: createReducer(\n    false,\n    TOGGLE_IGNORE_LARGE_WARNING,\n    'ignoreLargeWarning'\n  ),\n});\n\nconst rootReducer = (state, action) =>\n  combinedReducer(resetDataReducer(state, action), action);\n\nexport default rootReducer;\n","import { createSelector } from 'reselect';\nimport { arrayToObject } from '../utils';\n\nconst getNodeIDs = (state) => state.node.ids;\nconst getNodePipelines = (state) => state.node.pipelines;\nconst getActivePipeline = (state) => state.pipeline.active;\nconst getNodeTags = (state) => state.node.tags;\nconst getNodeModularPipelines = (state) => state.node.modularPipelines;\nconst getDataSource = (state) => state.dataSource;\nconst getModularPipelineIDs = (state) => state.modularPipeline.ids;\n\n/**\n * Calculate whether nodes should be disabled based on their registered pipelines\n */\nexport const getNodeDisabledPipeline = createSelector(\n  [getNodeIDs, getNodePipelines, getActivePipeline, getDataSource],\n  (nodeIDs, nodePipelines, activePipeline, dataSource) => {\n    if (dataSource === 'json' || !activePipeline) {\n      return {};\n    }\n    return arrayToObject(\n      nodeIDs,\n      (nodeID) => !nodePipelines[nodeID][activePipeline]\n    );\n  }\n);\n\n/**\n * Get a list of just the IDs for the active pipeline\n */\nexport const getPipelineNodeIDs = createSelector(\n  [getNodeIDs, getNodeDisabledPipeline],\n  (nodeIDs, nodeDisabledPipeline) =>\n    nodeIDs.filter((nodeID) => !nodeDisabledPipeline[nodeID])\n);\n\n/**\n * Get IDs of tags used in the current pipeline\n */\nexport const getPipelineTagIDs = createSelector(\n  [getPipelineNodeIDs, getNodeTags],\n  (nodeIDs, nodeTags) => {\n    const visibleTags = {};\n    nodeIDs.forEach((nodeID) => {\n      nodeTags[nodeID].forEach((tagID) => {\n        if (!visibleTags[tagID]) {\n          visibleTags[tagID] = true;\n        }\n      });\n    });\n    return Object.keys(visibleTags);\n  }\n);\n\n/**\n * Get IDs of modular pipelines used in the current pipeline\n */\nexport const getPipelineModularPipelineIDs = createSelector(\n  [getPipelineNodeIDs, getNodeModularPipelines, getModularPipelineIDs],\n  (nodeIDs, nodeModularPipelines, modularPipelineIDs) => {\n    const visibleModularPipelines = {};\n    // check if pipeline contains defined modular pipelines\n    if (modularPipelineIDs.length > 0) {\n      nodeIDs.forEach((nodeID) => {\n        nodeModularPipelines[nodeID].forEach((modularPipelineID) => {\n          if (\n            modularPipelineID &&\n            !visibleModularPipelines[modularPipelineID]\n          ) {\n            visibleModularPipelines[modularPipelineID] = true;\n          }\n        });\n      });\n    }\n    return Object.keys(visibleModularPipelines);\n  }\n);\n","/**\n * Create a regular expression to match certain keywords\n * @param  {string} value - The search keyword to highlight\n * @return {object|boolean} Regular expression or false\n */\nexport const getValueRegex = (value) => {\n  if (!value) {\n    return false;\n  }\n  return new RegExp(`(${escapeRegExp(value)})`, 'gi');\n};\n\n/**\n * Wrap a string with a <b> tag\n * @param  {string} str - The text to wrap\n * @return {string} The emboldened text\n */\nconst getWrappedMatch = (str) => `<b>${str}</b>`;\n\n/**\n * Highlight relevant keywords within a block of text\n * @param  {string} text - The text to parse\n * @param  {string} value - The search keyword to highlight\n * @return {string} The original text but with <b> tags wrapped around matches\n */\nexport const getHighlightedText = (text, value) => {\n  const valueRegex = getValueRegex(value);\n  const matches = text.match(valueRegex);\n\n  return value && matches\n    ? text.replace(valueRegex, getWrappedMatch('$1'))\n    : text;\n};\n\n/**\n * Escape string for use in a regular expression, and to prevent XSS attacks\n * All of these should be escaped: \\ ^ $ * + ? . ( ) | { } [ ] < >\n * @param {string} str Search keyword string\n */\nexport const escapeRegExp = (str) => {\n  return str.replace(/[.*+?^${}<>()|[\\]\\\\]/g, '\\\\$&');\n};\n\n/**\n * Check whether a piece of text matches the search value\n * @param {object} text\n * @param {string} searchValue\n * @return {boolean} True if node matches or no search value given\n */\nexport const textMatchesSearch = (text, searchValue) => {\n  if (searchValue) {\n    return new RegExp(escapeRegExp(searchValue), 'gi').test(text);\n  }\n\n  return true;\n};\n","import { escapeRegExp, getHighlightedText } from '../utils/search-utils';\nexport const getModularPipelineIDs = (state) => state.modularPipeline.ids;\nexport const getFocusedModularPipeline = (state) =>\n  state.visible.modularPipelineFocusMode;\nexport const getModularPipelinesTree = (state) => state.modularPipeline.tree;\n\n/**\n * Search a given string in a string target.\n * Return whether there is a match.\n * @param {String} searchValue the string to search for.\n * @param {String} target the target to search in.\n * @return {Boolean} whether there is a match.\n */\nexport const searchString = (searchValue, target) => {\n  if (!searchValue || !target) {\n    return false;\n  }\n  return new RegExp(escapeRegExp(target), 'gi').test(searchValue);\n};\n\n/**\n * Return whether a tree node in a modular pipeline tree is a leaf.\n */\nconst isTreeLeaf = (treeNode) => treeNode.type !== 'modularPipeline';\n\n/**\n * Search a given string in a (modular pipelines) tree.\n */\nexport const searchTree = (\n  searchValue,\n  tree,\n  currentNodeID = '__root__',\n  result = {}\n) => {\n  const treeNode = tree[currentNodeID];\n  if (!treeNode) {\n    return false;\n  }\n\n  const foundChildren = [];\n\n  for (const childNode of treeNode.children) {\n    if (isTreeLeaf(childNode)) {\n      // if the child node is a leaf, simply search the leaf's name\n      // and add to the search result if there is a match.\n      const found = searchString(childNode.data.name, searchValue);\n      if (found) {\n        foundChildren.push({\n          ...childNode,\n          data: {\n            ...childNode.data,\n            highlightedLabel: getHighlightedText(\n              childNode.data.name,\n              searchValue\n            ),\n          },\n        });\n      }\n    } else {\n      // if the child node is a tree, recursively search it\n      // and add the child node to the list of found children\n      // if there is a matching value in its tree.\n      const found = searchTree(searchValue, tree, childNode.id, result);\n      if (found) {\n        foundChildren.push({\n          ...childNode,\n          highlightedLabel: getHighlightedText(\n            result[childNode.id]?.name || '',\n            searchValue\n          ),\n        });\n      }\n    }\n  }\n\n  if (foundChildren.length > 0 || searchString(treeNode.name, searchValue)) {\n    result[currentNodeID] = {\n      ...treeNode,\n      highlightedLabel: getHighlightedText(treeNode.name, searchValue),\n      children: foundChildren,\n    };\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * Search a given value in a modularPipelinesTree\n * and return a tree structure containing the searchResult.\n * @param {Object} modularPipelinesTree the modular pipelines tree to search in.\n * @param {String} searchValue the value to search for in the given modular pipelines tree.\n * @return {Object} a tree structure containing the searchResult.\n */\nexport const getModularPipelinesSearchResult = (\n  modularPipelinesTree,\n  searchValue\n) => {\n  if (!modularPipelinesTree) {\n    return {};\n  }\n  const searchResult = {};\n  searchTree(searchValue, modularPipelinesTree, '__root__', searchResult);\n  return searchResult;\n};\n","import { createSelector } from 'reselect';\nimport { getPipelineTagIDs } from './pipeline';\n\nconst getNodeTags = (state) => state.node.tags;\nconst getTagName = (state) => state.tag.name;\nconst getTagActive = (state) => state.tag.active;\nconst getTagEnabled = (state) => state.tag.enabled;\n\n/**\n * Retrieve the formatted list of tag filters\n */\nexport const getTagData = createSelector(\n  [getPipelineTagIDs, getTagName, getTagActive, getTagEnabled],\n  (tagIDs, tagName, tagActive, tagEnabled) =>\n    tagIDs.sort().map((id) => ({\n      id,\n      name: tagName[id],\n      active: Boolean(tagActive[id]),\n      enabled: Boolean(tagEnabled[id]),\n    }))\n);\n\n/**\n * Get the total and enabled number of tags\n */\nexport const getTagCount = createSelector(\n  [getPipelineTagIDs, getTagEnabled],\n  (tagIDs, tagEnabled) => ({\n    total: tagIDs.length,\n    enabled: tagIDs.filter((id) => tagEnabled[id]).length,\n  })\n);\n\n/**\n * Get the total number of nodes for each tag\n */\nexport const getTagNodeCounts = createSelector([getNodeTags], (nodeTags) => {\n  const counts = {};\n\n  for (const tagIds of Object.values(nodeTags)) {\n    for (const tagId of tagIds) {\n      counts[tagId] = counts[tagId] + 1 || 1;\n    }\n  }\n\n  return counts;\n});\n","import { createSelector } from 'reselect';\nimport { arrayToObject } from '../utils';\nimport { getNodeDisabledPipeline, getPipelineNodeIDs } from './pipeline';\nimport {\n  getFocusedModularPipeline,\n  getModularPipelinesTree,\n} from './modular-pipelines';\nimport { getTagCount } from './tags';\n\nconst getNodeIDs = (state) => state.node.ids;\nconst getNodeDisabledNode = (state) => state.node.disabled;\nconst getNodeTags = (state) => state.node.tags;\nconst getNodeType = (state) => state.node.type;\nconst getTagEnabled = (state) => state.tag.enabled;\nconst getNodeTypeDisabled = (state) => state.nodeType.disabled;\nconst getEdgeIDs = (state) => state.edge.ids;\nconst getEdgeSources = (state) => state.edge.sources;\nconst getEdgeTargets = (state) => state.edge.targets;\nconst getLayerIDs = (state) => state.layer.ids;\nconst getLayersVisible = (state) => state.layer.visible;\nconst getNodeLayer = (state) => state.node.layer;\nconst getNodeModularPipelines = (state) => state.node.modularPipelines;\nconst getVisibleSidebarNodes = (state) => state.modularPipeline.visible;\n\n/**\n * Return all inputs and outputs of currently visible modular pipelines\n * so that even if they are not expanded, their inputs and outputs are still rendered.\n */\nconst getVisibleModularPipelineInputsOutputs = createSelector(\n  [getVisibleSidebarNodes, getModularPipelinesTree],\n  (visibleSidebarNodes, modularPipelineData) => {\n    const result = new Set();\n    for (const nodeID in visibleSidebarNodes) {\n      if (visibleSidebarNodes[nodeID] && nodeID in modularPipelineData) {\n        [\n          ...modularPipelineData[nodeID].inputs,\n          ...modularPipelineData[nodeID].outputs,\n        ].forEach((nodeID) => result.add(nodeID));\n      }\n    }\n    return result;\n  }\n);\n\n/**\n * Calculate whether nodes should be disabled based on their tags\n */\nexport const getNodeDisabledTag = createSelector(\n  [getNodeIDs, getTagEnabled, getTagCount, getNodeTags],\n  (nodeIDs, tagEnabled, tagCount, nodeTags) =>\n    arrayToObject(nodeIDs, (nodeID) => {\n      if (tagCount.enabled === 0) {\n        return false;\n      }\n      if (nodeTags[nodeID].length) {\n        // Hide task nodes that don't have at least one tag filter enabled\n        return !nodeTags[nodeID].some((tag) => tagEnabled[tag]);\n      }\n      return true;\n    })\n);\n\n/**\n * Set disabled status if the node is specifically hidden, and/or via a tag/view/type/modularPipeline\n */\nexport const getNodeDisabled = createSelector(\n  [\n    getNodeIDs,\n    getNodeDisabledNode,\n    getNodeDisabledTag,\n    getNodeDisabledPipeline,\n    getNodeType,\n    getNodeTypeDisabled,\n    getNodeModularPipelines,\n    getModularPipelinesTree,\n    getFocusedModularPipeline,\n    getVisibleSidebarNodes,\n    getVisibleModularPipelineInputsOutputs,\n  ],\n  (\n    nodeIDs,\n    nodeDisabledNode,\n    nodeDisabledTag,\n    nodeDisabledPipeline,\n    nodeType,\n    typeDisabled,\n    nodeModularPipelines,\n    modularPipelinesTree,\n    focusedModularPipeline,\n    visibleSidebarNodes,\n    visibleModularPipelineInputsOutputs\n  ) =>\n    arrayToObject(nodeIDs, (id) => {\n      const isDisabledViaSidebar =\n        !visibleSidebarNodes[id] &&\n        !visibleModularPipelineInputsOutputs.has(id);\n\n      let isDisabledViaFocusedModularPipeline = false;\n      if (focusedModularPipeline) {\n        const inputOutputNodeIDs = [\n          ...modularPipelinesTree[focusedModularPipeline.id].inputs,\n          ...modularPipelinesTree[focusedModularPipeline.id].outputs,\n        ];\n        if (nodeType[id] === 'modularPipeline') {\n          isDisabledViaFocusedModularPipeline =\n            id !== focusedModularPipeline.id &&\n            !id.startsWith(`${focusedModularPipeline.id}.`);\n        } else {\n          isDisabledViaFocusedModularPipeline =\n            !nodeModularPipelines[id].includes(focusedModularPipeline.id) &&\n            !inputOutputNodeIDs.includes(id);\n        }\n      }\n      return [\n        nodeDisabledNode[id],\n        nodeDisabledTag[id],\n        nodeDisabledPipeline[id],\n        typeDisabled[nodeType[id]],\n        isDisabledViaSidebar,\n        isDisabledViaFocusedModularPipeline,\n      ].some(Boolean);\n    })\n);\n\n/**\n * Get a list of just the IDs for the remaining visible nodes\n */\nexport const getVisibleNodeIDs = createSelector(\n  [getPipelineNodeIDs, getNodeDisabled],\n  (nodeIDs, nodeDisabled) => {\n    return nodeIDs.filter((id) => !nodeDisabled[id]);\n  }\n);\n\n/**\n * Get a list of just the IDs for the remaining visible layers\n */\nexport const getVisibleLayerIDs = createSelector(\n  [getVisibleNodeIDs, getNodeLayer, getLayerIDs, getLayersVisible],\n  (nodeIDs, nodeLayer, layerIDs, layersVisible) => {\n    if (!layersVisible) {\n      return [];\n    }\n    const visibleLayerIDs = {};\n    for (const nodeID of nodeIDs) {\n      visibleLayerIDs[nodeLayer[nodeID]] = true;\n    }\n    return layerIDs.filter((layerID) => visibleLayerIDs[layerID]);\n  }\n);\n\n/**\n * Determine whether an edge should be disabled based on their source/target nodes\n */\nexport const getEdgeDisabled = createSelector(\n  [getEdgeIDs, getNodeDisabled, getEdgeSources, getEdgeTargets],\n  (edgeIDs, nodeDisabled, edgeSources, edgeTargets) =>\n    arrayToObject(edgeIDs, (edgeID) => {\n      const source = edgeSources[edgeID];\n      const target = edgeTargets[edgeID];\n      return Boolean(nodeDisabled[source] || nodeDisabled[target]);\n    })\n);\n","import { shortTypeMapping } from '../config';\n\nconst getShortType = (longTypeName, fallback) =>\n  shortTypeMapping[longTypeName] || fallback;\n\nexport default getShortType;\n","import { createSelector } from 'reselect';\nimport { getNodeDisabled, getEdgeDisabled } from './disabled';\nimport { getFocusedModularPipeline } from './modular-pipelines';\n\nconst getNodeIDs = (state) => state.node.ids;\nconst getEdgeIDs = (state) => state.edge.ids;\nconst getEdgeSources = (state) => state.edge.sources;\nconst getEdgeTargets = (state) => state.edge.targets;\nconst getNodeModularPipelines = (state) => state.node.modularPipelines;\nconst getVisibleSidebarNodes = (state) => state.modularPipeline.visible;\n\n/**\n * Create a new transitive edge from the first and last edge in the path\n * @param {string} target Node ID for the new edge\n * @param {string} source Node ID for the new edge\n * @param {object} transitiveEdges Store of existing edges\n */\nexport const addNewEdge = (source, target, { edgeIDs, sources, targets }) => {\n  const id = [source, target].join('|');\n  if (!edgeIDs.includes(id)) {\n    edgeIDs.push(id);\n    sources[id] = source;\n    targets[id] = target;\n  }\n};\n\n/**\n * Create new edges to connect nodes which have a disabled node (or nodes)\n * in between them\n */\nexport const getTransitiveEdges = createSelector(\n  [\n    getNodeIDs,\n    getEdgeIDs,\n    getNodeDisabled,\n    getEdgeSources,\n    getEdgeTargets,\n    getFocusedModularPipeline,\n    getNodeModularPipelines,\n    getVisibleSidebarNodes,\n  ],\n  (\n    nodeIDs,\n    edgeIDs,\n    nodeDisabled,\n    edgeSources,\n    edgeTargets,\n    focusedModularPipeline,\n    nodeModularPipelines,\n    visibleModularPipelines\n  ) => {\n    const transitiveEdges = {\n      edgeIDs: [],\n      sources: {},\n      targets: {},\n    };\n\n    /**\n     * Recursively walk through the graph, stepping over disabled nodes,\n     * generating a list of nodes visited so far, and create transitive edges\n     * for each path that visits disabled nodes between enabled nodes.\n     * @param {Array} path The route that has been explored so far\n     */\n    const walkGraphEdges = (path) => {\n      edgeIDs.forEach((edgeID) => {\n        const source = path[path.length - 1];\n        // Filter to only edges where the source node is the previous target\n        if (edgeSources[edgeID] !== source) {\n          return;\n        }\n        const target = edgeTargets[edgeID];\n\n        if (!visibleModularPipelines[target]) {\n          return;\n        }\n\n        // Further filter out connections between indicative input / output nodes under focus mode\n        const isNotInputEdge =\n          focusedModularPipeline !== null &&\n          !nodeModularPipelines[source].includes(focusedModularPipeline.id) &&\n          !nodeModularPipelines[target].includes(focusedModularPipeline.id);\n\n        if (nodeDisabled[target]) {\n          // If target node is disabled then keep walking the graph\n          walkGraphEdges(path.concat(target));\n        } else if (path.length > 1 && !isNotInputEdge) {\n          // Else only create a new edge if there would be 3 or more nodes in the path\n          addNewEdge(path[0], target, transitiveEdges);\n        }\n      });\n    };\n\n    // Only run walk if some nodes are disabled\n    if (nodeIDs.some((nodeID) => nodeDisabled[nodeID])) {\n      // Examine the children of every enabled node. The walk only needs\n      // to be run in a single direction (i.e. top down), because links\n      // that end in a terminus can never be transitive.\n      nodeIDs.forEach((nodeID) => {\n        if (!nodeDisabled[nodeID]) {\n          walkGraphEdges([nodeID]);\n        }\n      });\n    }\n\n    return transitiveEdges;\n  }\n);\n\n/**\n * Get only the visible edges (plus transitive edges),\n * and return them formatted as an array of objects\n */\nexport const getVisibleEdges = createSelector(\n  [\n    getEdgeIDs,\n    getEdgeDisabled,\n    getEdgeSources,\n    getEdgeTargets,\n    getTransitiveEdges,\n  ],\n  (edgeIDs, edgeDisabled, edgeSources, edgeTargets, transitiveEdges) =>\n    edgeIDs\n      .filter((id) => !edgeDisabled[id])\n      .concat(transitiveEdges.edgeIDs)\n      .map((id) => ({\n        id,\n        source: edgeSources[id] || transitiveEdges.sources[id],\n        target: edgeTargets[id] || transitiveEdges.targets[id],\n      }))\n);\n\n/**\n * Obtain all the edges that belongs to input and output data\n * nodes when under focus mode.\n */\nexport const getInputOutputDataEdges = createSelector(\n  [getVisibleEdges, getNodeModularPipelines, getFocusedModularPipeline],\n  (visibleEdges, nodeModularPipelines, focusedModularPipeline) => {\n    const edgesList = {};\n    if (focusedModularPipeline !== null) {\n      visibleEdges.forEach((edge) => {\n        if (\n          !nodeModularPipelines[edge.source]?.includes(\n            focusedModularPipeline.id\n          ) ||\n          !nodeModularPipelines[edge.target]?.includes(\n            focusedModularPipeline.id\n          )\n        ) {\n          edgesList[edge.id] = edge;\n        }\n      });\n    }\n\n    return edgesList;\n  }\n);\n","import { createSelector } from 'reselect';\nimport batchingToposort from 'batching-toposort';\nimport { getVisibleNodeIDs, getVisibleLayerIDs } from './disabled';\nimport { getVisibleEdges } from './edges';\n\nconst getNodeLayer = (state) => state.node.layer;\n\n/**\n * Get list of visible nodes for each visible layer\n */\nexport const getLayerNodes = createSelector(\n  [getVisibleNodeIDs, getVisibleLayerIDs, getNodeLayer],\n  (nodeIDs, layerIDs, nodeLayer) => {\n    if (!layerIDs.length) {\n      return [];\n    }\n    // Create object containing a list of every node for each layer\n    const layerNodes = {};\n    for (const nodeID of nodeIDs) {\n      const layer = nodeLayer[nodeID];\n      if (!layerNodes[layer]) {\n        layerNodes[layer] = [];\n      }\n      layerNodes[layer].push(nodeID);\n    }\n\n    // Convert to a nested array of layers of nodes\n    return layerIDs.map((layerID) => layerNodes[layerID]);\n  }\n);\n\n/**\n * Calculate ranks (vertical placement) for each node,\n * by toposorting while taking layers into account\n */\nexport const getNodeRank = createSelector(\n  [getVisibleNodeIDs, getVisibleEdges, getLayerNodes, getVisibleLayerIDs],\n  (nodeIDs, edges, layerNodes, layerIDs) => {\n    if (!layerIDs.length) {\n      return {};\n    }\n\n    // For each node, create a list of nodes that depend on that node\n    const nodeDeps = {};\n\n    // Initialise empty dependency arrays for each node\n    for (const nodeID of nodeIDs) {\n      nodeDeps[nodeID] = [];\n    }\n\n    // Add dependencies for visible edges\n    for (const edge of edges) {\n      nodeDeps[edge.source].push(edge.target);\n    }\n\n    // Add \"false edge\" dependencies for layered nodes to prevent layer overlaps\n    for (let i = 1; i < layerNodes.length; i++) {\n      for (const sourceID of layerNodes[i - 1]) {\n        for (const targetID of layerNodes[i]) {\n          nodeDeps[sourceID].push(targetID);\n        }\n      }\n    }\n\n    // Run toposort algorithm to rank nodes by dependency\n    const toposortedNodes = batchingToposort(nodeDeps);\n\n    // Convert toposort order into rank numbering\n    const nodeRanks = {};\n    for (let rank = 0; rank < toposortedNodes.length; rank++) {\n      for (const nodeID of toposortedNodes[rank]) {\n        nodeRanks[nodeID] = rank;\n      }\n    }\n\n    return nodeRanks;\n  }\n);\n","import { createSelector } from 'reselect';\nimport { select } from 'd3-selection';\nimport { arrayToObject } from '../utils';\nimport { getPipelineNodeIDs } from './pipeline';\nimport {\n  getNodeDisabled,\n  getNodeDisabledTag,\n  getVisibleNodeIDs,\n} from './disabled';\nimport getShortType from '../utils/short-type';\nimport { getNodeRank } from './ranks';\n\nconst getNodeName = (state) => state.node.name;\nconst getNodeFullName = (state) => state.node.fullName;\nconst getNodeDisabledNode = (state) => state.node.disabled;\nconst getNodeTags = (state) => state.node.tags;\nexport const getNodeModularPipelines = (state) => state.node.modularPipelines;\nconst getNodeType = (state) => state.node.type;\nconst getNodeDatasetType = (state) => state.node.datasetType;\nconst getNodeLayer = (state) => state.node.layer;\nconst getHoveredNode = (state) => state.node.hovered;\nconst getPrettyName = (state) => state.prettyName;\nconst getTagActive = (state) => state.tag.active;\nconst getModularPipelineActive = (state) => state.modularPipeline.active;\nconst getTextLabels = (state) => state.textLabels;\nconst getNodeTypeDisabled = (state) => state.nodeType.disabled;\nconst getClickedNode = (state) => state.node.clicked;\nconst getEdgeIDs = (state) => state.edge.ids;\nconst getEdgeSources = (state) => state.edge.sources;\nconst getEdgeTargets = (state) => state.edge.targets;\n\n/**\n * Gets a map of nodeIds to graph nodes\n */\nexport const getGraphNodes = createSelector(\n  [(state) => state.graph.nodes],\n  (nodes = []) =>\n    nodes.reduce((result, node) => {\n      result[node.id] = node;\n      return result;\n    }, {})\n);\n\n/**\n * Set active status if the node is specifically highlighted, and/or via an associated tag or modular pipeline\n */\nexport const getNodeActive = createSelector(\n  [\n    getPipelineNodeIDs,\n    getHoveredNode,\n    getNodeTags,\n    getTagActive,\n    getNodeModularPipelines,\n    getModularPipelineActive,\n    (state) => state.modularPipeline.tree,\n  ],\n  (\n    nodeIDs,\n    hoveredNode,\n    nodeTags,\n    tagActive,\n    nodeModularPipelines,\n    modularPipelineActive,\n    modularPipelinesTree\n  ) => {\n    const activeModularPipelines = Object.keys(modularPipelineActive).filter(\n      (modularPipelineID) => modularPipelineActive[modularPipelineID]\n    );\n    const nodesActiveViaModularPipeline = activeModularPipelines.flatMap((id) =>\n      modularPipelinesTree[id].children.map((child) => child.id)\n    );\n\n    return arrayToObject(nodeIDs, (nodeID) => {\n      if (nodeID === hoveredNode) {\n        return true;\n      }\n      const activeViaTag = nodeTags[nodeID].some((tag) => tagActive[tag]);\n      const activeModularPipeline = activeModularPipelines.includes(nodeID);\n      const activeViaModularPipeline =\n        nodesActiveViaModularPipeline.includes(nodeID) ||\n        (nodeModularPipelines[nodeID] &&\n          nodeModularPipelines[nodeID].some(\n            (modularPipeline) => modularPipelineActive[modularPipeline]\n          ));\n      return (\n        Boolean(activeViaTag) ||\n        Boolean(activeViaModularPipeline) ||\n        Boolean(activeModularPipeline)\n      );\n    });\n  }\n);\n\n/**\n * Set selected status if the node is clicked\n */\nexport const getNodeSelected = createSelector(\n  [getPipelineNodeIDs, getClickedNode, getNodeDisabled],\n  (nodeIDs, clickedNode, nodeDisabled) =>\n    arrayToObject(\n      nodeIDs,\n      (nodeID) => nodeID === clickedNode && !nodeDisabled[nodeID]\n    )\n);\n\n/**\n * Returns node label based on if pretty name is turned on/off\n */\nexport const getNodeLabel = createSelector(\n  [getPrettyName, getNodeName, getNodeFullName],\n  (prettyName, nodeName, nodeFullName) => (prettyName ? nodeName : nodeFullName)\n);\n\n/**\n * Returns formatted nodes as an array, with all relevant properties\n */\nexport const getNodeData = createSelector(\n  [\n    getPipelineNodeIDs,\n    getNodeLabel,\n    getNodeType,\n    getNodeDatasetType,\n    getNodeDisabled,\n    getNodeDisabledNode,\n    getNodeDisabledTag,\n    getNodeTypeDisabled,\n    getNodeModularPipelines,\n  ],\n  (\n    nodeIDs,\n    nodeLabel,\n    nodeType,\n    nodeDatasetType,\n    nodeDisabled,\n    nodeDisabledNode,\n    nodeDisabledTag,\n    typeDisabled,\n    nodeModularPipelines\n  ) =>\n    nodeIDs\n      .sort((a, b) => {\n        if (nodeLabel[a] < nodeLabel[b]) {\n          return -1;\n        }\n        if (nodeLabel[a] > nodeLabel[b]) {\n          return 1;\n        }\n        return 0;\n      })\n      .map((id) => ({\n        id,\n        name: nodeLabel[id],\n        type: nodeType[id],\n        icon: getShortType([nodeDatasetType[id]], nodeType[id]),\n        modularPipelines: nodeModularPipelines[id],\n        disabled: nodeDisabled[id],\n        disabledNode: Boolean(nodeDisabledNode[id]),\n        disabledTag: nodeDisabledTag[id],\n        disabledType: Boolean(typeDisabled[nodeType[id]]),\n      }))\n);\n\n/**\n * Returns formatted nodes as an object, with all relevant properties.\n * This is similar to `getNodeData`, but instead of returning an Array,\n * it returns all nodes as an Object.\n */\nexport const getNodeDataObject = createSelector(\n  [\n    getPipelineNodeIDs,\n    getNodeLabel,\n    getNodeType,\n    getNodeDatasetType,\n    getNodeDisabled,\n    getNodeDisabledNode,\n    getNodeDisabledTag,\n    getNodeTypeDisabled,\n    getNodeModularPipelines,\n  ],\n  (\n    nodeIDs,\n    nodeLabel,\n    nodeType,\n    nodeDatasetType,\n    nodeDisabled,\n    nodeDisabledNode,\n    nodeDisabledTag,\n    typeDisabled,\n    nodeModularPipelines\n  ) =>\n    nodeIDs.reduce((obj, id) => {\n      obj[id] = {\n        id,\n        name: nodeLabel[id],\n        type: nodeType[id],\n        icon: getShortType([nodeDatasetType[id]], nodeType[id]),\n        modularPipelines: nodeModularPipelines[id],\n        disabled: nodeDisabled[id],\n        disabledNode: Boolean(nodeDisabledNode[id]),\n        disabledTag: Boolean(nodeDisabledTag[id]),\n        disabledType: Boolean(typeDisabled[nodeType[id]]),\n      };\n      return obj;\n    }, {})\n);\n\n/**\n * Return the modular pipelines tree with full data for each tree node for display.\n */\nexport const getModularPipelinesTree = createSelector(\n  [(state) => state.modularPipeline.tree, getNodeDataObject],\n  (modularPipelinesTree, nodes) => {\n    if (!modularPipelinesTree) {\n      return {};\n    }\n    for (const modularPipelineID in modularPipelinesTree) {\n      modularPipelinesTree[modularPipelineID].data = {\n        ...nodes[modularPipelineID],\n      };\n      for (const child of modularPipelinesTree[modularPipelineID].children) {\n        child.data = { ...nodes[child.id] };\n      }\n    }\n    return modularPipelinesTree;\n  }\n);\n\n/**\n * Returns formatted nodes grouped by type\n */\nexport const getGroupedNodes = createSelector([getNodeData], (nodes) =>\n  nodes.reduce(function (obj, item) {\n    const key = item.type;\n    if (!obj.hasOwnProperty(key)) {\n      obj[key] = [];\n    }\n    obj[key].push(item);\n    return obj;\n  }, {})\n);\n\n/**\n * Temporarily create a new SVG container in the DOM, write a node to it,\n * measure its width with getBBox, then delete the container and store the value\n */\nexport const getNodeTextWidth = createSelector(\n  [getPipelineNodeIDs, getNodeLabel],\n  (nodeIDs, nodeLabel) => {\n    const nodeTextWidth = {};\n    const svg = select(document.body)\n      .append('svg')\n      .attr('class', 'kedro pipeline-node');\n    svg\n      .selectAll('text')\n      .data(nodeIDs)\n      .enter()\n      .append('text')\n      .text((nodeID) => nodeLabel[nodeID])\n      .each(function (nodeID) {\n        const width = this.getBBox ? this.getBBox().width : 0;\n        nodeTextWidth[nodeID] = width;\n      });\n    svg.remove();\n    return nodeTextWidth;\n  }\n);\n\n/**\n * Get the top/bottom and left/right padding for a node\n * @param {Boolean} showLabels Whether labels are visible\n * @param {Boolean} isTask Whether the node is a task type (vs data/params)\n */\nexport const getPadding = (showLabels, nodeType) => {\n  if (showLabels) {\n    switch (nodeType) {\n      case 'modularPipeline':\n        return { x: 30, y: 22 };\n      case 'task':\n        return { x: 16, y: 10 };\n      default:\n        return { x: 20, y: 10 };\n    }\n  }\n  switch (nodeType) {\n    case 'modularPipeline':\n      return { x: 25, y: 25 };\n    case 'task':\n      return { x: 14, y: 14 };\n    default:\n      return { x: 16, y: 16 };\n  }\n};\n\n/**\n * Calculate node width/height and icon/text positioning\n */\nexport const getNodeSize = createSelector(\n  [getPipelineNodeIDs, getNodeTextWidth, getTextLabels, getNodeType],\n  (nodeIDs, nodeTextWidth, textLabels, nodeType) => {\n    return arrayToObject(nodeIDs, (nodeID) => {\n      const iconSize = textLabels ? 24 : 28;\n      const padding = getPadding(textLabels, nodeType[nodeID]);\n      const textWidth = textLabels ? nodeTextWidth[nodeID] : 0;\n      const textGap = textLabels ? 6 : 0;\n      const innerWidth = iconSize + textWidth + textGap;\n      return {\n        showText: textLabels,\n        width: innerWidth + padding.x * 2,\n        height: iconSize + padding.y * 2,\n        textOffset: (innerWidth - textWidth) / 2 - 1,\n        iconOffset: -innerWidth / 2,\n        iconSize,\n      };\n    });\n  }\n);\n\n/**\n * Returns only visible nodes as an array, but without any extra properties\n * that are unnecessary for the chart layout calculation\n */\nexport const getVisibleNodes = createSelector(\n  [\n    getVisibleNodeIDs,\n    getNodeLabel,\n    getNodeType,\n    getNodeDatasetType,\n    getNodeFullName,\n    getNodeSize,\n    getNodeLayer,\n    getNodeRank,\n  ],\n  (\n    nodeIDs,\n    nodeLabel,\n    nodeType,\n    nodeDatasetType,\n    nodeFullName,\n    nodeSize,\n    nodeLayer,\n    nodeRank\n  ) =>\n    nodeIDs.map((id) => ({\n      id,\n      name: nodeLabel[id],\n      fullName: nodeFullName[id],\n      icon: getShortType([nodeDatasetType[id]], nodeType[id]),\n      type: nodeType[id],\n      layer: nodeLayer[id],\n      rank: nodeRank[id],\n      ...nodeSize[id],\n    }))\n);\n\n/**\n * Returns a map of task nodeIDs to graph nodes that have parameter nodes as their source\n */\n\nexport const getNodesWithInputParams = createSelector(\n  [\n    getGraphNodes,\n    getNodeName,\n    getEdgeIDs,\n    getNodeType,\n    getEdgeSources,\n    getEdgeTargets,\n  ],\n  (nodes, nodeName, edgeIDs, nodeType, edgeSources, edgeTargets) => {\n    const nodesList = {};\n    for (const edgeID of edgeIDs) {\n      const source = edgeSources[edgeID];\n      const target = edgeTargets[edgeID];\n      if (nodeType[source] === 'parameters' && nodeType[target] === 'task') {\n        if (!nodesList[target]) {\n          nodesList[target] = [];\n        }\n        nodesList[target].push(nodeName[source]);\n      }\n    }\n    return nodesList;\n  }\n);\n\n/**\n * Returns a list of dataset nodes that are input and output nodes of the modular pipeline under focus mode\n */\nexport const getInputOutputNodesForFocusedModularPipeline = createSelector(\n  [\n    (state) => state.visible.modularPipelineFocusMode?.id,\n    getGraphNodes,\n    getModularPipelinesTree,\n  ],\n  (focusedModularPipelineID, graphNodes, modularPipelinesTree) => {\n    const focusedModularPipeline = focusedModularPipelineID\n      ? modularPipelinesTree[focusedModularPipelineID]\n      : null;\n    const nodeIDs = focusedModularPipeline\n      ? [...focusedModularPipeline.inputs, ...focusedModularPipeline.outputs]\n      : [];\n    const result = nodeIDs.reduce((result, nodeID) => {\n      result[nodeID] = graphNodes[nodeID];\n      return result;\n    }, {});\n    return result;\n  }\n);\n","import { createSelector } from 'reselect';\nimport { getNodeLabel } from './nodes';\nconst getClickedNode = (state) => state.node.clicked;\n/**\n * Comparison for sorting alphabetically by name, otherwise by value\n */\nconst sortAlpha = (a, b) => (a.name || a).localeCompare(b.name || b);\n\n/**\n * Returns true if metadata sidebar is visible\n */\nexport const getVisibleMetaSidebar = createSelector(\n  [getClickedNode],\n  (nodeClicked) => Boolean(nodeClicked)\n);\n\n/**\n * Gets metadata for the currently clicked node if any\n */\nexport const getClickedNodeMetaData = createSelector(\n  [\n    getClickedNode,\n    getNodeLabel,\n    (state) => state.node.type,\n    (state) => state.node.tags,\n    (state) => state.tag.name,\n    (state) => state.pipeline,\n    (state) => state.node.filepath,\n    (state) => state.node.inputs,\n    (state) => state.node.outputs,\n    (state) => state.node.code,\n    (state) => state.node.parameters,\n    (state) => state.node.plot,\n    (state) => state.node.trackingData,\n    (state) => state.node.datasetType,\n    (state) => state.node.originalType,\n    (state) => state.node.transcodedTypes,\n    (state) => state.node.runCommand,\n  ],\n  (\n    nodeId,\n    nodeLabel,\n    nodeType,\n    nodeTags,\n    tagNames,\n    pipeline,\n    nodeFilepaths,\n    nodeInputs,\n    nodeOutputs,\n    nodeCodes,\n    nodeParameters,\n    nodePlot,\n    nodeTrackingData,\n    nodeDatasetTypes,\n    nodeOriginalTypes,\n    nodeTranscodedTypes,\n    nodeRunCommand\n  ) => {\n    if (!nodeId) {\n      return null;\n    }\n    //rounding of tracking data\n    nodeTrackingData[nodeId] &&\n      Object.entries(nodeTrackingData[nodeId]).forEach(([key, value]) => {\n        if (typeof value === 'number') {\n          nodeTrackingData[nodeId][key] = Math.round(value * 100) / 100;\n        }\n      });\n\n    const metadata = {\n      id: nodeId,\n      name: nodeLabel[nodeId],\n      type: nodeType[nodeId],\n      tags: [...nodeTags[nodeId]]\n        .map((tagId) => tagNames[tagId])\n        .sort(sortAlpha),\n      pipeline: pipeline.name[pipeline.active],\n      parameters: nodeParameters[nodeId],\n      runCommand: nodeRunCommand[nodeId],\n      code: nodeCodes[nodeId],\n      filepath: nodeFilepaths[nodeId],\n      plot: nodePlot[nodeId],\n      trackingData: nodeTrackingData[nodeId],\n      datasetType: nodeDatasetTypes[nodeId],\n      originalType: nodeOriginalTypes[nodeId],\n      transcodedTypes: nodeTranscodedTypes[nodeId],\n      inputs: nodeInputs[nodeId],\n      outputs: nodeOutputs[nodeId],\n    };\n\n    return metadata;\n  }\n);\n","import { createSelector } from 'reselect';\nimport { getVisibleNodes } from './nodes';\nimport { getVisibleEdges } from './edges';\nimport { getVisibleLayerIDs } from './disabled';\nimport { getVisibleMetaSidebar } from './metadata';\nimport {\n  sidebarWidth,\n  metaSidebarWidth,\n  chartMinWidthScale,\n  largeGraphThreshold,\n  codeSidebarWidth,\n} from '../config';\n\nconst getSizeWarningFlag = (state) => state.flags.sizewarning;\nconst getVisibleSidebar = (state) => state.visible.sidebar;\nconst getVisibleCode = (state) => state.visible.code;\nconst getIgnoreLargeWarning = (state) => state.ignoreLargeWarning;\nconst getGraphHasNodes = (state) => Boolean(state.graph?.nodes?.length);\nconst getChartSizeState = (state) => state.chartSize;\n\n/**\n * Show the large graph warning only if there are sufficient nodes + edges,\n * and it hasn't been toggled off (by clicking the Render Anyway button), and\n * the graph layout hasn't already previously been calculated (due to a user\n * filtering the graph to a smaller subset), and the flag isn't set to false.\n */\nexport const getTriggerLargeGraphWarning = createSelector(\n  [\n    getVisibleNodes,\n    getVisibleEdges,\n    getIgnoreLargeWarning,\n    getGraphHasNodes,\n    getSizeWarningFlag,\n  ],\n  (nodes, edges, ignoreLargeWarning, graphHasNodes, sizeWarningFlag) =>\n    nodes.length + 1.5 * edges.length > largeGraphThreshold &&\n    !ignoreLargeWarning &&\n    !graphHasNodes &&\n    sizeWarningFlag\n);\n\n/**\n * Select a subset of state that is watched by graph layout calculators\n * and used to prepare state.graph via async web worker actions\n */\nexport const getGraphInput = createSelector(\n  [\n    getVisibleNodes,\n    getVisibleEdges,\n    getVisibleLayerIDs,\n    getTriggerLargeGraphWarning,\n  ],\n  (nodes, edges, layers, triggerLargeGraphWarning) => {\n    if (triggerLargeGraphWarning) {\n      return null;\n    }\n\n    return { nodes, edges, layers };\n  }\n);\n\n/**\n * Calculate the displayed width of a sidebar\n */\nexport const getSidebarWidth = (visible, { open, closed }) =>\n  visible ? open : closed;\n\n/**\n * Convert the DOMRect into an Object, mutate some of the properties,\n * and add some useful new ones\n */\nexport const getChartSize = createSelector(\n  [getVisibleSidebar, getVisibleMetaSidebar, getVisibleCode, getChartSizeState],\n  (visibleSidebar, visibleMetaSidebar, visibleCodeSidebar, chartSize) => {\n    const { left, top, width, height } = chartSize;\n    if (!width || !height) {\n      return {};\n    }\n\n    // Get the actual sidebar width\n    const sidebarWidthActual = getSidebarWidth(visibleSidebar, sidebarWidth);\n    const metaSidebarWidthActual = getSidebarWidth(\n      visibleMetaSidebar,\n      metaSidebarWidth\n    );\n    const codeSidebarWidthActual = getSidebarWidth(\n      visibleCodeSidebar,\n      codeSidebarWidth\n    );\n\n    // Find the resulting space for the chart\n    let chartWidth =\n      width -\n      sidebarWidthActual -\n      metaSidebarWidthActual -\n      codeSidebarWidthActual;\n\n    return {\n      left,\n      top,\n      outerWidth: width,\n      outerHeight: height,\n      height,\n      width: chartWidth,\n      minWidthScale: chartMinWidthScale,\n      sidebarWidth: sidebarWidthActual,\n      metaSidebarWidth: metaSidebarWidthActual,\n      codeSidebarWidth: codeSidebarWidthActual,\n    };\n  }\n);\n\n/**\n * Gets the current chart zoom\n */\nexport const getChartZoom = createSelector([(state) => state.zoom], (zoom) => ({\n  ...zoom,\n}));\n","import { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport watch from 'redux-watch';\nimport reducer from '../reducers';\nimport { getGraphInput } from '../selectors/layout';\nimport { calculateGraph } from '../actions/graph';\nimport { saveState, pruneFalseyKeys } from './helpers';\n\n/**\n * Watch the getGraphInput selector, and dispatch an asynchronous action to\n * update state.graph via a web worker when it changes.\n * @param {object} store Redux store\n */\nconst updateGraphOnChange = (store) => {\n  const watchGraph = watch(() => getGraphInput(store.getState()));\n  store.subscribe(\n    watchGraph((graphInput) => {\n      store.dispatch(calculateGraph(graphInput));\n    })\n  );\n};\n\n/**\n * Save selected state properties to window.localStorage\n * @param {object} state Redux state snapshot\n */\nconst saveStateToLocalStorage = (state) => {\n  // does not save modal state to localStorage\n  const {\n    exportModal,\n    plotModal,\n    settingsModal,\n    modularPipelineFocusMode,\n    ...otherVisibleProps\n  } = state.visible;\n  saveState({\n    node: {\n      disabled: pruneFalseyKeys(state.node.disabled),\n    },\n    nodeType: {\n      disabled: state.nodeType.disabled,\n    },\n    pipeline: {\n      active: state.pipeline.active,\n    },\n    layer: {\n      visible: state.layer.visible,\n    },\n    tag: {\n      enabled: state.tag.enabled,\n    },\n    textLabels: state.textLabels,\n    visible: otherVisibleProps,\n    theme: state.theme,\n    prettyName: state.prettyName,\n    flags: state.flags,\n  });\n};\n\n/**\n * Configure initial state and create the Redux store\n * @param {Object} initialState Initial Redux state (from initial-state.js)\n * @return {Object} Redux store\n */\nexport default function configureStore(initialState) {\n  const composeEnhancers =\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const store = createStore(\n    reducer,\n    initialState,\n    composeEnhancers(applyMiddleware(thunk))\n  );\n  updateGraphOnChange(store);\n  store.subscribe(() => {\n    saveStateToLocalStorage(store.getState());\n  });\n\n  return store;\n}\n","import configureStore from './store';\n\nexport default configureStore;\n","import { useEffect, useState } from 'react';\nimport { useQuery } from '@apollo/client';\n\n/**\n * @param {Apollo query object} query\n * @param {Apollo query options object} options\n * @returns The data from the query, including error and loading states\n */\nexport const useApolloQuery = (query, options) => {\n  const [data, setData] = useState(undefined);\n  const {\n    subscribeToMore,\n    data: queryData,\n    error,\n    loading,\n  } = useQuery(query, options);\n\n  useEffect(() => {\n    if (queryData !== undefined) {\n      setData(queryData);\n    }\n  }, [queryData]);\n\n  return { subscribeToMore, data, error, loading };\n};\n","import fetch from 'cross-fetch';\nimport {\n  ApolloClient,\n  InMemoryCache,\n  createHttpLink,\n  split,\n} from '@apollo/client';\nimport { getMainDefinition } from '@apollo/client/utilities';\nimport { WebSocketLink } from '@apollo/client/link/ws';\n\nconst wsHost =\n  process.env.NODE_ENV === 'development'\n    ? 'localhost:4142'\n    : window.location.host;\n\nconst wsProtocol = window.location.protocol === 'https:' ? 'wss' : 'ws';\n\nconst wsLink = new WebSocketLink({\n  uri: `${wsProtocol}://${wsHost}/graphql`,\n  options: {\n    reconnect: true,\n  },\n});\n\nconst httpLink = createHttpLink({\n  // our graphql endpoint, normally here: http://localhost:4141/graphql\n  uri: '/graphql',\n  fetch,\n});\n\nconst splitLink = split(\n  ({ query }) => {\n    const definition = getMainDefinition(query);\n\n    return (\n      definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n    );\n  },\n  wsLink,\n  httpLink\n);\n\nexport const client = new ApolloClient({\n  connectToDevTools: true,\n  link: splitLink,\n  cache: new InMemoryCache(),\n  defaultOptions: {\n    query: {\n      errorPolicy: 'all',\n    },\n    mutate: {\n      errorPolicy: 'all',\n    },\n  },\n});\n","import gql from 'graphql-tag';\n\n/** query for runsList sidebar */\nexport const GET_RUNS = gql`\n  query getRunsList {\n    runsList {\n      bookmark\n      gitSha\n      id\n      title\n      notes\n    }\n  }\n`;\n\n/** query for details metadata component */\nexport const GET_RUN_METADATA = gql`\n  query getRunMetadata($runIds: [ID!]!) {\n    runMetadata(runIds: $runIds) {\n      id\n      author\n      bookmark\n      gitBranch\n      gitSha\n      notes\n      runCommand\n      title\n    }\n  }\n`;\n\n/** query for collapsable run details component */\nexport const GET_RUN_TRACKING_DATA = gql`\n  query getRunTrackingData($runIds: [ID!]!, $showDiff: Boolean) {\n    runTrackingData(runIds: $runIds, showDiff: $showDiff) {\n      datasetName\n      datasetType\n      data\n    }\n  }\n`;\n\n/** query for obtaining installed and latest Kedro-Viz versions */\nexport const GET_VERSIONS = gql`\n  query getVersion {\n    version {\n      installed\n      isOutdated\n      latest\n    }\n  }\n`;\n","import { Factory } from 'fishery';\nimport faker from '@faker-js/faker';\nimport { GET_RUNS, GET_RUN_METADATA, GET_RUN_TRACKING_DATA } from './queries';\n\nexport const RunMock = Factory.define(({ sequence }) => {\n  return {\n    author: faker.git.shortSha(),\n    bookmark: faker.datatype.boolean(),\n    gitBranch: faker.git.branch(),\n    gitSha: faker.git.commitSha(),\n    id: `abcd0m${sequence}`,\n    notes: faker.random.words(10),\n    runCommand: faker.random.words(5),\n    title: faker.random.words(3),\n  };\n});\n\nconst TrackingDatasetMock = Factory.define(() => {\n  return {\n    runId: faker.random.words(3),\n    value: faker.datatype.number(),\n  };\n});\n\nexport const TrackingDataMock = Factory.define(() => {\n  return {\n    datasetName: faker.random.words(2),\n    datasetType: faker.random.words(2),\n    data: {\n      [faker.random.words(1)]: TrackingDatasetMock.buildList(1),\n    },\n  };\n});\n\n/** mock for runList data */\nexport const runsListQueryMock = {\n  request: {\n    query: GET_RUNS,\n  },\n  result: {\n    data: {\n      runsList: RunMock.buildList(10),\n    },\n  },\n};\n\n/** mock for metadata data*/\n/** WIP: the run variable will be replaced by an input to enable dynamic input of variables*/\n/** This will be enabled with in a separate ticket*/\nexport const runMetadataQueryMock = {\n  request: {\n    query: GET_RUN_METADATA,\n    variables: {\n      runs: 'test',\n    },\n  },\n  result: {\n    data: {\n      runMetadata: RunMock.buildList(1),\n    },\n  },\n};\n\n/** mock for tracking data */\n/** WIP: the run variable will be replaced by an input to enable dynamic input of variables*/\n/** This will be enabled with in a separate ticket*/\nexport const runTrackingDataMock = {\n  request: {\n    query: GET_RUN_TRACKING_DATA,\n    variables: {\n      runs: 'test',\n    },\n  },\n  result: {\n    data: {\n      trackingData: TrackingDataMock.buildList(5),\n    },\n  },\n};\n","import React from 'react';\nimport { MockedProvider } from '@apollo/client/testing';\nimport { ApolloProvider } from '@apollo/client';\nimport { client } from '../../apollo/config';\nimport {\n  runsListQueryMock,\n  runMetadataQueryMock,\n  runTrackingDataMock,\n} from '../../apollo/mocks';\n\nexport const GraphQLProvider = ({ useMocks = false, children }) => {\n  if (useMocks) {\n    return (\n      <MockedProvider\n        mocks={[runsListQueryMock, runMetadataQueryMock, runTrackingDataMock]}\n      >\n        <>{children}</>\n      </MockedProvider>\n    );\n  }\n\n  return (\n    <ApolloProvider client={client}>\n      <>{children}</>\n    </ApolloProvider>\n  );\n};\n","import { createSelector } from 'reselect';\n\nconst getGraphLoading = (state) => state.loading.graph;\nconst getPipelineLoading = (state) => state.loading.pipeline;\nconst getNodeLoading = (state) => state.loading.node;\n\nexport const getDisplayLargeGraph = (state) => state.ignoreLargeWarning;\n\n/**\n * Determine whether to show the loading spinner\n */\nexport const isLoading = createSelector(\n  [getGraphLoading, getPipelineLoading, getNodeLoading],\n  (graphLoading, pipelineLoading, nodeLoading) => {\n    return graphLoading || pipelineLoading || nodeLoading;\n  }\n);\n","import React from 'react';\n\nconst ExperimentsIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M13 10V6h-2v4l-.766 2-.83 1.66 4.571-1.225-.218-.435L13 10zm1.889 4.261-6.68 1.79L7.235 18h9.526l-1.872-3.739zM20 20H4l4.999-10H9V6H8V4h8v2h-1v4h-.007L20 20z\" />\n  </svg>\n);\n\nexport default ExperimentsIcon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport './icon-button.css';\n\n/**\n * Icon button component\n */\nconst IconButton = ({\n  active,\n  ariaLabel,\n  ariaLive,\n  className,\n  container: Container = 'li',\n  disabled,\n  hasReminder,\n  icon,\n  labelText,\n  onClick,\n  visible,\n}) => {\n  const Icon = icon;\n\n  return visible ? (\n    <Container>\n      <button\n        aria-label={ariaLabel}\n        aria-live={ariaLive}\n        className={classnames(className, {\n          'pipeline-icon-toolbar__button': true,\n          'pipeline-icon-toolbar__button--active': active,\n        })}\n        disabled={disabled}\n        onClick={onClick}\n      >\n        {Icon && <Icon className=\"pipeline-icon\" hasReminder={hasReminder} />}\n        {labelText && (\n          <span className=\"pipeline-toolbar__label\">{labelText}</span>\n        )}\n      </button>\n    </Container>\n  ) : null;\n};\n\nIconButton.propTypes = {\n  ariaLabel: PropTypes.string,\n  ariaLive: PropTypes.string,\n  disabled: PropTypes.bool,\n  icon: PropTypes.func,\n  labelText: PropTypes.string,\n  onClick: PropTypes.func,\n  visible: PropTypes.bool,\n  active: PropTypes.bool,\n  hasReminder: PropTypes.bool,\n};\n\nIconButton.defaultProps = {\n  ariaLabel: null,\n  ariaLive: null,\n  disabled: false,\n  icon: null,\n  labelText: null,\n  onClick: null,\n  visible: true,\n  active: false,\n  hasReminder: false,\n};\n\nexport default IconButton;\n","import IconButton from './icon-button';\n\nexport default IconButton;\n","import React from 'react';\n\nconst LogoIcon = ({ className }) => (\n  <svg className={className} viewBox=\"24 25 32 30\">\n    <path\n      d=\"M40 25.414 54.586 40 40 54.586 25.414 40 40 25.414z\"\n      fill=\"none\"\n      fillRule=\"evenodd\"\n      stroke=\"#FFBC00\"\n      strokeWidth=\"2\"\n    />\n  </svg>\n);\n\nexport default LogoIcon;\n","import React from 'react';\n\nconst SettingsIcon = ({ className, hasReminder }) => (\n  <svg className={className} viewBox=\"-4 -4 24 24\">\n    <g>\n      <path d=\"M14.75 7L16.25 7 16.5 10 14.5 10z\" />\n      <path d=\"M0.75 7L2.25 7 2.5 10 0.5 10z\" />\n      <path d=\"M7.75 0L9.25 0 9.5 3 7.5 3z\" />\n      <path d=\"M7.75 14L9.25 14 9.5 17 7.5 17z\" />\n      <path d=\"M12.7 2.05L14.2 2.05 14.45 5.05 12.45 5.05z\" />\n      <path d=\"M2.8 11.95L4.3 11.95 4.55 14.95 2.55 14.95z\" />\n      <path d=\"M2.8 2.05L4.3 2.05 4.55 5.05 2.55 5.05z\" />\n      <path d=\"M12.7 11.95L14.2 11.95 14.45 14.95 12.45 14.95z\" />\n      <path d=\"M15.5 8.389c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7 7 3.134 7 7zm-2 0c0-2.762-2.239-5-5-5s-5 2.238-5 5c0 2.761 2.239 5 5 5s5-2.239 5-5z\" />\n      {hasReminder && (\n        <circle id=\"Oval\" fill=\"#FFBC00\" cx=\"16\" cy=\"4\" r=\"4\"></circle>\n      )}\n    </g>\n  </svg>\n);\n\nexport default SettingsIcon;\n","import React from 'react';\n\nconst ThemeIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M12 3a9 9 0 110 18 9 9 0 010-18zm0 2v14a7 7 0 100-14z\" />\n  </svg>\n);\n\nexport default ThemeIcon;\n","import React from 'react';\n\nconst TreeIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M12 2a3 3 0 0 1 2.16 5.082l4.47 8.94a3 3 0 1 1-1.79.895l-4.469-8.94a3.03 3.03 0 0 1-.742 0l-4.47 8.94a3 3 0 1 1-1.789-.895l4.47-8.94A3 3 0 0 1 12 2z\" />\n  </svg>\n);\n\nexport default TreeIcon;\n","import GlobalToolbar from './global-toolbar';\n\nexport default GlobalToolbar;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { toggleSettingsModal, toggleTheme } from '../../actions';\nimport ExperimentsIcon from '../icons/experiments';\nimport IconButton from '../ui/icon-button';\nimport LogoIcon from '../icons/logo';\nimport SettingsIcon from '../icons/settings';\nimport ThemeIcon from '../icons/theme';\nimport TreeIcon from '../icons/tree';\n\nimport './global-toolbar.css';\n\n/**\n * Main controls for filtering the chart data\n * @param {Function} onToggleTheme Handle toggling theme between light/dark\n * @param {string} theme Kedro UI light/dark theme\n */\nexport const GlobalToolbar = ({\n  isOutdated,\n  onToggleSettingsModal,\n  onToggleTheme,\n  theme,\n  visible,\n}) => {\n  return (\n    <>\n      <div className=\"pipeline-global-toolbar\">\n        <ul className=\"pipeline-global-routes-toolbar kedro\">\n          <IconButton\n            ariaLabel={'Kedro Viz logo and link'}\n            className={'pipeline-menu-button--logo pipeline-menu-button--large'}\n            disabled={false}\n            icon={LogoIcon}\n          />\n          <NavLink exact to={{ pathname: '/' }}>\n            <IconButton\n              ariaLabel={'View your pipeline'}\n              className={\n                'pipeline-menu-button--large pipeline-menu-button--link'\n              }\n              disabled={false}\n              icon={TreeIcon}\n            />\n          </NavLink>\n          <NavLink exact to={{ pathname: '/runsList' }}>\n            <IconButton\n              ariaLabel={'View your experiments'}\n              className={\n                'pipeline-menu-button--large pipeline-menu-button--link'\n              }\n              disabled={false}\n              icon={ExperimentsIcon}\n            />\n          </NavLink>\n        </ul>\n        <ul className=\"pipeline-global-control-toolbar kedro\">\n          <IconButton\n            ariaLive=\"polite\"\n            ariaLabel={`Change to ${\n              theme === 'light' ? 'dark' : 'light'\n            } theme`}\n            className={\n              'pipeline-menu-button--theme pipeline-menu-button--large'\n            }\n            onClick={() => onToggleTheme(theme === 'light' ? 'dark' : 'light')}\n            icon={ThemeIcon}\n            labelText=\"Toggle theme\"\n          />\n          <IconButton\n            ariaLabel={'Change the settings flags'}\n            className={\n              'pipeline-menu-button--settings pipeline-menu-button--large'\n            }\n            onClick={() => onToggleSettingsModal(true)}\n            icon={SettingsIcon}\n            disabled={false}\n            labelText={'Settings'}\n            hasReminder={isOutdated}\n          />\n        </ul>\n      </div>\n    </>\n  );\n};\n\nexport const mapStateToProps = (state) => ({\n  theme: state.theme,\n  visible: state.visible,\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onToggleSettingsModal: (value) => {\n    dispatch(toggleSettingsModal(value));\n  },\n  onToggleTheme: (value) => {\n    dispatch(toggleTheme(value));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GlobalToolbar);\n","import React from 'react';\n\nconst CloseIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\n  </svg>\n);\n\nexport default CloseIcon;\n","import Modal from './modal';\n\nexport default Modal;\n","import React, { useEffect } from 'react';\nimport classnames from 'classnames';\nimport CloseIcon from '../../icons/close';\nimport IconButton from '../../ui/icon-button';\nimport './modal.css';\n\n/**\n * Generic Kedro Modal\n */\nconst Modal = ({ title, onClose, visible, message, children }) => {\n  const handleKeyDown = (event) => {\n    if (event.keyCode === 27) {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  });\n\n  return (\n    <div\n      className={classnames('modal', {\n        'modal--visible': visible,\n      })}\n      role=\"dialog\"\n    >\n      <div\n        onClick={onClose}\n        className={classnames('modal__bg', {\n          'modal__bg--visible': visible,\n        })}\n      />\n      <div\n        className={classnames('modal__content', {\n          'modal__content--visible': visible,\n        })}\n      >\n        <IconButton\n          container={React.Fragment}\n          ariaLabel=\"Close Modal\"\n          className=\"modal__close-button\"\n          icon={CloseIcon}\n          onClick={onClose}\n        />\n        <div className=\"modal__wrapper\">\n          <div className=\"modal__title\">{title}</div>\n          {children}\n          {!children && <div className=\"modal__description\">{message}</div>}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Modal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport './button.css';\n\n/**\n * Generic Kedro Button\n */\nconst Button = ({ children, onClick, size, mode }) => (\n  <span className=\"kedro button\">\n    <button\n      className={classnames(\n        'button__btn',\n        `button__btn--${size}`,\n        `button__btn--${mode}`\n      )}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  </span>\n);\n\nButton.defaultProps = {\n  onClick: null,\n  size: 'regular',\n  mode: 'primary',\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n  size: PropTypes.oneOf(['regular', 'small']),\n  mode: PropTypes.oneOf(['primary', 'secondary']),\n};\n\nexport default Button;\n","import Button from './button';\n\nexport default Button;\n","import downloadSvg, { downloadPng } from 'svg-crowbar';\nimport { globalToolbarWidth } from '../../config';\n\n/**\n * Handle onClick for the SVG/PNG download button\n * @param {string} format Must be 'svg' or 'png'\n * @param {string} theme light/dark theme\n * @param {Object} graphSize Graph width/height/margin\n * @param {function} mockFn Mock testing function stand-in for svg-crowbar\n * @return {Function} onClick handler\n */\nconst exportGraph = ({ format, theme, graphSize, mockFn }) => {\n  const downloadFormats = {\n    png: downloadPng,\n    svg: downloadSvg,\n  };\n  const download = mockFn || downloadFormats[format];\n\n  // Create clone of graph SVG to avoid breaking the original\n  const svg = document.querySelector('#pipeline-graph');\n  const clone = svg.parentNode.appendChild(svg.cloneNode(true));\n  clone.classList.add('kedro', `kui-theme--${theme}`, 'pipeline-graph--export');\n\n  // Reset zoom/translate\n  let width, height;\n  const hasGraph = isFinite(graphSize.width) && isFinite(graphSize.height);\n  if (hasGraph) {\n    width = graphSize.width + graphSize.marginx * 2;\n    height = graphSize.height + graphSize.marginy * 2;\n    clone.setAttribute('viewBox', `0 0 ${width} ${height}`);\n  }\n  clone.querySelector('#zoom-wrapper').removeAttribute('transform');\n  clone\n    .querySelector('#zoom-wrapper')\n    .setAttribute('transform', `translate(${globalToolbarWidth}, 0)`);\n\n  // Impose a maximum size on PNGs because otherwise they break when downloading\n  if (format === 'png') {\n    const maxWidth = 5000;\n    width = Math.min(width, maxWidth);\n    height = Math.min(height, maxWidth * (height / width));\n  }\n  if (hasGraph) {\n    clone.setAttribute('width', width);\n    clone.setAttribute('height', height);\n  }\n\n  const style = document.createElement('style');\n  if (format === 'svg') {\n    // Add webfont\n    style.innerHTML =\n      '@import url(https://fonts.googleapis.com/css?family=Titillium+Web:400);';\n  } else {\n    // Add websafe fallback font\n    style.innerHTML = `.kedro {\n      font-family: \"Trebuchet MS\", \"Lucida Grande\", \"Lucida Sans Unicode\", \"Lucida Sans\", Tahoma, sans-serif;\n      letter-spacing: -0.4px;\n    }`;\n  }\n  clone.prepend(style);\n\n  // Download SVG/PNG\n  const options = format === 'svg' ? { css: 'internal' } : undefined;\n  download(clone, 'kedro-pipeline', options);\n\n  // Delete cloned SVG\n  svg.parentNode.removeChild(clone);\n};\n\nexport default exportGraph;\n","import ExportModal from './export-modal';\n\nexport default ExportModal;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Modal from '../ui/modal';\nimport Button from '../ui/button';\nimport { toggleExportModal } from '../../actions';\nimport exportGraph from './export-graph';\nimport './export-modal.css';\n\n/**\n * Modal to allow users to choose between SVG/PNG export formats\n */\nconst ExportModal = ({ graphSize, theme, onToggle, visible }) => {\n  if (!visible.exportBtn) {\n    return null;\n  }\n  return (\n    <Modal\n      title=\"Export pipeline visualisation\"\n      onClose={() => onToggle(false)}\n      visible={visible.exportModal}\n    >\n      <div className=\"pipeline-export-modal\">\n        <Button\n          onClick={() => {\n            exportGraph({ format: 'png', theme, graphSize });\n            onToggle(false);\n          }}\n        >\n          Download PNG\n        </Button>\n        <Button\n          onClick={() => {\n            exportGraph({ format: 'svg', theme, graphSize });\n            onToggle(false);\n          }}\n        >\n          Download SVG\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport const mapStateToProps = (state) => ({\n  graphSize: state.graph.size || {},\n  visible: state.visible,\n  theme: state.theme,\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onToggle: (value) => {\n    dispatch(toggleExportModal(value));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExportModal);\n","import { createSelector } from 'reselect';\nimport { getVisibleLayerIDs } from './disabled';\n\nconst getGraph = (state) => state.graph;\nconst getLayerName = (state) => state.layer.name;\n\n/**\n * Get layer positions\n */\nexport const getLayers = createSelector(\n  [getGraph, getVisibleLayerIDs, getLayerName],\n  ({ nodes, size }, layerIDs, layerName) => {\n    if (!nodes || !size || !nodes.length || !layerIDs.length) {\n      return [];\n    }\n    const { width, height } = size;\n\n    const bounds = {};\n\n    for (const node of nodes) {\n      const layer = node.nearestLayer || node.layer;\n\n      if (layer) {\n        const bound = bounds[layer] || (bounds[layer] = [Infinity, -Infinity]);\n\n        if (node.y - node.height < bound[0]) {\n          bound[0] = node.y - node.height;\n        }\n\n        if (node.y + node.height > bound[1]) {\n          bound[1] = node.y + node.height;\n        }\n      }\n    }\n\n    return layerIDs.map((id, i) => {\n      const currentBound = bounds[id] || [0, 0];\n      const prevBound = bounds[layerIDs[i - 1]] || [\n        currentBound[0],\n        currentBound[0],\n      ];\n      const nextBound = bounds[layerIDs[i + 1]] || [\n        currentBound[1],\n        currentBound[1],\n      ];\n      const start = (prevBound[1] + currentBound[0]) / 2;\n      const end = (currentBound[1] + nextBound[0]) / 2;\n      const rectWidth = Math.max(width, height) * 5;\n\n      return {\n        id,\n        name: layerName[id],\n        x: (rectWidth - width) / -2,\n        y: start,\n        width: rectWidth,\n        height: Math.max(end - start, 0),\n      };\n    });\n  }\n);\n","import { createSelector } from 'reselect';\nimport { getVisibleEdges } from './edges';\n\nconst getClickedNode = (state) => state.node.clicked;\n/**\n * Gets a map of visible nodeIDs to successors nodeIDs in both directions\n * @param {Array} edges\n */\nexport const getVisibleEdgesByNode = createSelector(\n  [getVisibleEdges],\n  (edges) => {\n    const sourceEdges = {};\n    const targetEdges = {};\n\n    for (const edge of edges) {\n      if (!sourceEdges[edge.target]) {\n        sourceEdges[edge.target] = [];\n      }\n\n      sourceEdges[edge.target].push(edge.source);\n\n      if (!targetEdges[edge.source]) {\n        targetEdges[edge.source] = [];\n      }\n\n      targetEdges[edge.source].push(edge.target);\n    }\n\n    return { sourceEdges, targetEdges };\n  }\n);\n\n/**\n * Finds all visible successor nodeIDs for the given nodeID\n * @param {string} nodeID the starting nodeID\n * @param {Object} edgesByNode an object mapping nodeIDs to successor nodeIDs\n * @param {object} visited an object for storing all visited node ids\n * @returns {object} the supplied `visited` object\n */\nconst findLinkedNodes = (nodeID, edgesByNode, visited) => {\n  if (!visited[nodeID]) {\n    visited[nodeID] = true;\n\n    if (edgesByNode[nodeID]) {\n      edgesByNode[nodeID].forEach((nodeID) =>\n        findLinkedNodes(nodeID, edgesByNode, visited)\n      );\n    }\n  }\n\n  return visited;\n};\n\n/**\n * Gets all visible ancestors and descendents for the given nodeID\n * @param {Object} visibleEdgeMaps\n * @param {string} nodeID\n */\nexport const getLinkedNodes = createSelector(\n  [getVisibleEdgesByNode, getClickedNode],\n  ({ sourceEdges, targetEdges }, nodeID) => {\n    if (!nodeID) {\n      return {};\n    }\n\n    const linkedNodes = {};\n    findLinkedNodes(nodeID, sourceEdges, linkedNodes);\n\n    linkedNodes[nodeID] = false;\n    findLinkedNodes(nodeID, targetEdges, linkedNodes);\n\n    return linkedNodes;\n  }\n);\n","/**\n * Returns a className string with the given modifiers in BEM style\n * @param {string} name The main class name\n * @param {?object} modifiers Map of modifier names to boolean or string values\n * @param {?string} others Optional class name string to concatenate after\n * @return {string} The compiled class name(s)\n */\nconst modifiers = (name, modifiers, others = '') =>\n  Object.keys(modifiers || {}).reduce((classes, modifier) => {\n    const value = modifiers[modifier];\n\n    if (typeof value !== 'string' && typeof value !== 'number') {\n      return `${classes} ${name}--${value ? '' : 'no-'}${modifier}`;\n    }\n\n    return `${classes} ${name}--${modifier}-${(value + '').replace(\n      /\\s/g,\n      '-'\n    )}`;\n  }, name) + (others ? ' ' + others : '');\n\nexport default modifiers;\n","import React from 'react';\nimport modifiers from '../../utils/modifiers';\n\nexport const paths = {\n  // database icon\n  data: 'M12 4c3.31 0 6 1.67 6 3.73l-.01.27H18v9h-.02a1.1 1.1 0 01-.16.42c-1.14 1.7-3.11 2.53-5.82 2.53s-4.68-.82-5.82-2.53a1.09 1.09 0 01-.16-.42H6V8h.01A2.33 2.33 0 016 7.73C6 5.67 8.69 4 12 4zm0 11.73c-1.6 0-2.94-.31-4-.94v1.64c.74.9 2.05 1.38 4 1.38 1.95 0 3.26-.48 4-1.38v-1.65c-1.06.64-2.4.95-4 .95zm0-4.26a8.33 8.33 0 01-4-.95v1.64c.75 1.1 2.04 1.65 4 1.65s3.25-.55 4-1.65V10.5c-1.06.6-2.46.96-4 .96zm0-5.34a6.3 6.3 0 00-3.23.8c-.56.35-.77.66-.77.8 0 .15.2.45.77.8.8.5 1.96.8 3.23.8s2.44-.3 3.23-.8c.56-.35.77-.65.77-.8 0-.14-.2-.45-.77-.8a6.3 6.3 0 00-3.23-.8z',\n  // function icon\n  task: 'M20 4.2l.2.2L19 5.9c-2.3-1.8-3.8-.9-4.8 3.4h3.1v2h-3.5v.2l-.1.6c-1.2 7.9-4 11-8.3 8l-.2-.1 1.2-1.6c2.5 1.8 4.2.3 5.2-5.9l.2-1v-.2H9.2v-2h3c1.4-6 4.1-8 7.9-5z',\n  // sliders icon\n  parameters:\n    'M10.2 14v1.5H20v2h-9.8V19H8.3v-1.5H5v-2h3.3V14h2zm7.4-9v1.5H20v2h-2.4V10h-1.8V8.5H5v-2h10.8V5h1.8z',\n  modularPipeline:\n    'M8.18 4c1.11 0 2.03.8 2.17 1.86l4.4 1.61c.31-.17.68-.27 1.07-.27 1.2 0 2.18.95 2.18 2.13s-.98 2.14-2.18 2.14c-.38 0-.73-.1-1.04-.26l-4.22 2.74L13.69 16c.3-.16.66-.26 1.04-.26 1.2 0 2.18.96 2.18 2.14 0 1.18-.98 2.13-2.18 2.13a2.16 2.16 0 01-2.17-2.35l-3.34-2.18c-.3.17-.66.26-1.04.26-1.2 0-2.18-.95-2.18-2.13s.98-2.13 2.18-2.13c.61 0 1.16.24 1.56.63l3.9-2.55v-.22-.13L9.63 7.73c-.39.33-.9.54-1.45.54C6.98 8.27 6 7.3 6 6.13 6 4.95 6.98 4 8.18 4z',\n  //plotly icon\n  plotly:\n    'M6.261 11.546l5.465 5.766-1.452 1.376-4.013-4.235-2.535 2.676-1.452-1.376 3.987-4.207zm6.911-2.898l8.495 7.607-1.334 1.49-7.14-6.394-2.514 2.325-1.358-1.469 3.851-3.559zM5.5 6C6.328 6 7 6.672 7 7.5S6.328 9 5.5 9 4 8.328 4 7.5 4.672 6 5.5 6z',\n};\n\nconst NodeIcon = ({ className, icon }) =>\n  paths[icon] ? (\n    <svg\n      className={modifiers('pipeline-node-icon', { icon }, className)}\n      viewBox=\"0 0 24 24\"\n    >\n      <path d={paths[icon]} />\n    </svg>\n  ) : null;\n\nexport default NodeIcon;\n","import 'd3-transition';\nimport { interpolatePath } from 'd3-interpolate-path';\nimport { select } from 'd3-selection';\nimport { curveBasis, line } from 'd3-shape';\nimport { paths as nodeIcons } from '../icons/node-icon';\n\nconst lineShape = line()\n  .x((d) => d.x)\n  .y((d) => d.y)\n  .curve(curveBasis);\n\n/**\n * Matches all floating point numbers in a string\n */\nconst matchFloats = /\\d+\\.\\d+/g;\n\n/**\n * Limits the precision of a float value to one decimal point\n */\nconst toSinglePoint = (value) => parseFloat(value).toFixed(1);\n\n/**\n * Limits the precision of a path string to one decimal point\n */\nconst limitPrecision = (path) => path.replace(matchFloats, toSinglePoint);\n\n/**\n * Render layer bands\n */\nexport const drawLayers = function () {\n  const { layers } = this.props;\n\n  this.el.layers = this.el.layerGroup\n    .selectAll('.pipeline-layer')\n    .data(layers, (layer) => layer.id);\n\n  const enterLayers = this.el.layers\n    .enter()\n    .append('rect')\n    .attr('class', 'pipeline-layer');\n\n  this.el.layers.exit().remove();\n\n  this.el.layers = this.el.layers.merge(enterLayers);\n\n  this.el.layers\n    .attr('x', (d) => d.x)\n    .attr('y', (d) => d.y)\n    .attr('height', (d) => d.height)\n    .attr('width', (d) => d.width);\n};\n\n/**\n * Render layer name labels\n */\nexport const drawLayerNames = function () {\n  const {\n    chartSize: { sidebarWidth = 0 },\n    layers,\n  } = this.props;\n\n  this.el.layerNameGroup\n    .transition('layer-names-sidebar-width')\n    .duration(this.DURATION)\n    .style('transform', `translateX(${sidebarWidth}px)`);\n\n  this.el.layerNames = this.el.layerNameGroup\n    .selectAll('.pipeline-layer-name')\n    .data(layers, (layer) => layer.id);\n\n  const enterLayerNames = this.el.layerNames\n    .enter()\n    .append('li')\n    .attr('class', 'pipeline-layer-name');\n\n  enterLayerNames\n    .style('opacity', 0)\n    .transition('enter-layer-names')\n    .duration(this.DURATION)\n    .style('opacity', 1);\n\n  this.el.layerNames\n    .exit()\n    .style('opacity', 1)\n    .transition('exit-layer-names')\n    .duration(this.DURATION)\n    .style('opacity', 0)\n    .remove();\n\n  this.el.layerNames = this.el.layerNames.merge(enterLayerNames);\n\n  this.el.layerNames.text((d) => d.name).attr('dy', 5);\n};\n\n/**\n * Sets the size and position of the given node rects\n */\nconst updateNodeRects = (nodeRects) =>\n  nodeRects\n    .attr('width', (node) => node.width - 5)\n    .attr('height', (node) => node.height - 5)\n    .attr('x', (node) => (node.width - 5) / -2)\n    .attr('y', (node) => (node.height - 5) / -2)\n    .attr('rx', (node) => {\n      // Task and Pipeline nodes are rectangle so radius on x-axis is 0\n      if (node.type === 'task' || node.type === 'modularPipeline') {\n        return 0;\n      }\n      return node.height / 2;\n    });\n\nconst updateParameterRect = (nodeRects) =>\n  nodeRects\n    .attr('width', 12)\n    .attr('height', 12)\n    .attr('x', (node) => (node.width + 20) / -2)\n    .attr('y', -6);\n\n/**\n * Render node icons and name labels\n */\nexport const drawNodes = function (changed) {\n  const {\n    clickedNode,\n    linkedNodes,\n    nodeTypeDisabled,\n    nodeActive,\n    nodeSelected,\n    hoveredParameters,\n    nodesWithInputParams,\n    inputOutputDataNodes,\n    nodes,\n    focusMode,\n  } = this.props;\n\n  const isInputOutputNode = (nodeID) =>\n    focusMode !== null && inputOutputDataNodes[nodeID];\n\n  if (changed('nodes')) {\n    this.el.nodes = this.el.nodeGroup\n      .selectAll('.pipeline-node')\n      .data(nodes, (node) => node.id);\n  }\n\n  if (!this.el.nodes) {\n    return;\n  }\n\n  const updateNodes = this.el.nodes;\n  const enterNodes = this.el.nodes.enter().append('g');\n  const exitNodes = this.el.nodes.exit();\n  // Filter out undefined nodes on Safari\n  const allNodes = this.el.nodes\n    .merge(enterNodes)\n    .merge(exitNodes)\n    .filter((node) => typeof node !== 'undefined');\n\n  if (changed('nodes')) {\n    enterNodes\n      .attr('tabindex', '0')\n      .attr('class', 'pipeline-node')\n      .attr('transform', (node) => `translate(${node.x}, ${node.y})`)\n      .attr('data-id', (node) => node.id)\n      .classed(\n        'pipeline-node--parameters',\n        (node) => node.type === 'parameters'\n      )\n      .classed('pipeline-node--data', (node) => node.type === 'data')\n      .classed('pipeline-node--task', (node) => node.type === 'task')\n      .on('click', this.handleNodeClick)\n      .on('mouseover', this.handleNodeMouseOver)\n      .on('mouseout', this.handleNodeMouseOut)\n      .on('focus', this.handleNodeMouseOver)\n      .on('blur', this.handleNodeMouseOut)\n      .on('keydown', this.handleNodeKeyDown);\n\n    enterNodes\n      .attr('opacity', 0)\n      .transition('show-nodes')\n      .duration(this.DURATION)\n      .attr('opacity', 1);\n\n    enterNodes.append('rect').attr('class', 'pipeline-node__bg');\n\n    enterNodes\n      .append('rect')\n      .attr('class', 'pipeline-node__parameter-indicator')\n      .on('mouseover', this.handleParamsIndicatorMouseOver)\n      .call(updateParameterRect);\n\n    // Performance: use a single path per icon\n    enterNodes\n      .append('path')\n      .attr('class', 'pipeline-node__icon')\n      .attr('d', (node) => nodeIcons[node.icon]);\n\n    enterNodes\n      .append('text')\n      .attr('class', 'pipeline-node__text')\n      .text((node) => node.name)\n      .attr('text-anchor', 'middle')\n      .attr('dy', 5)\n      .attr('dx', (node) => node.textOffset);\n\n    exitNodes\n      .transition('exit-nodes')\n      .duration(this.DURATION)\n      .style('opacity', 0)\n      .remove();\n\n    // Cancel exit transitions if re-entered\n    updateNodes.transition('exit-nodes').style('opacity', null);\n\n    this.el.nodes = this.el.nodeGroup.selectAll('.pipeline-node');\n  }\n\n  if (\n    changed(\n      'nodes',\n      'nodeTypeDisabled',\n      'nodeActive',\n      'nodeSelected',\n      'hoveredParameters',\n      'nodesWithInputParams',\n      'clickedNode',\n      'linkedNodes',\n      'focusMode',\n      'inputOutputDataNodes'\n    )\n  ) {\n    allNodes\n      .classed('pipeline-node--active', (node) => nodeActive[node.id])\n      .classed('pipeline-node--selected', (node) => nodeSelected[node.id])\n      .classed(\n        'pipeline-node--collapsed-hint',\n        (node) =>\n          hoveredParameters &&\n          nodesWithInputParams[node.id] &&\n          nodeTypeDisabled.parameters\n      )\n      .classed(\n        'pipeline-node--dataset-input',\n        (node) => isInputOutputNode(node.id) && node.type === 'data'\n      )\n      .classed(\n        'pipeline-node--parameter-input',\n        (node) => isInputOutputNode(node.id) && node.type === 'parameters'\n      )\n      .classed(\n        'pipeline-node--faded',\n        (node) => clickedNode && !linkedNodes[node.id]\n      );\n  }\n\n  if (changed('nodes')) {\n    allNodes\n      .transition('update-nodes')\n      .duration(this.DURATION)\n      .attr('transform', (node) => `translate(${node.x}, ${node.y})`)\n      .on('end', () => {\n        try {\n          // Sort nodes so tab focus order follows X/Y position\n          allNodes.sort((a, b) => a.order - b.order);\n        } catch (err) {\n          // Avoid rare DOM errors thrown due to timing issues\n        }\n      });\n\n    enterNodes.select('.pipeline-node__bg').call(updateNodeRects);\n\n    updateNodes\n      .select('.pipeline-node__bg')\n      .transition('node-rect')\n      .duration((node) => (node.showText ? 200 : 600))\n      .call(updateNodeRects);\n    allNodes\n      .select('.pipeline-node__parameter-indicator')\n      .classed(\n        'pipeline-node__parameter-indicator--visible',\n        (node) => nodeTypeDisabled.parameters && nodesWithInputParams[node.id]\n      )\n      .transition('node-rect')\n      .duration((node) => (node.showText ? 200 : 600))\n      .call(updateParameterRect);\n\n    // Performance: icon transitions with CSS on GPU\n    allNodes\n      .select('.pipeline-node__icon')\n      .style('transition-delay', (node) => (node.showText ? '0ms' : '200ms'))\n      .style(\n        'transform',\n        (node) =>\n          `translate(${node.iconOffset}px, ${-node.iconSize / 2}px) ` +\n          `scale(${node.iconSize / 24})`\n      );\n\n    // Performance: text transitions with CSS on GPU\n    allNodes\n      .select('.pipeline-node__text')\n      .text((node) => node.name)\n      .style('transition-delay', (node) => (node.showText ? '200ms' : '0ms'))\n      .style('opacity', (node) => (node.showText ? 1 : 0));\n  }\n};\n\n/**\n * Render edge lines\n */\nexport const drawEdges = function (changed) {\n  const { edges, clickedNode, linkedNodes, focusMode, inputOutputDataEdges } =\n    this.props;\n\n  const isInputOutputEdge = (edgeID) =>\n    focusMode !== null && inputOutputDataEdges[edgeID];\n\n  if (changed('edges')) {\n    this.el.edges = this.el.edgeGroup\n      .selectAll('.pipeline-edge')\n      .data(edges, (edge) => edge.id);\n  }\n\n  if (!this.el.edges) {\n    return;\n  }\n\n  const updateEdges = this.el.edges;\n  const enterEdges = this.el.edges.enter().append('g');\n  const exitEdges = this.el.edges.exit();\n  const allEdges = this.el.edges.merge(enterEdges).merge(exitEdges);\n\n  if (changed('edges', 'focusMode', 'inputOutputDataNodes')) {\n    enterEdges.append('path');\n    allEdges\n      .select('path')\n      .attr('marker-end', (edge) =>\n        edge.sourceNode.type === 'parameters'\n          ? isInputOutputEdge(edge.id)\n            ? `url(#pipeline-arrowhead--accent--input)`\n            : `url(#pipeline-arrowhead--accent)`\n          : isInputOutputEdge(edge.id)\n          ? `url(#pipeline-arrowhead--input)`\n          : `url(#pipeline-arrowhead)`\n      );\n\n    enterEdges\n      .attr('data-id', (edge) => edge.id)\n      .attr('class', 'pipeline-edge');\n\n    enterEdges\n      .attr('opacity', 0)\n      .transition('show-edges')\n      .duration(this.DURATION)\n      .attr('opacity', 1);\n\n    exitEdges\n      .transition('exit-edges')\n      .duration(this.DURATION)\n      .style('opacity', 0)\n      .remove();\n\n    // Cancel exit transitions if re-entered\n    updateEdges.transition('exit-edges').style('opacity', null);\n\n    allEdges\n      .select('path')\n      .transition('update-edges')\n      .duration(this.DURATION)\n      .attrTween('d', function (edge) {\n        // Performance: Limit path precision for parsing & render\n        let current = edge.points && limitPrecision(lineShape(edge.points));\n        const previous = select(this).attr('d') || current;\n        return interpolatePath(previous, current);\n      });\n\n    this.el.edges = this.el.edgeGroup.selectAll('.pipeline-edge');\n  }\n\n  if (\n    changed(\n      'edges',\n      'clickedNode',\n      'linkedNodes',\n      'focusMode',\n      'inputOutputDataEdges'\n    )\n  ) {\n    allEdges\n      .classed(\n        'pipeline-edge--parameters',\n        (edge) =>\n          edge.sourceNode.type === 'parameters' && !isInputOutputEdge(edge.id)\n      )\n      .classed(\n        'pipeline-edge--parameters-input',\n        (edge) =>\n          edge.sourceNode.type === 'parameters' && isInputOutputEdge(edge.id)\n      )\n      .classed('pipeline-edge--dataset--input', (edge) =>\n        isInputOutputEdge(edge.id)\n      )\n      .classed(\n        'pipeline-edge--faded',\n        (edge) =>\n          edge &&\n          clickedNode &&\n          (!linkedNodes[edge.source] || !linkedNodes[edge.target])\n      );\n  }\n};\n","import 'd3-transition';\nimport { select } from 'd3-selection';\nimport { interpolate } from 'd3-interpolate';\nimport { zoom as d3Zoom, zoomIdentity, zoomTransform } from 'd3-zoom';\n\n/**\n * Applies an active viewport behaviour on the given elements using d3-zoom.\n * Returns an object representing the view for use in view related functions.\n * @param {Object} options The options to use\n * @param {React.Ref} options.container The container element ref\n * @param {React.Ref} options.wrapper The wrapper element ref\n * @param {?Function} options.onViewChanged Callback when view changes\n * @param {?Function} options.onViewEnd Callback when view change ends\n * @param {?Boolean} [options.allowUserInput=true] Enable or disable user input\n * @returns {Object} An object representing the view\n */\nexport const viewing = ({\n  container,\n  wrapper,\n  onViewChanged,\n  onViewEnd,\n  allowUserInput = true,\n}) => {\n  const zoom = d3Zoom()\n    .on('zoom', (event) => {\n      const transform = event.transform;\n\n      // Ignore invalid transforms\n      if (isInvalidTransform(transform)) {\n        return;\n      }\n\n      select(wrapper.current).attr('transform', transform);\n      onViewChanged && onViewChanged(transform);\n    })\n    .on('end', onViewEnd)\n    // Use linear interpolation\n    .interpolate(interpolate);\n\n  if (!allowUserInput) {\n    // Ignore all user input default behaviour\n    zoom.filter(() => false);\n  }\n\n  select(container.current)\n    .call(zoom)\n    // Disable default double click to avoid conflicts\n    .on('dblclick.zoom', null);\n\n  return {\n    zoom,\n    container,\n    wrapper,\n  };\n};\n\n/**\n * A constant for the origin transform { x: 0, y: 0, k: 1 }\n */\nexport const origin = zoomIdentity;\n\n/**\n * Returns true if the transform is equivalent to the origin { x: 0, y: 0, k: 1 }\n * @param {Object} transform A transform object to test\n * @returns {Boolean} True if equivalent else false\n */\nexport const isOrigin = ({ x, y, k }) =>\n  x === origin.x && y === origin.y && k === origin.k;\n\n/**\n * Returns true if the transform meets this definition:\n *  - any component (x, y or k) is infinite, `NaN` or `undefined`\n * otherwise returns false.\n * @param {Object} transform A transform object to test\n * @returns {Boolean} True if the transform is invalid else false\n */\nexport const isInvalidTransform = ({ x, y, k }) =>\n  !isFinite(x + y + k) || isNaN(x + y + k) || (x === 0 && y === 0 && k === 0);\n\n/**\n * Returns the current transform of the given view.\n * This is equivalent to the container CSS transform but negated.\n * @param {Object} view The view\n * @returns {Object} The view transform\n */\nexport const getViewTransform = (view) => {\n  const transform = zoomTransform(view.wrapper.current);\n  return isInvalidTransform(transform) ? origin : negateTransform(transform);\n};\n\n/**\n * Negates the x and y components, in effect making the direction opposite.\n * Scale component does not change. Zeroes are always positive.\n * @private\n * @param {Object} transform The transform to negate\n * @returns {Object} The new transform\n */\nconst negateTransform = (transform) =>\n  // This ensures +0 instead of -0\n  origin.translate(-transform.x || 0, -transform.y || 0).scale(transform.k);\n\n/**\n * Sets the extents of the given view.\n * Translate and scale extents may be provided individually.\n * @param {Object} view The view\n * @param {Object} extents The exents\n */\nexport const setViewExtents = (view, { translate, scale }) => {\n  if (translate) {\n    const { minX, minY, maxX, maxY } = translate;\n    view.zoom.translateExtent([\n      [minX, minY],\n      [maxX, maxY],\n    ]);\n  }\n\n  if (scale) {\n    const { minK, maxK } = scale;\n    view.zoom.scaleExtent([minK, maxK]);\n  }\n};\n\n/**\n * Gets the extents of the given view including both translate and scale.\n * @param {Object} view The view\n * @returns {Object} The view extents\n */\nexport const getViewExtents = (view) => {\n  const scale = view.zoom.scaleExtent();\n  const translate = view.zoom.translateExtent();\n  return {\n    translate: {\n      minX: translate[0][0],\n      minY: translate[0][1],\n      maxX: translate[1][0],\n      maxY: translate[1][1],\n    },\n    scale: { minK: scale[0], maxK: scale[1] },\n  };\n};\n\n/**\n * Gets the bounds of the viewport.\n * By default this retrieves the container element dimensions unless an alternative viewport is set.\n * @param {Object} view The view\n * @returns {Object} The viewport extents\n */\nexport const getViewport = (view) => {\n  const viewport = view.zoom.extent()(select(view.container.current));\n  return {\n    top: viewport[0][1],\n    left: viewport[0][0],\n    bottom: viewport[1][1],\n    right: viewport[1][0],\n  };\n};\n\n/**\n * Sets the bounds of the viewport instead of using container element dimensions.\n * @param {Object} view The view\n * @param {Object} viewport The viewport bounds\n */\nexport const setViewport = (view, viewport) => {\n  view.zoom.extent([\n    [viewport.left, viewport.top],\n    [viewport.right, viewport.bottom],\n  ]);\n};\n\n/**\n * Sets the view transform on the view with optional transition.\n * Always respects the view extent constraints.\n * Translate and scale components may be provided individually.\n * Transform is absolute unless relative option set, where it will be added.\n * @param {Object} view The view\n * @param {Object} transform The transform to set on the view\n * @param {?Number} [duration=0] The transition duration (or 0 for none)\n * @param {?Boolean} [relative=false] When true, transform added to current transform\n */\nexport const setViewTransform = (\n  view,\n  transform,\n  duration = 0,\n  relative = false\n) => {\n  const container = select(view.container.current);\n  const current = getViewTransform(view);\n  const hasTranslation =\n    typeof transform.x !== 'undefined' && typeof transform.y !== 'undefined';\n  let k, x, y;\n\n  if (typeof jest !== 'undefined') {\n    // Transitions not supported in tests\n    duration = 0;\n  }\n\n  if (relative) {\n    // Relative: v' = v + t\n    k = current.k + (transform.k || 0);\n    x = current.x + (transform.x || 0);\n    y = current.y + (transform.y || 0);\n  } else {\n    // Absolute: v' = t\n    k = transform.k || current.k;\n    x = transform.x || current.x;\n    y = transform.y || current.y;\n  }\n\n  // Only translate if requested to avoid scale offset\n  if (hasTranslation) {\n    // Apply translation respecting extents\n    container.call(view.zoom.transform, origin);\n    container.call(view.zoom.translateTo, x / k, y / k);\n  }\n\n  // Apply scale respecting extents\n  container.call(view.zoom.scaleTo, k);\n\n  // If the update requires a transition\n  if (duration) {\n    // Store the already computed final transform\n    const final = getViewTransform(view);\n\n    // Revert to the initial transform\n    container.call(view.zoom.transform, negateTransform(current));\n\n    // Transition to the final transform\n    setViewTransformExact(view, final, duration);\n  }\n};\n\n/**\n * Sets the transform on the view with optional transition.\n * Ignores the view extent constraints.\n * The transform must be absolute containing both translate and scale components.\n * @param {Object} view The view\n * @param {Object} transform The transform to set on the view\n * @param {?Number} [duration=0] The transition duration (or 0 for none)\n */\nexport const setViewTransformExact = (view, transform, duration = 0) => {\n  const container = select(view.container.current);\n\n  // Convert transform\n  const final = origin.translate(-transform.x, -transform.y).scale(transform.k);\n\n  if (typeof jest !== 'undefined') {\n    // Simulate application in tests\n    view.container.current.__zoom = final;\n    return;\n  }\n\n  // Apply the transform ignoring extents\n  (!duration\n    ? container\n    : container.transition('zoom').duration(duration)\n  ).call(view.zoom.transform, final);\n};\n\n/**\n * Returns a view transform that fits the object dimensions\n * and optional focus point inside the given view dimensions,\n * while respecting a minimum desired scale.\n * @param {Object} options The options\n * @param {Object} options.offset The origin point\n * @param {?Object} options.focus The optional point to keep in focus\n * @param {Number} options.viewWidth The width of the viewport\n * @param {Number} options.viewHeight The height of the viewport\n * @param {Number} options.objectWidth The width of the object\n * @param {Number} options.objectHeight The height of the object\n * @param {?Number} [options.minScaleX=0] The minimum X scale\n * @param {?Number} [options.minScaleFocus=0] The minimum scale when focus given\n * @param {?Number} [options.focusOffset=0.8] Offset center towards relative focus position\n * @returns {Object} A view transform that fits the constraints\n */\nexport const viewTransformToFit = ({\n  offset,\n  focus,\n  viewWidth,\n  viewHeight,\n  objectWidth,\n  objectHeight,\n  minScaleX = 0,\n  minScaleFocus = 0,\n  focusOffset = 0.8,\n}) => {\n  let scale = origin.k;\n  let x = origin.x;\n  let y = origin.y;\n\n  // Get the scales that fit each axis\n  const scaleY = viewHeight / objectHeight;\n  const scaleX = viewWidth / objectWidth;\n\n  // Apply a minimum to X but allow Y to fit\n  const scaleXClamp = Math.max(minScaleX, scaleX);\n\n  // To fit both axis, choose the smaller one\n  scale = Math.min(scaleXClamp, scaleY);\n\n  // If there is a focus point\n  if (focus) {\n    // Ensure scale is a reasonable size\n    scale = Math.max(minScaleFocus, scale);\n  }\n\n  // Offset the origin\n  x += offset.x;\n  y += offset.y;\n\n  // Offset to center whole object\n  x += (viewWidth - objectWidth * scale) * 0.5;\n  y += (viewHeight - objectHeight * scale) * 0.5;\n\n  // When there is a focus point set\n  if (focus) {\n    // Find which axes would become cropped\n    const isCroppedX = viewWidth < objectWidth * scale;\n    const isCroppedY = viewHeight < objectHeight * scale;\n\n    const objectCenterX = objectWidth * 0.5;\n    const objectCenterY = objectHeight * 0.5;\n\n    // Offset on the cropped axes only\n    const focusCenterOffsetX = isCroppedX ? objectCenterX - focus.x : 0;\n    const focusCenterOffsetY = isCroppedY ? objectCenterY - focus.y : 0;\n\n    const focusRelativeOffsetX = focusCenterOffsetX / objectWidth;\n    const focusRelativeOffsetY = focusCenterOffsetY / objectHeight;\n\n    // Offset to exactly center on the selected focus\n    x += focusCenterOffsetX * scale;\n    y += focusCenterOffsetY * scale;\n\n    // Adjust centering to better account for focus position\n    x -= focusRelativeOffsetX * viewWidth * focusOffset;\n    y -= focusRelativeOffsetY * viewHeight * focusOffset;\n  }\n\n  // This ensures +0 instead of -0\n  return { x: -x || 0, y: -y || 0, k: scale };\n};\n","import React from 'react';\nimport classnames from 'classnames';\nimport './tooltip.css';\n\nconst zeroWidthSpace = String.fromCharCode(0x200b);\n\n/**\n * Force tooltip text to break on special characters\n * @param {string} text Any text with special characters\n * @return {string} text\n */\nexport const insertZeroWidthSpace = (text) =>\n  text.replace(/([^\\w\\s]|[_])/g, `${zeroWidthSpace}$1${zeroWidthSpace}`);\n\n/**\n * Display flowchart node tooltip\n * @param {object} chartSize Chart dimensions in pixels\n * @param {object} targetRect event.target.getBoundingClientRect()\n * @param {boolean} visible Whether to show the tooltip\n * @param {string} text Tooltip display label\n */\nconst Tooltip = ({ chartSize, targetRect, visible, text }) => {\n  const { left, top, width, height, outerWidth, sidebarWidth } = chartSize;\n  const isRight = targetRect.left - sidebarWidth > width / 2;\n  const isTop = targetRect.top < height / 2;\n  const xOffset = isRight ? targetRect.left - outerWidth : targetRect.left;\n  const yOffset = isTop ? targetRect.top + targetRect.height : targetRect.top;\n  const x = xOffset - left + targetRect.width / 2;\n  const y = yOffset - top;\n\n  return (\n    <div\n      className={classnames('pipeline-tooltip', {\n        'pipeline-tooltip--visible': visible,\n        'pipeline-tooltip--right': isRight,\n        'pipeline-tooltip--top': isTop,\n      })}\n      style={{ transform: `translate(${x}px, ${y}px)` }}\n    >\n      <div className=\"pipeline-tooltip__text\">{insertZeroWidthSpace(text)}</div>\n    </div>\n  );\n};\n\nTooltip.defaultProps = {\n  chartSize: {},\n  targetRect: {},\n  visible: false,\n  text: '',\n};\n\nexport default Tooltip;\n","import Tooltip from './tooltip';\n\nexport default Tooltip;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport { select } from 'd3-selection';\nimport { updateChartSize, updateZoom } from '../../actions';\nimport { loadNodeData, toggleNodeHovered } from '../../actions/nodes';\nimport {\n  getNodeActive,\n  getNodeSelected,\n  getNodesWithInputParams,\n  getInputOutputNodesForFocusedModularPipeline,\n} from '../../selectors/nodes';\nimport { getInputOutputDataEdges } from '../../selectors/edges';\nimport { getChartSize, getChartZoom } from '../../selectors/layout';\nimport { getLayers } from '../../selectors/layers';\nimport { getLinkedNodes } from '../../selectors/linked-nodes';\nimport { getVisibleMetaSidebar } from '../../selectors/metadata';\nimport { drawNodes, drawEdges, drawLayers, drawLayerNames } from './draw';\nimport {\n  viewing,\n  isOrigin,\n  viewTransformToFit,\n  setViewTransform,\n  getViewTransform,\n  setViewTransformExact,\n  setViewExtents,\n  getViewExtents,\n} from '../../utils/view';\nimport Tooltip from '../ui/tooltip';\nimport './styles/flowchart.css';\n\n/**\n * Display a pipeline flowchart, mostly rendered with D3\n */\nexport class FlowChart extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tooltip: { visible: false },\n    };\n    this.onViewChange = this.onViewChange.bind(this);\n    this.onViewChangeEnd = this.onViewChangeEnd.bind(this);\n\n    this.containerRef = React.createRef();\n    this.svgRef = React.createRef();\n    this.wrapperRef = React.createRef();\n    this.edgesRef = React.createRef();\n    this.nodesRef = React.createRef();\n    this.layersRef = React.createRef();\n    this.layerNamesRef = React.createRef();\n\n    this.DURATION = 700;\n    this.MARGIN = 500;\n    this.MIN_SCALE = 0.8;\n    this.MAX_SCALE = 2;\n  }\n\n  componentDidMount() {\n    this.selectD3Elements();\n    this.updateChartSize();\n\n    this.view = viewing({\n      container: this.svgRef,\n      wrapper: this.wrapperRef,\n      onViewChanged: this.onViewChange,\n      onViewEnd: this.onViewChangeEnd,\n    });\n\n    this.updateViewExtents();\n    this.addGlobalEventListeners();\n    this.update();\n\n    if (this.props.tooltip) {\n      this.showTooltip(null, null, this.props.tooltip);\n    } else {\n      this.hideTooltip();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeGlobalEventListeners();\n  }\n\n  componentDidUpdate(prevProps) {\n    this.update(prevProps);\n  }\n\n  /**\n   * Updates drawing and zoom if props have changed\n   */\n  update(prevProps = {}) {\n    const { chartZoom } = this.props;\n    const changed = (...names) => this.changed(names, prevProps, this.props);\n\n    if (changed('visibleSidebar', 'visibleCode', 'visibleMetaSidebar')) {\n      this.updateChartSize();\n    }\n\n    if (changed('layers', 'chartSize')) {\n      drawLayers.call(this);\n      drawLayerNames.call(this);\n    }\n\n    if (\n      changed(\n        'edges',\n        'clickedNode',\n        'linkedNodes',\n        'focusMode',\n        'inputOutputDataEdges'\n      )\n    ) {\n      drawEdges.call(this, changed);\n    }\n\n    if (\n      changed(\n        'nodes',\n        'clickedNode',\n        'linkedNodes',\n        'nodeTypeDisabled',\n        'nodeActive',\n        'nodeSelected',\n        'hoveredParameters',\n        'nodesWithInputParams',\n        'focusMode',\n        'inputOutputDataNodes'\n      )\n    ) {\n      drawNodes.call(this, changed);\n    }\n\n    if (changed('edges', 'nodes', 'layers', 'chartSize', 'clickedNode')) {\n      this.resetView();\n    } else {\n      this.onChartZoomChanged(chartZoom);\n    }\n  }\n\n  /**\n   * Returns true if any of the given props are different between given objects.\n   * Only shallow changes are detected.\n   */\n  changed(props, objectA, objectB) {\n    return (\n      objectA &&\n      objectB &&\n      props.some((prop) => objectA[prop] !== objectB[prop])\n    );\n  }\n\n  /**\n   * Create D3 element selectors\n   */\n  selectD3Elements() {\n    this.el = {\n      svg: select(this.svgRef.current),\n      wrapper: select(this.wrapperRef.current),\n      edgeGroup: select(this.edgesRef.current),\n      nodeGroup: select(this.nodesRef.current),\n      layerGroup: select(this.layersRef.current),\n      layerNameGroup: select(this.layerNamesRef.current),\n    };\n  }\n\n  /**\n   * Update the chart size in state from chart container bounds.\n   * This is emulated in tests with a constant fixed size.\n   */\n  updateChartSize() {\n    if (typeof jest !== 'undefined') {\n      // Emulate chart size for tests\n      this.props.onUpdateChartSize(chartSizeTestFallback);\n    } else {\n      // Use container bounds\n      this.props.onUpdateChartSize(\n        this.containerRef.current.getBoundingClientRect()\n      );\n    }\n  }\n\n  /**\n   * Add window event listeners on mount\n   */\n  addGlobalEventListeners() {\n    // Add ResizeObserver to listen for any changes in the container's width/height\n    // (with event listener fallback)\n    if (window.ResizeObserver) {\n      this.resizeObserver =\n        this.resizeObserver ||\n        new window.ResizeObserver(this.handleWindowResize);\n      this.resizeObserver.observe(this.containerRef.current);\n    } else {\n      window.addEventListener('resize', this.handleWindowResize);\n    }\n    // Print event listeners\n    window.addEventListener('beforeprint', this.handleBeforePrint);\n    window.addEventListener('afterprint', this.handleAfterPrint);\n  }\n\n  /**\n   * Remove window event listeners on unmount\n   */\n  removeGlobalEventListeners() {\n    // ResizeObserver\n    if (window.ResizeObserver) {\n      this.resizeObserver.unobserve(this.containerRef.current);\n    } else {\n      window.removeEventListener('resize', this.handleWindowResize);\n    }\n    // Print event listeners\n    window.removeEventListener('beforeprint', this.handleBeforePrint);\n    window.removeEventListener('afterprint', this.handleAfterPrint);\n  }\n\n  /**\n   * Handle window resize\n   */\n  handleWindowResize = () => {\n    this.updateChartSize();\n  };\n\n  /**\n   * Add viewBox on window print so that the SVG can be scaled to fit\n   */\n  handleBeforePrint = () => {\n    const graphSize = this.props.graphSize;\n    const width = graphSize.width + graphSize.marginx * 2;\n    const height = graphSize.height + graphSize.marginy * 2;\n    this.el.svg.attr('viewBox', `0 0 ${width} ${height}`);\n  };\n\n  /**\n   * Remove viewBox once printing is done\n   */\n  handleAfterPrint = () => {\n    this.el.svg.attr('viewBox', null);\n  };\n\n  /**\n   * On every frame of every view transform change (from reset, pan, zoom etc.)\n   * @param {Object} transform The current view transfrom\n   */\n  onViewChange(transform) {\n    const { k: scale, x, y } = transform;\n\n    // Apply animating class to zoom wrapper\n    this.el.wrapper.classed(\n      'pipeline-flowchart__zoom-wrapper--animating',\n      true\n    );\n\n    // Update layer label y positions\n    if (this.el.layerNames) {\n      this.el.layerNames.style('transform', (d) => {\n        const updateY = y + (d.y + d.height / 2) * scale;\n        return `translateY(${updateY}px)`;\n      });\n    }\n\n    // Hide the tooltip so it doesn't get misaligned to its node\n    this.hideTooltip();\n\n    // Update extents\n    this.updateViewExtents(transform);\n    const extents = getViewExtents(this.view);\n\n    // Share the applied zoom state with other components\n    this.props.onUpdateZoom({\n      scale,\n      x,\n      y,\n      applied: true,\n      transition: false,\n      relative: false,\n      minScale: extents.scale.minK,\n      maxScale: extents.scale.maxK,\n    });\n  }\n\n  /**\n   * Called when the view changes have ended (i.e. after transition ends)\n   */\n  onViewChangeEnd() {\n    this.el.wrapper.classed(\n      'pipeline-flowchart__zoom-wrapper--animating',\n      false\n    );\n  }\n\n  /**\n   * Updates view extents based on the current view transform.\n   * Offsets the extents considering any open sidebars.\n   * Allows additional margin for user panning within limits.\n   * Zoom scale is limited to a practical range for usability.\n   * @param {?Object} transform Current transform override\n   */\n  updateViewExtents(transform) {\n    const { k: scale } = transform || getViewTransform(this.view);\n\n    const {\n      sidebarWidth = 0,\n      metaSidebarWidth = 0,\n      codeSidebarWidth = 0,\n      width: chartWidth = 0,\n      height: chartHeight = 0,\n    } = this.props.chartSize;\n\n    const { width: graphWidth = 0, height: graphHeight = 0 } =\n      this.props.graphSize;\n\n    const leftSidebarOffset = sidebarWidth / scale;\n    const rightSidebarOffset = (metaSidebarWidth + codeSidebarWidth) / scale;\n    const margin = this.MARGIN;\n\n    // Find the relative minimum scale to fit whole graph\n    const minScale = Math.min(\n      chartWidth / (graphWidth || 1),\n      chartHeight / (graphHeight || 1)\n    );\n\n    setViewExtents(this.view, {\n      translate: {\n        minX: -leftSidebarOffset - margin,\n        maxX: graphWidth + margin + rightSidebarOffset,\n        minY: -margin,\n        maxY: graphHeight + margin,\n      },\n      scale: {\n        minK: this.MIN_SCALE * minScale,\n        maxK: this.MAX_SCALE,\n      },\n    });\n  }\n\n  /**\n   * Applies the given zoom state as necessary\n   * @param {Object} chartZoom The new zoom state\n   */\n  onChartZoomChanged(chartZoom) {\n    // No change if already applied (e.g. was an internal update)\n    if (chartZoom.applied) {\n      return;\n    }\n\n    // Apply reset if it was requested\n    if (chartZoom.reset === true) {\n      this.resetView();\n      return;\n    }\n\n    // Set the view while respecting extents\n    setViewTransform(\n      this.view,\n      { x: chartZoom.x, y: chartZoom.y, k: chartZoom.scale },\n      chartZoom.transition ? this.DURATION * 0.3 : 0,\n      chartZoom.relative\n    );\n  }\n\n  /**\n   * Zoom and scale to fit graph and any selected node in view\n   */\n  resetView() {\n    const { chartSize, graphSize, clickedNode, nodes } = this.props;\n    const { width: chartWidth, height: chartHeight } = chartSize;\n    const { width: graphWidth, height: graphHeight } = graphSize;\n\n    // Skip if chart or graph is not ready yet\n    if (!chartWidth || !graphWidth) {\n      return;\n    }\n\n    // Sidebar offset\n    const offset = { x: chartSize.sidebarWidth, y: 0 };\n\n    // Use the selected node as focus point\n    const focus = clickedNode\n      ? nodes.find((node) => node.id === clickedNode)\n      : null;\n\n    // Find a transform that fits everything in view\n    const transform = viewTransformToFit({\n      offset,\n      focus,\n      viewWidth: chartWidth,\n      viewHeight: chartHeight,\n      objectWidth: graphWidth,\n      objectHeight: graphHeight,\n      minScaleX: 0.2,\n      minScaleFocus: 0.3,\n      focusOffset: 0.8,\n    });\n\n    // Detect first transform\n    const isFirstTransform = isOrigin(getViewTransform(this.view));\n\n    // Apply transform ignoring extents\n    setViewTransformExact(\n      this.view,\n      transform,\n      isFirstTransform ? 0 : this.DURATION,\n      false\n    );\n  }\n\n  /**\n   * Returns parameter count when there are more\n   * than one parameters and parameter name if there's a single parameter\n   * @param {Array} parameterNames\n   * @returns {String}\n   */\n  getHoveredParameterLabel = (parameterNames) =>\n    parameterNames.length > 1\n      ? `Parameters:${parameterNames.length}`\n      : parameterNames[0];\n\n  /**\n   * Enable a node's focus state and highlight linked nodes\n   * @param {Object} event Event object\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeClick = (event, node) => {\n    this.props.onLoadNodeData(node.id);\n    event.stopPropagation();\n  };\n\n  /**\n   * Remove a node's focus state and dim linked nodes\n   */\n  handleChartClick = () => {\n    this.props.onLoadNodeData(null);\n  };\n\n  /**\n   * Enable a node's active state, show tooltip, and highlight linked nodes\n   * @param {Object} event Event object\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeMouseOver = (event, node) => {\n    this.props.onToggleNodeHovered(node.id);\n    node && this.showTooltip(event, node.fullName);\n  };\n\n  /**\n   * Shows tooltip when the parameter indicator is hovered on\n   * @param {Object} event Event object\n   * @param {Object} node Datum for a single node\n   */\n  handleParamsIndicatorMouseOver = (event, node) => {\n    const parameterNames = this.props.nodesWithInputParams[node.id];\n    if (parameterNames) {\n      const label = this.getHoveredParameterLabel(parameterNames);\n\n      this.showTooltip(event, label);\n    }\n    event.stopPropagation();\n  };\n\n  /**\n   * Remove a node's active state, hide tooltip, and dim linked nodes\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeMouseOut = () => {\n    this.props.onToggleNodeHovered(null);\n    this.hideTooltip();\n  };\n\n  /**\n   * Handle keydown event when a node is focused\n   * @param {Object} event Event object\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeKeyDown = (event, node) => {\n    const ENTER = 13;\n    const ESCAPE = 27;\n    if (event.keyCode === ENTER) {\n      this.handleNodeClick(event, node);\n    }\n    if (event.keyCode === ESCAPE) {\n      this.handleChartClick();\n      this.handleNodeMouseOut();\n    }\n  };\n\n  /**\n   * Show, fill and and position the tooltip\n   * @param {Object} event Event object\n   * @param {Object} text Text to show on the tooltip\n   * @param {?Object} options Options for the tooltip if required\n   */\n  showTooltip(event, text, options = {}) {\n    this.setState({\n      tooltip: {\n        targetRect: event && event.target.getBoundingClientRect(),\n        text: text,\n        visible: true,\n        ...options,\n      },\n    });\n  }\n\n  /**\n   * Hide the tooltip\n   */\n  hideTooltip() {\n    if (this.state.tooltip.visible) {\n      this.setState({\n        tooltip: {\n          ...this.state.tooltip,\n          visible: false,\n        },\n      });\n    }\n  }\n\n  /**\n   * Render React elements\n   */\n  render() {\n    const { chartSize, layers, visibleGraph, displayGlobalToolbar } =\n      this.props;\n    const { outerWidth = 0, outerHeight = 0 } = chartSize;\n\n    return (\n      <div\n        className=\"pipeline-flowchart kedro\"\n        ref={this.containerRef}\n        onClick={this.handleChartClick}\n      >\n        <svg\n          id=\"pipeline-graph\"\n          className=\"pipeline-flowchart__graph\"\n          width={outerWidth}\n          height={outerHeight}\n          ref={this.svgRef}\n        >\n          <g\n            id=\"zoom-wrapper\"\n            className={classnames('pipeline-zoom-wrapper', {\n              'pipeline-zoom-wrapper--hidden': !visibleGraph,\n            })}\n            ref={this.wrapperRef}\n          >\n            <defs>\n              {[\n                'arrowhead',\n                'arrowhead--input',\n                'arrowhead--accent--input',\n                'arrowhead--accent',\n              ].map((id) => (\n                <marker\n                  id={`pipeline-${id}`}\n                  key={id}\n                  className={`pipeline-flowchart__${id}`}\n                  viewBox=\"0 0 10 10\"\n                  refX=\"7\"\n                  refY=\"5\"\n                  markerUnits=\"strokeWidth\"\n                  markerWidth=\"8\"\n                  markerHeight=\"6\"\n                  orient=\"auto\"\n                >\n                  <path d=\"M 0 0 L 10 5 L 0 10 L 4 5 z\" />\n                </marker>\n              ))}\n            </defs>\n            <g className=\"pipeline-flowchart__layers\" ref={this.layersRef} />\n            <g className=\"pipeline-flowchart__edges\" ref={this.edgesRef} />\n            <g\n              id=\"nodes\"\n              className=\"pipeline-flowchart__nodes\"\n              ref={this.nodesRef}\n            />\n          </g>\n        </svg>\n        <ul\n          className={classnames('pipeline-flowchart__layer-names', {\n            'pipeline-flowchart__layer-names--visible': layers.length,\n            'pipeline-flowchart__layer-names--no-global-toolbar':\n              !displayGlobalToolbar,\n          })}\n          ref={this.layerNamesRef}\n        />\n        <Tooltip chartSize={chartSize} {...this.state.tooltip} />\n      </div>\n    );\n  }\n}\n\n// Fixed chart size used in tests\nexport const chartSizeTestFallback = {\n  left: 0,\n  top: 0,\n  right: 1280,\n  bottom: 1024,\n  width: 1280,\n  height: 1024,\n};\n\n// Maintain a single reference to support change detection\nconst emptyEdges = [];\nconst emptyNodes = [];\nconst emptyGraphSize = {};\n\nexport const mapStateToProps = (state, ownProps) => ({\n  clickedNode: state.node.clicked,\n  chartSize: getChartSize(state),\n  chartZoom: getChartZoom(state),\n  displayGlobalToolbar: state.display.globalToolbar,\n  edges: state.graph.edges || emptyEdges,\n  focusMode: state.visible.modularPipelineFocusMode,\n  graphSize: state.graph.size || emptyGraphSize,\n  hoveredParameters: state.hoveredParameters,\n  layers: getLayers(state),\n  linkedNodes: getLinkedNodes(state),\n  nodes: state.graph.nodes || emptyNodes,\n  nodeTypeDisabled: state.nodeType.disabled,\n  nodeActive: getNodeActive(state),\n  nodeSelected: getNodeSelected(state),\n  nodesWithInputParams: getNodesWithInputParams(state),\n  inputOutputDataNodes: getInputOutputNodesForFocusedModularPipeline(state),\n  inputOutputDataEdges: getInputOutputDataEdges(state),\n  visibleGraph: state.visible.graph,\n  visibleSidebar: state.visible.sidebar,\n  visibleCode: state.visible.code,\n  visibleMetaSidebar: getVisibleMetaSidebar(state),\n  ...ownProps,\n});\n\nexport const mapDispatchToProps = (dispatch, ownProps) => ({\n  onLoadNodeData: (nodeClicked) => {\n    dispatch(loadNodeData(nodeClicked));\n  },\n  onToggleNodeHovered: (nodeHovered) => {\n    dispatch(toggleNodeHovered(nodeHovered));\n  },\n  onUpdateChartSize: (chartSize) => {\n    dispatch(updateChartSize(chartSize));\n  },\n  onUpdateZoom: (transform) => {\n    dispatch(updateZoom(transform));\n  },\n  ...ownProps,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FlowChart);\n","import FlowChart from './flowchart';\n\nexport default FlowChart;\n","import LargePipelineWarning from './large-pipeline-warning';\n\nexport default LargePipelineWarning;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport { changeFlag, toggleIgnoreLargeWarning } from '../../actions';\nimport { getVisibleNodes } from '../../selectors/nodes';\nimport { getTriggerLargeGraphWarning } from '../../selectors/layout';\nimport Button from '../ui/button';\nimport './large-pipeline-warning.css';\n\nexport const LargePipelineWarning = ({\n  onDisable,\n  onHide,\n  nodes,\n  sidebarVisible,\n  visible,\n}) => {\n  return visible ? (\n    <div\n      className={classnames('kedro', 'pipeline-warning', {\n        'pipeline-warning--sidebar-visible': sidebarVisible,\n      })}\n    >\n      <h2 className=\"pipeline-warning__title\">\n        Whoa, that’s a chonky pipeline!\n      </h2>\n      <p className=\"pipeline-warning__subtitle\">\n        This graph contains <b>{nodes.length}</b> elements, which will take a\n        while to render. You can use the sidebar controls to select a smaller\n        graph.\n      </p>\n      <Button onClick={onHide}>Render it anyway</Button>\n      <Button mode=\"secondary\" onClick={onDisable} size=\"small\">\n        Don't show this again\n      </Button>\n    </div>\n  ) : null;\n};\n\nexport const mapStateToProps = (state) => ({\n  theme: state.theme,\n  sidebarVisible: state.visible.sidebar,\n  nodes: getVisibleNodes(state),\n  visible: getTriggerLargeGraphWarning(state),\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onDisable: () => {\n    dispatch(changeFlag('sizewarning', false));\n  },\n  onHide: () => {\n    dispatch(toggleIgnoreLargeWarning(true));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LargePipelineWarning);\n","import React from 'react';\nimport classnames from 'classnames';\nimport './loading.css';\n\nconst d = 'M 50 50 100 100 50 150 0 100 Z';\n\nconst LoadingIcon = ({ className, visible }) => (\n  <svg\n    className={classnames(className, 'pipeline-loading-icon', {\n      'pipeline-loading-icon--visible': visible,\n    })}\n    viewBox=\"-10 45 120 100\"\n  >\n    <path d={d} />\n    <path d={d} />\n  </svg>\n);\n\nexport default LoadingIcon;\n","import React from 'react';\nimport modifiers from '../../utils/modifiers';\nimport './styles/metadata.css';\n\n/**\n * Shows a metadata value\n */\nconst MetaDataValue = ({\n  container: Container = 'span',\n  className,\n  value,\n  kind,\n  empty,\n}) => (\n  <>\n    <Container\n      title={value}\n      className={modifiers('pipeline-metadata__value', { kind }, className)}\n    >\n      {!value && value !== 0 ? empty : value}\n    </Container>\n  </>\n);\n\nexport default MetaDataValue;\n","import React from 'react';\n\nconst CopyIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M17 1v1h4v16h-4v4H3V6h4V2h4V1h6zM7 8H5v12h10v-2H7V8zm4-4H9v12h10V4h-2v1h-6V4z\" />\n  </svg>\n);\n\nexport default CopyIcon;\n","import React, { useState } from 'react';\nimport modifiers from '../../../utils/modifiers';\nimport MetaDataValue from '../../metadata/metadata-value';\nimport IconButton from '../../ui/icon-button';\nimport CopyIcon from '../../icons/copy';\nimport './command-copier.css';\n\nconst CommandCopier = ({ command }) => {\n  const [showCopied, setShowCopied] = useState(false);\n\n  const onCopyClick = () => {\n    window.navigator.clipboard.writeText(command);\n    setShowCopied(true);\n    setTimeout(() => setShowCopied(false), 1500);\n  };\n\n  return (\n    <div className=\"container\">\n      <MetaDataValue\n        container={'code'}\n        className={modifiers('command-value', {\n          visible: !showCopied,\n        })}\n        value={command}\n      />\n      {window.navigator.clipboard && command && (\n        <>\n          <span\n            className={modifiers('copy-message', {\n              visible: showCopied,\n            })}\n          >\n            Copied to clipboard.\n          </span>\n          <ul className=\"toolbox\">\n            <IconButton\n              ariaLabel=\"Copy run command to clipboard.\"\n              className=\"copy-button\"\n              icon={CopyIcon}\n              onClick={onCopyClick}\n            />\n          </ul>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default CommandCopier;\n","/* \nPlotly templates are defined to override user-specified styles with Kedro-viz styles\nMore details can be found here - https://plotly.com/python/templates/\n*/\n\n/* eslint-disable id-length,camelcase */\n\nconst darkTemplate = {\n  autosize: true,\n  annotationdefaults: {\n    arrowcolor: '#2a3f5f',\n    arrowhead: 0,\n    arrowwidth: 1,\n  },\n  autotypenumbers: 'strict',\n  coloraxis: {\n    autocolorscale: true,\n    colorbar: {\n      thickness: 20,\n      showticklabels: true,\n      ticks: 'outside',\n      tickwidth: 1,\n      tickcolor: 'rgba(255,255,255,0.30)',\n      ticklen: 12,\n      tickfont: {\n        color: 'rgba(255,255,255,0.55)',\n        size: 12,\n      },\n      ticklabelposition: 'outside',\n      title: {\n        font: {\n          color: 'rgba(255,255,255,0.55)',\n          size: 12,\n        },\n      },\n    },\n  },\n  colorscale: {\n    diverging: [\n      'rgb(230,59,90)',\n      'rgb(240,185,186)',\n      'rgb(237,212,213)',\n      'rgb(232,232,232)',\n      'rgb(190,213,236)',\n      'rgb(136,192,240)',\n      'rgb(0,169,244)',\n    ],\n    sequential: [\n      'rgb(0,169,244)',\n      'rgb(60,175,245)',\n      'rgb(148,203,250)',\n      'rgb(195,225,254)',\n      'rgb(214,235,255)',\n    ],\n    sequentialminus: [\n      'rgb(0,169,244)',\n      'rgb(60,175,245)',\n      'rgb(148,203,250)',\n      'rgb(195,225,254)',\n      'rgb(214,235,255)',\n    ],\n  },\n  colorway: [\n    '#00a9f4',\n    '#42459F',\n    '#F4973B',\n    '#E63B5A',\n    '#948DCA',\n    '#769D00',\n    '#1A2E91',\n    '#4F9596',\n    '#F7D02A',\n    '#F07179',\n    '#3C7A34',\n    '#B2DFE1',\n    '#C1BCE5',\n    '#AD544A',\n    '#F4973B',\n    '#B6CD70',\n    '#65A6A8',\n    '#F8E979',\n  ],\n  font: {\n    color: 'rgba(255,255,255,0.55)',\n  },\n  height: null,\n  hoverlabel: {\n    align: 'left',\n  },\n  hovermode: 'closest',\n  legend: {\n    title: {\n      font: {\n        color: 'rgba(255,255,255,0.55)',\n      },\n    },\n    font: {\n      color: 'rgba(255,255,255,0.55)',\n    },\n  },\n  mapbox: {\n    style: 'DARK',\n  },\n  paper_bgcolor: '#111111',\n  plot_bgcolor: '#111111',\n  title: {\n    font: {\n      color: 'rgba(255,255,255,0.85)',\n      size: 16,\n    },\n    xref: 'paper',\n    yref: 'paper',\n    x: 0,\n    xanchor: 'left',\n    yanchor: 'middle',\n  },\n  width: null,\n  xaxis: {\n    automargin: true,\n    gridcolor: 'rgba(255,255,255,0.12)',\n    layer: 'below traces',\n    linewidth: 1,\n    linecolor: 'rgba(255,255,255,0.30)',\n    rangemode: 'normal',\n    showline: true,\n    showticklabels: true,\n    ticks: 'outside',\n    tickwidth: 1,\n    tickcolor: 'rgba(255,255,255,0.30)',\n    ticklen: 12,\n    tickfont: {\n      color: 'rgba(255,255,255,0.55)',\n      size: 12,\n    },\n    ticklabelposition: 'outside',\n    title: {\n      font: {\n        color: 'rgba(255,255,255,0.55)',\n        size: 16,\n      },\n    },\n    zerolinecolor: 'rgba(255,255,255,0.30)',\n    zerolinewidth: 1,\n  },\n  yaxis: {\n    automargin: true,\n    gridcolor: 'rgba(255,255,255,0.12)',\n    layer: 'below traces',\n    linewidth: 1,\n    linecolor: 'rgba(255,255,255,0.30)',\n    rangemode: 'normal',\n    showline: true,\n    showticklabels: true,\n    ticks: 'outside',\n    tickwidth: 1,\n    tickcolor: 'rgba(255,255,255,0.30)',\n    ticklen: 12,\n    tickfont: {\n      color: 'rgba(255,255,255,0.55)',\n      size: 12,\n    },\n    ticklabelposition: 'outside',\n    title: {\n      font: {\n        color: 'rgba(255,255,255,0.55)',\n        size: 16,\n      },\n    },\n    zerolinecolor: 'rgba(255,255,255,0.30)',\n    zerolinewidth: 1,\n  },\n  margin: {\n    l: 72,\n    r: 40,\n    t: 64,\n    b: 72,\n  },\n};\n\nexport const darkPreviewTemplate = {\n  ...darkTemplate,\n  height: 300,\n  margin: {\n    l: 70,\n    r: 40,\n    t: 60,\n    b: 70,\n  },\n  title: {\n    font: {\n      size: 12,\n    },\n    x: 0.09,\n  },\n  showlegend: false,\n  width: 400,\n  xaxis: {\n    ...darkTemplate.xaxis,\n    title: {\n      ...darkTemplate.xaxis.title,\n      font: {\n        ...darkTemplate.xaxis.font,\n        size: 8,\n      },\n    },\n    tickfont: {\n      ...darkTemplate.xaxis.tickfont,\n      size: 8,\n    },\n    nticks: 5,\n  },\n  yaxis: {\n    ...darkTemplate.yaxis,\n    title: {\n      ...darkTemplate.yaxis.title,\n      font: {\n        ...darkTemplate.yaxis.font,\n        size: 8,\n      },\n    },\n    tickfont: {\n      ...darkTemplate.yaxis.tickfont,\n      size: 8,\n    },\n    nticks: 5,\n  },\n};\n\nexport const darkModalTemplate = {\n  ...darkTemplate,\n};\n","/*\nPlotly templates are defined to override user-specified styles with Kedro-viz styles\nMore details can be found here - https://plotly.com/python/templates/\n*/\n\n/* eslint-disable id-length,camelcase */\n\nconst lightTemplate = {\n  autosize: true,\n  annotationdefaults: {\n    arrowcolor: '#2a3f5f',\n    arrowhead: 0,\n    arrowwidth: 1,\n  },\n  autotypenumbers: 'strict',\n  coloraxis: {\n    autocolorscale: true,\n    colorbar: {\n      thickness: 20,\n      showticklabels: true,\n      ticks: 'outside',\n      tickwidth: 1,\n      tickcolor: 'rgba(0,0,0,0.30)',\n      ticklen: 12,\n      tickfont: {\n        color: 'rgba(0,0,0,0.55)',\n        size: 12,\n      },\n      ticklabelposition: 'outside',\n      title: {\n        font: {\n          color: 'rgba(0,0,0,0.55)',\n          size: 12,\n        },\n      },\n    },\n  },\n  colorscale: {\n    diverging: [\n      'rgb(230,59,90)',\n      'rgb(240,185,186)',\n      'rgb(237,212,213)',\n      'rgb(232,232,232)',\n      'rgb(190,213,236)',\n      'rgb(136,192,240)',\n      'rgb(0,169,244)',\n    ],\n    sequential: [\n      'rgb(0,169,244)',\n      'rgb(60,175,245)',\n      'rgb(148,203,250)',\n      'rgb(195,225,254)',\n      'rgb(214,235,255)',\n    ],\n    sequentialminus: [\n      'rgb(0,169,244)',\n      'rgb(60,175,245)',\n      'rgb(148,203,250)',\n      'rgb(195,225,254)',\n      'rgb(214,235,255)',\n    ],\n  },\n  colorway: [\n    '#00a9f4',\n    '#42459F',\n    '#F4973B',\n    '#E63B5A',\n    '#948DCA',\n    '#769D00',\n    '#1A2E91',\n    '#4F9596',\n    '#F7D02A',\n    '#F07179',\n    '#3C7A34',\n    '#B2DFE1',\n    '#C1BCE5',\n    '#AD544A',\n    '#F4973B',\n    '#B6CD70',\n    '#65A6A8',\n    '#F8E979',\n  ],\n  font: {\n    color: 'rgba(0,0,0,0.55)',\n  },\n  height: null,\n  hoverlabel: {\n    align: 'left',\n  },\n  hovermode: 'closest',\n  legend: {\n    title: {\n      font: {\n        color: 'rgba(0,0,0,0.55)',\n      },\n    },\n    font: {\n      color: 'rgba(0,0,0,0.55)',\n    },\n  },\n  mapbox: {\n    style: 'light',\n  },\n  paper_bgcolor: '#EEEEEE',\n  plot_bgcolor: '#EEEEEE',\n  title: {\n    font: {\n      color: 'rgba(0,0,0,0.85)',\n      size: 16,\n    },\n    xref: 'paper',\n    yref: 'paper',\n    x: 0,\n    xanchor: 'left',\n    yanchor: 'middle',\n  },\n  width: null,\n  xaxis: {\n    automargin: true,\n    gridcolor: 'rgba(0,0,0,0.12)',\n    layer: 'below traces',\n    linewidth: 1,\n    linecolor: 'rgba(0,0,0,0.30)',\n    rangemode: 'normal',\n    showline: true,\n    showticklabels: true,\n    ticks: 'outside',\n    tickwidth: 1,\n    tickcolor: 'rgba(0,0,0,0.30)',\n    ticklen: 12,\n    tickfont: {\n      color: 'rgba(0,0,0,0.55)',\n      size: 12,\n    },\n    ticklabelposition: 'outside',\n    title: {\n      font: {\n        color: 'rgba(0,0,0,0.55)',\n        size: 16,\n      },\n    },\n    zerolinecolor: 'rgba(0,0,0,0.30)',\n    zerolinewidth: 1,\n  },\n  yaxis: {\n    automargin: true,\n    gridcolor: 'rgba(0,0,0,0.12)',\n    layer: 'below traces',\n    linewidth: 1,\n    linecolor: 'rgba(0,0,0,0.30)',\n    rangemode: 'normal',\n    showline: true,\n    showticklabels: true,\n    ticks: 'outside',\n    tickwidth: 1,\n    tickcolor: 'rgba(0,0,0,0.30)',\n    ticklen: 12,\n    tickfont: {\n      color: 'rgba(0,0,0,0.55)',\n      size: 12,\n    },\n    ticklabelposition: 'outside',\n    title: {\n      font: {\n        color: 'rgba(0,0,0,0.55)',\n        size: 16,\n      },\n    },\n    zerolinecolor: 'rgba(0,0,0,0.30)',\n    zerolinewidth: 1,\n  },\n  margin: {\n    l: 72,\n    r: 40,\n    t: 64,\n    b: 72,\n  },\n};\n\nexport const lightPreviewTemplate = {\n  ...lightTemplate,\n  height: 300,\n  margin: {\n    l: 70,\n    r: 40,\n    t: 60,\n    b: 70,\n  },\n  showlegend: false,\n  width: 400,\n  title: {\n    font: {\n      size: 12,\n    },\n    x: 0.09,\n  },\n  xaxis: {\n    ...lightTemplate.xaxis,\n    title: {\n      ...lightTemplate.xaxis.title,\n      font: {\n        ...lightTemplate.xaxis.font,\n        size: 8,\n      },\n    },\n    tickfont: {\n      ...lightTemplate.xaxis.tickfont,\n      size: 8,\n    },\n    nticks: 5,\n  },\n  yaxis: {\n    ...lightTemplate.yaxis,\n    title: {\n      ...lightTemplate.yaxis.title,\n      font: {\n        ...lightTemplate.yaxis.font,\n        size: 8,\n      },\n    },\n    tickfont: {\n      ...lightTemplate.yaxis.tickfont,\n      size: 8,\n    },\n    nticks: 5,\n  },\n};\n\nexport const lightModalTemplate = {\n  ...lightTemplate,\n};\n","import React from 'react';\nimport createPlotlyComponent from 'react-plotly.js/factory';\nimport Plotly from 'plotly.js-cartesian-dist';\nimport deepmerge from 'deepmerge';\nimport { connect } from 'react-redux';\nimport './plotly-chart.css';\nimport {\n  darkPreviewTemplate,\n  darkModalTemplate,\n} from '../../utils/plot-templates/dark';\nimport {\n  lightPreviewTemplate,\n  lightModalTemplate,\n} from '../../utils/plot-templates/light';\n\n/**\n * Display plotly chart\n * @param {object} chartSize Chart dimensions in pixels\n * @param {object} targetRect event.target.getBoundingClientRect()\n * @param {boolean} visible Whether to show the tooltip\n * @param {string} text Tooltip display label\n */\n\nconst Plot = createPlotlyComponent(Plotly);\n\nconst PlotlyChart = ({ theme, view, data = [], layout = {} }) => {\n  const plotConfig = view === 'preview' ? { staticPlot: true } : undefined;\n\n  return (\n    <div className=\"pipeline-plotly-chart\">\n      <Plot\n        data={data}\n        layout={updateLayout(theme, view, layout)}\n        config={plotConfig}\n        style={{ width: '100%', height: '100%' }}\n        useResizeHandler={true}\n      />\n    </div>\n  );\n};\n\nconst updateLayout = (theme, view, layout) => {\n  if (theme === 'dark') {\n    if (view === 'modal') {\n      return deepmerge(layout, darkModalTemplate);\n    } else {\n      return deepmerge(layout, darkPreviewTemplate);\n    }\n  } else {\n    if (view === 'modal') {\n      return deepmerge(layout, lightModalTemplate);\n    } else {\n      return deepmerge(layout, lightPreviewTemplate);\n    }\n  }\n};\n\nconst mapStateToProps = (state) => ({\n  theme: state.theme,\n});\n\nexport default connect(mapStateToProps)(PlotlyChart);\n","import PlotlyChart from './plotly-chart';\n\nexport default PlotlyChart;\n","import React from 'react';\n\nconst ExpandIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M21 5v16H5v-8h2v6h12V7h-6.116V5H21zM8 3v2H6.415l6.292 6.293-1.414 1.414L5 6.415V8H3V3h5z\" />\n  </svg>\n);\n\nexport default ExpandIcon;\n","import React, { useState, useEffect } from 'react';\nimport modifiers from '../../utils/modifiers';\nimport MetaDataValue from './metadata-value';\nimport './styles/metadata.css';\n\n/**\n * Shows a list of MetaDataValue\n */\nconst MetaDataList = ({\n  property,\n  values = [],\n  kind = 'text',\n  empty = '-',\n  inline = true,\n  commas = true,\n  limit = false,\n}) => {\n  const [expanded, setExpanded] = useState(false);\n  const showValues = !expanded && limit ? values.slice(0, limit) : values;\n  const remainder = values.length - showValues.length;\n\n  // Default to not expanded when values change\n  useEffect(() => setExpanded(false), [values]);\n\n  return values.length > 0 ? (\n    <>\n      <ul\n        className={modifiers('pipeline-metadata__value-list', {\n          inline,\n          commas,\n        })}\n      >\n        {showValues.map((item, index) => (\n          <li key={index}>\n            <MetaDataValue\n              value={property ? item[property] : item}\n              kind={kind}\n              empty={empty}\n            />\n          </li>\n        ))}\n      </ul>\n      {remainder > 0 ? (\n        <button\n          className=\"pipeline-metadata__value-list-expand\"\n          aria-expanded={expanded}\n          onClick={() => setExpanded(true)}\n        >\n          + {remainder} more\n        </button>\n      ) : null}\n    </>\n  ) : (\n    <MetaDataValue empty={empty} />\n  );\n};\n\nexport default MetaDataList;\n","/*\n * To apply custom theme to react-json-view objects, we need to follow thier base 16 theme styling guidelines\n * indicated here - https://github.com/chriskempson/base16/blob/master/styling.md and implemented below.\n */\n\nexport const darkjsonViewerTheme = {\n  base00: '#122531',\n  base01: '#122531',\n  base02: '#122531',\n  base03: '#122531',\n  base04: 'rgba(255,255,255,0.35)',\n  base05: '#122531',\n  base06: '#122531',\n  base07: 'rgba(255,255,255,0.85)',\n  base08: '#122531',\n  base09: '#ffbc00',\n  base0A: '#122531',\n  base0B: 'rgba(255,255,255,0.85)',\n  base0C: 'rgba(255,255,255,0.85)',\n  base0D: '#00b0f5',\n  base0E: '#dcc6e0',\n  base0F: 'rgba(255,255,255,0.85)',\n};\n\nexport const lightjsonViewerTheme = {\n  base00: '#f0f1f3',\n  base01: '#f0f1f3',\n  base02: '#f0f1f3',\n  base03: '#f0f1f3',\n  base04: 'rgba(0,0,0,0.55)',\n  base05: '#f0f1f3',\n  base06: '#f0f1f3',\n  base07: 'rgba(0,0,0,0.85)',\n  base08: '#f0f1f3',\n  base09: '#a000bc',\n  base0A: '#f0f1f3',\n  base0B: 'rgba(0,0,0,0.85)',\n  base0C: 'rgba(0,0,0,0.85)',\n  base0D: '#00b0f5',\n  base0E: '#7928a1',\n  base0F: 'rgba(0,0,0,0.85)',\n};\n","import React from 'react';\nimport modifiers from '../../utils/modifiers';\nimport './styles/metadata.css';\nimport ReactJson from 'react-json-view';\nimport {\n  darkjsonViewerTheme,\n  lightjsonViewerTheme,\n} from './metadata-parameters-theme';\n\n/**\n * Shows a metadata object\n */\nconst MetaDataObject = ({ className, value, kind, theme, empty }) => (\n  <div className={modifiers('pipeline-metadata__object', { kind }, className)}>\n    {Object.keys(value).length === 0 ? (\n      empty\n    ) : (\n      <ReactJson\n        theme={theme === 'dark' ? darkjsonViewerTheme : lightjsonViewerTheme}\n        name={false}\n        indentWidth={1}\n        collapsed={1}\n        collapseStringsAfterLength={true}\n        enableClipboard={true}\n        displayDataTypes={false}\n        src={value}\n      />\n    )}\n  </div>\n);\n\nexport default MetaDataObject;\n","import React from 'react';\nimport MetaDataList from './metadata-list';\nimport MetaDataObject from './metadata-object';\nimport MetaDataValue from './metadata-value';\nimport './styles/metadata.css';\n\n/**\n * Shows metadata label and a given single value, or a list of values, or child elements\n */\nconst MetaDataRow = ({\n  label,\n  theme,\n  property,\n  value,\n  kind = 'text',\n  empty = '-',\n  visible = true,\n  inline = true,\n  commas = true,\n  limit = false,\n  children,\n}) => {\n  const showList = Array.isArray(value);\n  const showObject = typeof value === 'object' && value !== null && !showList;\n  return (\n    visible && (\n      <>\n        <dt className=\"pipeline-metadata__label\">{label}</dt>\n        <dd className=\"pipeline-metadata__row\" data-label={label}>\n          {showList && (\n            <MetaDataList\n              property={property}\n              inline={inline}\n              commas={commas}\n              kind={kind}\n              empty={empty}\n              values={value}\n              limit={limit}\n            />\n          )}\n          {!showList && !showObject && !children && (\n            <MetaDataValue\n              value={value}\n              kind={kind}\n              empty={empty}\n              theme={theme}\n            />\n          )}\n          {showObject && (\n            <MetaDataObject\n              value={value}\n              kind={kind}\n              theme={theme}\n              empty={empty}\n            />\n          )}\n          {children}\n        </dd>\n      </>\n    )\n  );\n};\n\nexport default MetaDataRow;\n","import React, { useRef, useMemo } from 'react';\nimport { connect } from 'react-redux';\nimport hljs from 'highlight.js/lib/core';\nimport python from 'highlight.js/lib/languages/python';\nimport yaml from 'highlight.js/lib/languages/yaml';\nimport javascript from 'highlight.js/lib/languages/javascript';\nimport modifiers from '../../utils/modifiers';\nimport './styles/metadata-code.css';\n\nhljs.registerLanguage('python', python);\nhljs.registerLanguage('yaml', yaml);\nhljs.registerLanguage('javascript', javascript);\n\n/**\n * A highlighted code panel\n */\nexport const MetaDataCode = ({\n  sidebarVisible,\n  visible = true,\n  value = '',\n}) => {\n  const codeRef = useRef();\n\n  const highlighted = useMemo(() => {\n    const detected = hljs.highlightAuto(value);\n    const language = detected.language || detected.second_best.language;\n    return language ? hljs.highlight(value, { language }).value : value;\n  }, [value]);\n\n  return (\n    <div\n      className={modifiers(\n        'pipeline-metadata-code',\n        { visible, sidebarVisible },\n        'kedro'\n      )}\n    >\n      <h2 className=\"pipeline-metadata-code__title\">Code block</h2>\n      <code className=\"pipeline-metadata-code__code\">\n        <pre ref={codeRef} dangerouslySetInnerHTML={{ __html: highlighted }} />\n      </code>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  sidebarVisible: state.visible.sidebar,\n});\n\nexport default connect(mapStateToProps)(MetaDataCode);\n","import Toggle from './toggle';\n\nexport default Toggle;\n","import React from 'react';\nimport classnames from 'classnames';\nimport modifiers from '../../../utils/modifiers';\nimport './toggle.css';\n\n/**\n * Shows a toggle button for code panel\n */\nconst Toggle = ({\n  id = '',\n  checked,\n  enabled = true,\n  title,\n  onChange,\n  className = '',\n}) => (\n  <div\n    className={modifiers(classnames('pipeline-toggle', className), {\n      enabled,\n    })}\n  >\n    <input\n      id={`pipeline-toggle-input-${id}`}\n      className=\"pipeline-toggle-input\"\n      type=\"checkbox\"\n      checked={checked}\n      disabled={!enabled}\n      onChange={onChange}\n    />\n    <label\n      className={modifiers('pipeline-toggle-label', {\n        checked: enabled && checked,\n      })}\n      htmlFor={`pipeline-toggle-input-${id}`}\n    >\n      {title}\n    </label>\n  </div>\n);\n\nexport default Toggle;\n","import MetaData from './metadata';\n\nexport default MetaData;\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport modifiers from '../../utils/modifiers';\nimport NodeIcon from '../../components/icons/node-icon';\nimport IconButton from '../../components/ui/icon-button';\nimport CommandCopier from '../ui/command-copier/command-copier';\nimport PlotlyChart from '../plotly-chart';\nimport CloseIcon from '../icons/close';\nimport ExpandIcon from '../icons/expand';\nimport MetaDataRow from './metadata-row';\nimport MetaDataCode from './metadata-code';\nimport Toggle from '../ui/toggle';\nimport {\n  getVisibleMetaSidebar,\n  getClickedNodeMetaData,\n} from '../../selectors/metadata';\nimport { toggleNodeClicked } from '../../actions/nodes';\nimport { toggleCode, togglePlotModal } from '../../actions';\nimport getShortType from '../../utils/short-type';\nimport './styles/metadata.css';\n\n/**\n * Shows node meta data\n */\nconst MetaData = ({\n  visible = true,\n  metadata,\n  theme,\n  visibleCode,\n  onToggleCode,\n  onToggleNodeSelected,\n  onTogglePlotModal,\n}) => {\n  // Hide code panel when selected metadata changes\n  useEffect(() => onToggleCode(false), [metadata, onToggleCode]);\n  // Hide plot modal when selected metadata changes\n  useEffect(() => onTogglePlotModal(false), [metadata, onTogglePlotModal]);\n  const isTaskNode = metadata?.type === 'task';\n  const isDataNode = metadata?.type === 'data';\n  const isParametersNode = metadata?.type === 'parameters';\n  const nodeTypeIcon = getShortType(metadata?.datasetType, metadata?.type);\n  const hasPlot = Boolean(metadata?.plot);\n  const hasTrackingData = Boolean(metadata?.trackingData);\n  const hasCode = Boolean(metadata?.code);\n  const isTranscoded = Boolean(metadata?.originalType);\n  const showCodePanel = visible && visibleCode && hasCode;\n  const showCodeSwitch = hasCode;\n  let runCommand = metadata?.runCommand;\n  if (!runCommand) {\n    // provide a help text for user to know why the run command is not available for the task node\n    runCommand = isTaskNode\n      ? 'Please provide a name argument for this node in order to see a run command.'\n      : null;\n  }\n\n  const onCloseClick = () => {\n    // Deselecting a node automatically hides MetaData panel\n    onToggleNodeSelected(null);\n  };\n\n  const onExpandPlotClick = () => {\n    onTogglePlotModal(true);\n  };\n\n  return (\n    <>\n      <MetaDataCode visible={showCodePanel} value={metadata?.code} />\n      <div className={modifiers('pipeline-metadata', { visible }, 'kedro')}>\n        {metadata && (\n          <>\n            <div className=\"pipeline-metadata__header-toolbox\">\n              <div className=\"pipeline-metadata__header\">\n                <NodeIcon\n                  className=\"pipeline-metadata__icon\"\n                  icon={nodeTypeIcon}\n                />\n                <h2\n                  className=\"pipeline-metadata__title\"\n                  dangerouslySetInnerHTML={{ __html: metadata.name }}\n                />\n              </div>\n              <IconButton\n                container={React.Fragment}\n                ariaLabel=\"Close Metadata Panel\"\n                className={modifiers('pipeline-metadata__close-button', {\n                  hasCode,\n                })}\n                icon={CloseIcon}\n                onClick={onCloseClick}\n              />\n              {showCodeSwitch && (\n                <Toggle\n                  id=\"code\"\n                  checked={visibleCode}\n                  enabled={hasCode}\n                  title=\"Show Code\"\n                  onChange={(event) => {\n                    onToggleCode(event.target.checked);\n                  }}\n                />\n              )}\n            </div>\n            <div className=\"pipeline-metadata__list\">\n              <dl className=\"pipeline-metadata__properties\">\n                <MetaDataRow label=\"Type:\" value={metadata.type} />\n                {!isTranscoded && (\n                  <MetaDataRow\n                    label=\"Dataset Type:\"\n                    visible={isDataNode}\n                    kind=\"type\"\n                    value={metadata.datasetType}\n                  />\n                )}\n                {isTranscoded && (\n                  <>\n                    <MetaDataRow\n                      label=\"Original Type:\"\n                      visible={isDataNode}\n                      kind=\"type\"\n                      value={metadata.originalType}\n                    />\n                    <MetaDataRow\n                      label=\"Transcoded Types:\"\n                      visible={isDataNode}\n                      kind=\"type\"\n                      value={metadata.transcodedTypes}\n                    />\n                  </>\n                )}\n                <MetaDataRow\n                  label=\"File Path:\"\n                  kind=\"path\"\n                  value={metadata.filepath}\n                />\n                {hasTrackingData && (\n                  <MetaDataRow\n                    label=\"Tracking data from last run:\"\n                    theme={theme}\n                    visible={isDataNode}\n                    kind=\"trackingData\"\n                    commas={false}\n                    inline={false}\n                    value={metadata.trackingData}\n                  />\n                )}\n                <MetaDataRow\n                  label=\"Parameters:\"\n                  theme={theme}\n                  visible={isParametersNode || isTaskNode}\n                  kind=\"parameters\"\n                  commas={false}\n                  inline={false}\n                  value={metadata.parameters}\n                  limit={10}\n                />\n                <MetaDataRow\n                  label=\"Inputs:\"\n                  visible={isTaskNode}\n                  value={metadata.inputs}\n                />\n                <MetaDataRow\n                  label=\"Outputs:\"\n                  visible={isTaskNode}\n                  value={metadata.outputs}\n                />\n                <MetaDataRow\n                  label=\"Tags:\"\n                  kind=\"token\"\n                  commas={false}\n                  value={metadata.tags}\n                />\n                <MetaDataRow\n                  label=\"Pipeline:\"\n                  visible={Boolean(metadata.pipeline)}\n                  value={metadata.pipeline}\n                />\n                <MetaDataRow label=\"Run Command:\" visible={Boolean(runCommand)}>\n                  <CommandCopier command={runCommand} />\n                </MetaDataRow>\n              </dl>\n              {hasPlot && (\n                <>\n                  <div\n                    className=\"pipeline-metadata__plot\"\n                    onClick={onExpandPlotClick}\n                  >\n                    <PlotlyChart\n                      data={metadata.plot.data}\n                      layout={metadata.plot.layout}\n                      view=\"preview\"\n                    />\n                  </div>\n                  <button\n                    className=\"pipeline-metadata__expand-plot\"\n                    onClick={onExpandPlotClick}\n                  >\n                    <ExpandIcon className=\"pipeline-metadata__expand-plot-icon\"></ExpandIcon>\n                    <span className=\"pipeline-metadata__expand-plot-text\">\n                      Expand Plotly Visualization\n                    </span>\n                  </button>\n                </>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport const mapStateToProps = (state, ownProps) => ({\n  visible: getVisibleMetaSidebar(state),\n  metadata: getClickedNodeMetaData(state),\n  theme: state.theme,\n  visibleCode: state.visible.code,\n  ...ownProps,\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onToggleNodeSelected: (nodeID) => {\n    dispatch(toggleNodeClicked(nodeID));\n  },\n  onToggleCode: (visible) => {\n    dispatch(toggleCode(visible));\n  },\n  onTogglePlotModal: (visible) => {\n    dispatch(togglePlotModal(visible));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MetaData);\n","import React from 'react';\n\nconst CollapseIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M21 3v18H3v-9.133h2V19h14V5h-7V3h9zm-16.293.293L11 9.586V8h2v5H8v-2h1.586L3.293 4.707l1.414-1.414z\" />\n  </svg>\n);\n\nexport default CollapseIcon;\n","import React from 'react';\n\nconst BackIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M14.312 5.244c.387.336.454.905.172 1.318l-.071.093-3.574 4.122 31.684-.058c.552-.001 1 .446 1.002.998 0 .513-.385.936-.882.995l-.117.007-31.323.058 3.225 3.9c.326.395.298.967-.048 1.328l-.086.08c-.395.326-.967.298-1.328-.048l-.08-.086-5.326-6.443L12.9 5.345c.362-.417.994-.462 1.41-.1z\" />\n  </svg>\n);\n\nexport default BackIcon;\n","import PlotlyModal from './plotly-modal';\n\nexport default PlotlyModal;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PlotlyChart from '../plotly-chart';\nimport CollapseIcon from '../icons/collapse';\nimport BackIcon from '../icons/back';\nimport NodeIcon from '../../components/icons/node-icon';\nimport { togglePlotModal } from '../../actions';\nimport getShortType from '../../utils/short-type';\nimport { getClickedNodeMetaData } from '../../selectors/metadata';\nimport './plotly-modal.css';\n\nconst PlotlyModal = ({ metadata, onToggle, visible }) => {\n  const nodeTypeIcon = getShortType(metadata?.datasetType, metadata?.type);\n\n  const onCollapsePlotClick = () => {\n    onToggle(false);\n  };\n  if (!visible.plotModal || !metadata?.plot) {\n    return null;\n  }\n  return (\n    <div className=\"pipeline-plotly-modal\">\n      <div className=\"pipeline-plot-modal__top\">\n        <button\n          className=\"pipeline-plot-modal__back\"\n          onClick={onCollapsePlotClick}\n        >\n          <BackIcon className=\"pipeline-plot-modal__back-icon\"></BackIcon>\n          <span className=\"pipeline-plot-modal__back-text\">Back</span>\n        </button>\n        <div className=\"pipeline-plot-modal__header\">\n          <NodeIcon className=\"pipeline-plot-modal__icon\" icon={nodeTypeIcon} />\n          <span className=\"pipeline-plot-modal__title\">{metadata.name}</span>\n        </div>\n      </div>\n      <PlotlyChart\n        data={metadata.plot.data}\n        layout={metadata.plot.layout}\n        view=\"modal\"\n      />\n      <div className=\"pipeline-plot-modal__bottom\">\n        <button\n          className=\"pipeline-plot-modal__collapse-plot\"\n          onClick={onCollapsePlotClick}\n        >\n          <CollapseIcon className=\"pipeline-plot-modal__collapse-plot-icon\"></CollapseIcon>\n          <span className=\"pipeline-plot-modal__collapse-plot-text\">\n            Collapse Plotly Visualization\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport const mapStateToProps = (state) => ({\n  visible: state.visible,\n  metadata: getClickedNodeMetaData(state),\n  theme: state.theme,\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onToggle: (value) => {\n    dispatch(togglePlotModal(value));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotlyModal);\n","import gql from 'graphql-tag';\nimport { useMutation } from '@apollo/client';\n\nexport const UPDATE_RUN_DETAILS = gql`\n  mutation updateRunDetails($runId: ID!, $runInput: RunInput!) {\n    updateRunDetails(runId: $runId, runInput: $runInput) {\n      ... on UpdateRunDetailsFailure {\n        errorMessage\n        id\n      }\n      ... on UpdateRunDetailsSuccess {\n        run {\n          bookmark\n          id\n          notes\n          title\n        }\n      }\n    }\n  }\n`;\n\nexport const useUpdateRunDetails = () => {\n  const [_updateRunDetails, { error, loading, reset }] =\n    useMutation(UPDATE_RUN_DETAILS);\n\n  return {\n    updateRunDetails: function (variables) {\n      _updateRunDetails({ variables });\n    },\n    error,\n    loading,\n    reset,\n  };\n};\n","import React from 'react';\n\nconst PencilIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M22 20v2H2v-2h20zM18.707 2.293l3 3a1 1 0 0 1 0 1.414l-11 11A1 1 0 0 1 10 18H7a1 1 0 0 1-1-1v-3a1 1 0 0 1 .293-.707l11-11a1 1 0 0 1 1.414 0zM15.5 7 8 14.414V16h1.586L17 8.5 15.5 7zm2.498-2.491L17 5.5 18.5 7l.95-.978-1.452-1.513z\" />\n  </svg>\n);\n\nexport default PencilIcon;\n","import React from 'react';\n\nconst BookmarkIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M17 4v16l-5-3-5 3V4z\" />\n  </svg>\n);\n\nexport default BookmarkIcon;\n","import React from 'react';\n\nconst ExportIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M5 16v4h14v-4h2v4c0 1-.8 2-1.9 2H5a2 2 0 01-2-2v-4h2zm8-14v11l3.5-3.5L18 11l-6 6-6-6 1.5-1.5L11 13V2h2z\" />\n  </svg>\n);\n\nexport default ExportIcon;\n","import React from 'react';\n\nconst BookmarkStrokeIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M18 21V3H6v18l6-4 6 4zM8 5h8v12.262l-4-2.666-4 2.666V5z\" />\n  </svg>\n);\n\nexport default BookmarkStrokeIcon;\n","import React from 'react';\n\nconst MenuIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M10.667 5 12 6.4 6.667 12 12 17.6 10.667 19 4 12l6.667-7zm8 0L20 6.4 14.667 12 20 17.6 18.667 19 12 12l6.667-7z\" />\n  </svg>\n);\n\nexport default MenuIcon;\n","import PrimaryToolbar from './primary-toolbar';\n\nexport default PrimaryToolbar;\n","import React from 'react';\nimport classnames from 'classnames';\nimport IconButton from '../ui/icon-button';\nimport MenuIcon from '../icons/menu';\n\nimport './primary-toolbar.css';\n\n/**\n * Toolbar to house buttons that controls display options for the main panel (flowchart, experiment details, etc)\n * @param {JSX} children The content to be rendered within the toolbar\n * @param {Function} onToggleSidebar Handle toggling of sidebar collapsable view\n * @param {Boolean} visible Handle display of tooltip text in relation to collapsable view\n */\nexport const PrimaryToolbar = ({\n  children,\n  displaySidebar,\n  onToggleSidebar,\n  visible = { sidebar: true },\n}) => (\n  <>\n    <ul className=\"pipeline-primary-toolbar kedro\">\n      {displaySidebar && (\n        <IconButton\n          ariaLabel={`${visible.sidebar ? 'Hide' : 'Show'} menu`}\n          className={classnames(\n            'pipeline-menu-button',\n            'pipeline-menu-button--menu',\n            {\n              'pipeline-menu-button--inverse': !visible.sidebar,\n            }\n          )}\n          onClick={() => onToggleSidebar(!visible.sidebar)}\n          icon={MenuIcon}\n          labelText={`${visible.sidebar ? 'Hide' : 'Show'} menu`}\n        />\n      )}\n      {children}\n    </ul>\n  </>\n);\n\nexport default PrimaryToolbar;\n","import React from 'react';\n\nconst ShowChangesIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <g>\n      <path d=\"M7.5,6 L7.5,17.25 L10.625,14.125 L12,15.5 L6.5,21 L1,15.5 L2.375,14.125 L5.5,17.25 L5.5,6 L7.5,6 Z M17.5,3 L23,8.5 L21.625,9.875 L18.5,6.75 L18.5,18 L16.5,18 L16.5,6.75 L13.375,9.875 L12,8.5 L17.5,3 Z\" />\n    </g>\n  </svg>\n);\n\nexport default ShowChangesIcon;\n","/**\n * Take a value and return a meaningful value for display on experiment tracking tables\n * @param {value} value The value to be sanitized\n * @returns A sanitized value\n */\nexport const sanitizeValue = (value) => {\n  if (value === '' || value === null || value === undefined) {\n    return '-';\n  } else if (typeof value === 'object' || typeof value === 'boolean') {\n    return JSON.stringify(value);\n  }\n\n  return value;\n};\n\n/**\n * Takes a set of run metadata and run tracking data to construct the array object for csv export\n * @param {array} runMetadata The set of runMetadata\n * @param {array} runTrackingData The set of runTrackingData\n * @returns An array formatted for CSV export\n */\nexport const constructExportData = (runMetadata, runTrackingData) => {\n  let csvData = [];\n  if (runMetadata && runTrackingData) {\n    // obtain runMetadata\n    const runTitle = runMetadata?.map((run) => sanitizeValue(run.title));\n    const createdBy = runMetadata?.map((run) => sanitizeValue(run.author));\n    const gitSha = runMetadata?.map((run) => sanitizeValue(run.gitSha));\n    const gitBranch = runMetadata?.map((run) => sanitizeValue(run.gitBranch));\n    const runCommand = runMetadata?.map((run) => sanitizeValue(run.runCommand));\n    const notes = runMetadata?.map((run) => sanitizeValue(run.notes));\n\n    csvData.push(\n      ['Title', ...runTitle],\n      ['Created By', ...createdBy],\n      ['Git SHA', ...gitSha],\n      ['Git Branch', ...gitBranch],\n      ['Run Command', ...runCommand],\n      ['Notes', ...notes]\n    );\n\n    // create empty line between metadata fields and tracking data fields\n    csvData.push([]);\n\n    runTrackingData.forEach((trackingDataset) => {\n      const { datasetName, data } = trackingDataset;\n      const dataKeyNames = Object.keys(data);\n\n      csvData.push([datasetName]);\n\n      dataKeyNames.forEach((key) => {\n        let keyData = [key];\n\n        data[key].forEach((datafield) => keyData.push(datafield.value));\n        csvData.push(keyData);\n      });\n\n      csvData.push([]);\n    });\n  }\n  return csvData;\n};\n\n/**\n * Take a the runMetadata list to generate a meaningful file name for csv export\n * @param {array} runMetadata The set of runMetadata to be exported\n * @returns A string to be used as the file name\n */\nexport const generateCSVFileName = (runMetadata) => {\n  let filename = 'rundata';\n  runMetadata?.forEach((run) => (filename += `-${run.id}`));\n  filename += '.csv';\n  return filename;\n};\n","import ExperimentPrimaryToolbar from './experiment-primary-toolbar';\n\nexport default ExperimentPrimaryToolbar;\n","import React, { useCallback, useState } from 'react';\nimport { CSVLink } from 'react-csv';\nimport { useUpdateRunDetails } from '../../../apollo/mutations';\nimport IconButton from '../../ui/icon-button';\nimport PencilIcon from '../../icons/pencil';\nimport BookmarkIcon from '../../icons/bookmark';\nimport ExportIcon from '../../icons/export';\nimport BookmarkStrokeIcon from '../../icons/bookmark-stroke';\nimport PrimaryToolbar from '../../primary-toolbar';\nimport ShowChangesIcon from '../../icons/show-changes';\nimport { constructExportData } from '../../../utils/experiment-tracking-utils';\n\nexport const ExperimentPrimaryToolbar = ({\n  enableComparisonView,\n  enableShowChanges,\n  runMetadata,\n  runTrackingData,\n  selectedRunData,\n  setEnableShowChanges,\n  setSidebarVisible,\n  showChangesIconDisabled,\n  showRunDetailsModal,\n  sidebarVisible,\n}) => {\n  const { updateRunDetails } = useUpdateRunDetails();\n  const [exportData, setExportData] = useState([]);\n\n  const toggleBookmark = () => {\n    updateRunDetails({\n      runId: selectedRunData.id,\n      runInput: { bookmark: !selectedRunData?.bookmark },\n    });\n  };\n\n  const updateExportData = useCallback(() => {\n    setExportData(constructExportData(runMetadata, runTrackingData));\n  }, [runMetadata, runTrackingData]);\n\n  return (\n    <PrimaryToolbar\n      visible={{ sidebar: sidebarVisible }}\n      onToggleSidebar={setSidebarVisible}\n    >\n      <IconButton\n        ariaLive=\"Toggle run bookmark\"\n        className={'pipeline-menu-button--labels'}\n        icon={selectedRunData?.bookmark ? BookmarkIcon : BookmarkStrokeIcon}\n        labelText={`${selectedRunData?.bookmark ? 'Unbookmark' : 'Bookmark'}`}\n        onClick={() => toggleBookmark()}\n        visible={!enableComparisonView}\n      />\n      <IconButton\n        ariaLive=\"Edit run details\"\n        className={'pipeline-menu-button--labels'}\n        icon={PencilIcon}\n        labelText={`Edit details`}\n        onClick={() => showRunDetailsModal(true)}\n        visible={!enableComparisonView}\n      />\n      <IconButton\n        ariaLive=\"polite\"\n        className={'pipeline-menu-button--labels'}\n        onClick={() => setEnableShowChanges(!enableShowChanges)}\n        icon={ShowChangesIcon}\n        labelText={\n          !showChangesIconDisabled\n            ? `${enableShowChanges ? 'Disable' : 'Enable'} show changes`\n            : null\n        }\n        visible={enableComparisonView}\n        disabled={showChangesIconDisabled}\n      />\n      <CSVLink\n        data={exportData}\n        asyncOnClick={true}\n        onClick={updateExportData}\n        filename=\"run-data.csv\"\n      >\n        <IconButton\n          ariaLabel=\"Export graph as SVG or PNG\"\n          className={'pipeline-menu-button--export'}\n          icon={ExportIcon}\n          labelText=\"Export run data\"\n        />\n      </CSVLink>\n    </PrimaryToolbar>\n  );\n};\n\nexport default ExperimentPrimaryToolbar;\n","import React from 'react';\n\nconst LabelIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M22 3v18H8.333L2 12l6.333-9H22zm-6.155 4h-3.69L10 17h1.944l.38-1.809h3.352l.38 1.809H18L15.845 7zm-1.507 1.676l.972 4.75h-2.62l.972-4.75h.676z\" />\n  </svg>\n);\n\nexport default LabelIcon;\n","import React from 'react';\n\nconst LayersIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M12 3l9 4.82-3.6 2.07 3.6 1.93-3.6 2.07 3.6 1.93L12 21l-9-5.18 3.6-1.93L3 11.82 6.6 9.9 3 7.82 12 3zM8.72 15.11l-1.45.78L12 18.6l4.73-2.72-1.45-.78L12 17l-3.28-1.89zm0-4l-1.45.78L12 14.6l4.73-2.72-1.45-.78L12 13l-3.28-1.89zM12 5.35L7.27 7.9 12 10.6l4.73-2.72L12 5.36z\" />\n  </svg>\n);\n\nexport default LayersIcon;\n","import FlowchartPrimaryToolbar from './flowchart-primary-toolbar';\n\nexport default FlowchartPrimaryToolbar;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  toggleExportModal,\n  toggleLayers,\n  toggleSidebar,\n  toggleTextLabels,\n} from '../../actions';\nimport IconButton from '../ui/icon-button';\nimport LabelIcon from '../icons/label';\nimport ExportIcon from '../icons/export';\nimport LayersIcon from '../icons/layers';\nimport PrimaryToolbar from '../primary-toolbar';\nimport { getVisibleLayerIDs } from '../../selectors/disabled';\n\n/**\n * Main controls for filtering the chart data\n * @param {Function} onToggleTextLabels Handle toggling text labels on/off\n * @param {Boolean} textLabels Whether text labels are displayed\n */\nexport const FlowchartPrimaryToolbar = ({\n  disableLayerBtn,\n  displaySidebar,\n  onToggleExportModal,\n  onToggleLayers,\n  onToggleSidebar,\n  onToggleTextLabels,\n  textLabels,\n  visible,\n  visibleLayers,\n}) => (\n  <>\n    <PrimaryToolbar\n      onToggleSidebar={onToggleSidebar}\n      visible={visible}\n      displaySidebar={displaySidebar}\n    >\n      <IconButton\n        ariaLive=\"polite\"\n        className={'pipeline-menu-button--labels'}\n        onClick={() => onToggleTextLabels(!textLabels)}\n        icon={LabelIcon}\n        labelText={`${textLabels ? 'Hide' : 'Show'} text labels`}\n        visible={visible.labelBtn}\n      />\n      <IconButton\n        ariaLabel={`Turn data layers ${visibleLayers ? 'off' : 'on'}`}\n        className={'pipeline-menu-button--layers'}\n        onClick={() => onToggleLayers(!visibleLayers)}\n        icon={LayersIcon}\n        labelText={`${visibleLayers ? 'Hide' : 'Show'} layers`}\n        disabled={disableLayerBtn}\n        visible={visible.layerBtn}\n      />\n      <IconButton\n        ariaLabel=\"Export graph as SVG or PNG\"\n        className={'pipeline-menu-button--export'}\n        onClick={() => onToggleExportModal(true)}\n        icon={ExportIcon}\n        labelText=\"Export visualisation\"\n        visible={visible.exportBtn}\n      />\n    </PrimaryToolbar>\n  </>\n);\n\nexport const mapStateToProps = (state) => ({\n  disableLayerBtn: !state.layer.ids.length,\n  textLabels: state.textLabels,\n  visible: state.visible,\n  visibleLayers: Boolean(getVisibleLayerIDs(state).length),\n  displaySidebar: state.display.sidebar,\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onToggleExportModal: (value) => {\n    dispatch(toggleExportModal(value));\n  },\n  onToggleLayers: (value) => {\n    dispatch(toggleLayers(Boolean(value)));\n  },\n  onToggleSidebar: (visible) => {\n    dispatch(toggleSidebar(visible));\n  },\n  onToggleTextLabels: (value) => {\n    dispatch(toggleTextLabels(Boolean(value)));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(FlowchartPrimaryToolbar);\n","import 'd3-transition';\n\nconst viewportMargin = 2;\n\n/**\n * Render viewport region\n */\nexport const drawViewport = function () {\n  const { mapSize } = this.props;\n  const { x, y, width, height } = this.getViewport();\n\n  const minX = Math.max(x, viewportMargin);\n  const minY = Math.max(y, viewportMargin);\n  const maxX = Math.min(x + width, mapSize.width - viewportMargin);\n  const maxY = Math.min(y + height, mapSize.height - viewportMargin);\n\n  this.el.viewport.enter().attr('x', 0).attr('y', 0);\n\n  this.el.viewport\n    .attr('transform', `translate(${minX}, ${minY})`)\n    .attr('width', Math.max(0, maxX - minX))\n    .attr('height', Math.max(0, maxY - minY));\n};\n\n/**\n * Render nodes\n */\nexport const drawNodes = function () {\n  const { clickedNode, linkedNodes, nodeActive, nodeSelected, nodes } =\n    this.props;\n\n  this.el.nodes = this.el.nodeGroup\n    .selectAll('.pipeline-minimap-node')\n    .data(nodes, (node) => node.id);\n\n  const enterNodes = this.el.nodes\n    .enter()\n    .append('g')\n    .attr('class', 'pipeline-minimap-node');\n\n  enterNodes\n    .attr('transform', (node) => `translate(${node.x}, ${node.y})`)\n    .attr('opacity', 0);\n\n  enterNodes.append('rect');\n\n  this.el.nodes\n    .exit()\n    .transition('exit-nodes')\n    .duration(this.DURATION)\n    .attr('opacity', 0)\n    .remove();\n\n  this.el.nodes = this.el.nodes\n    .merge(enterNodes)\n    .attr('data-id', (node) => node.id)\n    .classed('pipeline-minimap-node--active', (node) => nodeActive[node.id])\n    .classed('pipeline-minimap-node--selected', (node) => nodeSelected[node.id])\n    .classed(\n      'pipeline-minimap-node--faded',\n      (node) => clickedNode && !linkedNodes[node.id]\n    );\n\n  this.el.nodes\n    .transition('update-nodes')\n    .duration(this.DURATION)\n    .attr('opacity', 1)\n    .attr('transform', (node) => `translate(${node.x}, ${node.y})`)\n    .end()\n    .catch(() => {});\n\n  this.el.nodes\n    .select('rect')\n    .attr('width', (node) => node.width - sizeOffset(node))\n    .attr('height', (node) => node.height - sizeOffset(node))\n    .attr('x', (node) => (node.width - sizeOffset(node)) / -2)\n    .attr('y', (node) => (node.height - sizeOffset(node)) / -2);\n};\n\nconst sizeOffset = (node) => (node.type === 'task' ? 5 : 16);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport 'd3-transition';\nimport { select } from 'd3-selection';\nimport { getNodeActive, getNodeSelected } from '../../selectors/nodes';\nimport { updateZoom } from '../../actions';\nimport { getChartSize, getChartZoom } from '../../selectors/layout';\nimport { getLinkedNodes } from '../../selectors/linked-nodes';\nimport {\n  viewing,\n  isOrigin,\n  viewTransformToFit,\n  getViewTransform,\n  setViewTransformExact,\n} from '../../utils/view';\nimport { drawNodes, drawViewport } from './draw';\nimport './styles/minimap.css';\n\n/**\n * Display a pipeline minimap, mostly rendered with D3\n */\nexport class MiniMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.DURATION = 700;\n    this.TRANSITION_WAIT = 200;\n    this.ZOOM_RATE = 0.0025;\n\n    this.isPointerDown = false;\n    this.isPointerInside = false;\n    this.lastTransitionTime = 0;\n\n    this.containerRef = React.createRef();\n    this.svgRef = React.createRef();\n    this.wrapperRef = React.createRef();\n    this.nodesRef = React.createRef();\n    this.viewportRef = React.createRef();\n\n    this.onPointerMove = this.onPointerMove.bind(this);\n    this.onPointerEnter = this.onPointerEnter.bind(this);\n    this.onPointerLeave = this.onPointerLeave.bind(this);\n    this.onPointerDown = this.onPointerDown.bind(this);\n    this.onPointerWheel = this.onPointerWheel.bind(this);\n    this.onPointerWheelGlobal = this.onPointerWheelGlobal.bind(this);\n    this.onPointerUpGlobal = this.onPointerUpGlobal.bind(this);\n  }\n\n  componentDidMount() {\n    this.selectD3Elements();\n\n    this.view = viewing({\n      container: this.svgRef,\n      wrapper: this.wrapperRef,\n      allowUserInput: false,\n    });\n\n    this.addGlobalEventListeners();\n    this.update();\n  }\n\n  componentWillUnmount() {\n    this.removeGlobalEventListeners();\n  }\n\n  /**\n   * Add window event listeners\n   */\n  addGlobalEventListeners() {\n    window.addEventListener('wheel', this.onPointerWheelGlobal, {\n      passive: false,\n    });\n    window.addEventListener(\n      pointerEventName('pointerup'),\n      this.onPointerUpGlobal\n    );\n  }\n\n  /**\n   * Remove window event listeners\n   */\n  removeGlobalEventListeners() {\n    window.removeEventListener('wheel', this.onPointerWheelGlobal);\n    window.removeEventListener(\n      pointerEventName('pointerup'),\n      this.onPointerUpGlobal\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    this.update(prevProps);\n  }\n\n  /**\n   * Updates drawing and zoom if props have changed\n   */\n  update(prevProps = {}) {\n    const { visible, chartZoom } = this.props;\n\n    if (visible) {\n      const changed = (...names) => this.changed(names, prevProps, this.props);\n\n      if (\n        changed(\n          'visible',\n          'nodes',\n          'clickedNodes',\n          'linkedNodes',\n          'nodesActive',\n          'nodeSelected'\n        )\n      ) {\n        drawNodes.call(this);\n      }\n\n      if (changed('visible', 'chartZoom') && chartZoom.applied) {\n        drawViewport.call(this);\n      }\n\n      if (changed('visible', 'nodes', 'textLabels', 'chartSize')) {\n        this.resetView();\n      }\n    }\n  }\n\n  /**\n   * Returns true if any of the given props are different between given objects.\n   * Only shallow changes are detected.\n   */\n  changed(props, objectA, objectB) {\n    return (\n      objectA &&\n      objectB &&\n      props.some((prop) => objectA[prop] !== objectB[prop])\n    );\n  }\n\n  /**\n   * Create D3 element selectors\n   */\n  selectD3Elements() {\n    this.el = {\n      svg: select(this.svgRef.current),\n      wrapper: select(this.wrapperRef.current),\n      nodeGroup: select(this.nodesRef.current),\n      viewport: select(this.viewportRef.current),\n    };\n  }\n\n  /**\n   * Handle pointer enter\n   */\n  onPointerEnter = () => {\n    this.isPointerInside = true;\n  };\n\n  /**\n   * Handle pointer leave\n   */\n  onPointerLeave = () => {\n    this.isPointerInside = false;\n  };\n\n  /**\n   * Handle global pointer up\n   */\n  onPointerUpGlobal = () => {\n    this.isPointerDown = false;\n    this.isPointerInside = false;\n  };\n\n  /**\n   * Handle pointer down\n   * @param {Object} event Event object\n   */\n  onPointerDown = (event) => {\n    this.isPointerDown = true;\n    this.isPointerInside = true;\n\n    this.onPointerMove(event, true);\n  };\n\n  /**\n   * Handle pointer wheel\n   * @param {Object} event Event object\n   */\n  onPointerWheel = (event) => {\n    // Change zoom based on wheel velocity\n    this.props.onUpdateChartZoom({\n      relative: true,\n      scale: -(event.deltaY || 0) * this.ZOOM_RATE,\n      applied: false,\n      transition: false,\n    });\n  };\n\n  /**\n   * Handle global pointer wheel\n   * @param {Object} event Event object\n   */\n  onPointerWheelGlobal = (event) => {\n    // Prevent window scroll when wheeling on this minimap\n    const wasTarget = this.containerRef.current.contains(event.target);\n    if (wasTarget) {\n      event.preventDefault();\n    }\n  };\n\n  /**\n   * Handle pointer move\n   * @param {Object} event Event object\n   * @param {?Boolean} useTransition Apply with transition\n   */\n  onPointerMove = (event, useTransition = false) => {\n    if (this.isPointerDown && this.isPointerInside) {\n      // Wait for transition\n      const time = Number(new Date());\n      if (time - this.lastTransitionTime < this.TRANSITION_WAIT) {\n        return;\n      }\n\n      // Get current state\n      const { scale: chartScale = 1 } = this.props.chartZoom;\n      const { width, height } = this.props.mapSize;\n      const { width: graphWidth, height: graphHeight } = this.props.graphSize;\n      const { k: scale = 1 } = getViewTransform(this.view);\n      const containerRect = this.svgRef.current.getBoundingClientRect();\n\n      // Transform minimap pointer position to a graph position\n      const pointerX = (event.clientX - containerRect.x) / scale;\n      const pointerY = (event.clientY - containerRect.y) / scale;\n      const centerX = (width / scale - graphWidth) * 0.5;\n      const centerY = (height / scale - graphHeight) * 0.5;\n      const x = (pointerX - centerX) * chartScale;\n      const y = (pointerY - centerY) * chartScale;\n\n      // Dispatch an update to be applied\n      this.props.onUpdateChartZoom({\n        x,\n        y,\n        scale: chartScale,\n        relative: false,\n        applied: false,\n        transition: useTransition,\n      });\n\n      if (useTransition) {\n        this.lastTransitionTime = time;\n      }\n    }\n  };\n\n  /**\n   * Zoom and scale to fit\n   */\n  resetView() {\n    const { graphSize, mapSize } = this.props;\n    const { width: mapWidth, height: mapHeight } = mapSize;\n    const { width: graphWidth, height: graphHeight } = graphSize;\n\n    // Skip if chart or graph is not ready yet\n    if (!mapWidth || !graphWidth) {\n      return;\n    }\n\n    // Padding offset\n    const offset = { x: padding * 0.5, y: padding * 0.5 };\n\n    // Find a transform that fits everything in view\n    const transform = viewTransformToFit({\n      offset,\n      viewWidth: mapWidth - padding,\n      viewHeight: mapHeight - padding,\n      objectWidth: graphWidth,\n      objectHeight: graphHeight,\n    });\n\n    // Detect first transform\n    const isFirstTransform = isOrigin(getViewTransform(this.view));\n\n    // Apply transform ignoring extents\n    setViewTransformExact(\n      this.view,\n      transform,\n      isFirstTransform ? 0 : this.DURATION,\n      false\n    );\n  }\n\n  /**\n   * Get the position of the viewport relative to the minimap\n   */\n  getViewport() {\n    const { chartZoom, chartSize } = this.props;\n    const {\n      k: mapScale,\n      x: translateX,\n      y: translateY,\n    } = getViewTransform(this.view);\n\n    const scale = mapScale / chartZoom.scale;\n    const width = chartSize.width * scale;\n    const height = chartSize.height * scale;\n    const x = -translateX - (chartZoom.x - chartSize.sidebarWidth) * scale;\n    const y = -translateY - chartZoom.y * scale;\n\n    return { x, y, width, height };\n  }\n\n  /**\n   * Render React elements\n   */\n  render() {\n    const { width, height } = this.props.mapSize;\n    const transformStyle = {\n      transform: `translate(calc(-100% + ${width}px), -100%)`,\n    };\n\n    // Add pointer events with back compatibility\n    const _ = pointerEventName;\n    const inputEvents = {\n      onWheel: this.onPointerWheel,\n      [_('onPointerEnter')]: this.onPointerEnter,\n      [_('onPointerLeave')]: this.onPointerLeave,\n      [_('onPointerDown')]: this.onPointerDown,\n      [_('onPointerMove')]: this.onPointerMove,\n    };\n\n    return (\n      <div\n        className=\"pipeline-minimap-container\"\n        style={this.props.visible ? transformStyle : {}}\n      >\n        <div\n          className=\"pipeline-minimap kedro\"\n          ref={this.containerRef}\n          {...inputEvents}\n        >\n          <svg\n            id=\"pipeline-minimap-graph\"\n            className=\"pipeline-minimap__graph\"\n            width={width}\n            height={height}\n            viewBox={`0 0 ${width} ${height}`}\n            ref={this.svgRef}\n          >\n            <g id=\"zoom-wrapper\" ref={this.wrapperRef}>\n              <g\n                id=\"minimap-nodes\"\n                className=\"pipeline-minimap__nodes\"\n                ref={this.nodesRef}\n              />\n            </g>\n            <rect\n              className=\"pipeline-minimap__viewport\"\n              ref={this.viewportRef}\n            />\n          </svg>\n        </div>\n      </div>\n    );\n  }\n}\n\n// Map sizing constants\nconst padding = 32;\nconst height = 220;\nconst minWidth = 218;\nconst maxWidth = 1.5 * minWidth;\n\n/**\n * Convert pointer event name to a mouse event name if not supported\n */\nconst pointerEventName = (event) =>\n  window.PointerEvent\n    ? event\n    : event.replace('pointer', 'mouse').replace('Pointer', 'Mouse');\n\n/**\n * Gets the map sizing that fits the graph in state\n */\nconst getMapSize = (state) => {\n  const size = state.graph.size || {};\n  const graphWidth = size.width || 0;\n  const graphHeight = size.height || 0;\n\n  if (graphWidth > 0 && graphHeight > 0) {\n    // Constrain width\n    const scaledWidth = graphWidth * (height / graphHeight);\n    const width = Math.min(Math.max(scaledWidth, minWidth), maxWidth);\n\n    return { width, height };\n  }\n\n  // Use minimum size if no graph\n  return { width: minWidth, height: height };\n};\n\n// Maintain a single reference to support change detection\nconst emptyNodes = [];\nconst emptyGraphSize = {};\n\nexport const mapStateToProps = (state, ownProps) => ({\n  visible: state.visible.miniMap,\n  mapSize: getMapSize(state),\n  clickedNode: state.node.clicked,\n  chartSize: getChartSize(state),\n  chartZoom: getChartZoom(state),\n  graphSize: state.graph.size || emptyGraphSize,\n  nodes: state.graph.nodes || emptyNodes,\n  linkedNodes: getLinkedNodes(state),\n  nodeActive: getNodeActive(state),\n  nodeSelected: getNodeSelected(state),\n  textLabels: state.textLabels,\n  ...ownProps,\n});\n\nexport const mapDispatchToProps = (dispatch, ownProps) => ({\n  onUpdateChartZoom: (transform) => {\n    dispatch(updateZoom(transform));\n  },\n  ...ownProps,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MiniMap);\n","import MiniMap from './minimap';\n\nexport default MiniMap;\n","import React from 'react';\n\nconst MapIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M9.5 3l6 3.7 6-2.1v13.9l-6.2 3.3-6-3.8L3 20.4V5.3L9.5 3zm10 4.4l-3.1 1.2v10.3l3.2-1.6V7.4zm-9.1-1.5v10.4l4 2.5V8.4l-4-2.5zm-2-.4L5 6.7v10.8l3.4-1.3V5.5z\" />\n  </svg>\n);\n\nexport default MapIcon;\n","import React from 'react';\n\nconst PlusIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"m13 4v7h7v2h-7v7h-2v-7h-7v-2h7v-7z\" />\n  </svg>\n);\n\nexport default PlusIcon;\n","import React from 'react';\n\nconst MinusIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M19 13H5v-2h14z\" />\n  </svg>\n);\n\nexport default MinusIcon;\n","import React from 'react';\n\nconst ResetIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M8.5 4v5.5h-2V7.7A7 7 0 0012 19v2A9 9 0 015.3 6H3V4h5.5zM12 3a9 9 0 017.1 14.5h2.4v2H16V14h2v1.6A7 7 0 0012 5z\" />\n  </svg>\n);\n\nexport default ResetIcon;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { toggleMiniMap, updateZoom } from '../../actions';\nimport { getChartZoom } from '../../selectors/layout';\nimport IconButton from '../ui/icon-button';\nimport MapIcon from '../icons/map';\nimport PlusIcon from '../icons/plus';\nimport MinusIcon from '../icons/minus';\nimport ResetIcon from '../icons/reset';\nimport './minimap-toolbar.css';\n\n/**\n * Controls for minimap\n */\nexport const MiniMapToolbar = ({\n  displayMiniMap,\n  onToggleMiniMap,\n  visible,\n  chartZoom,\n  onUpdateChartZoom,\n}) => {\n  const { scale, minScale, maxScale } = chartZoom;\n\n  return (\n    <>\n      <ul className=\"pipeline-minimap-toolbar kedro\">\n        {displayMiniMap && (\n          <IconButton\n            icon={MapIcon}\n            className={'pipeline-minimap-button pipeline-minimap-button--map'}\n            ariaLabel={`Turn minimap ${visible.miniMap ? 'off' : 'on'}`}\n            onClick={() => onToggleMiniMap(!visible.miniMap)}\n            labelText={`${visible.miniMap ? 'Hide' : 'Show'} minimap`}\n            visible={visible.miniMapBtn}\n            active={visible.miniMap}\n          />\n        )}\n        <IconButton\n          icon={PlusIcon}\n          className={'pipeline-minimap-button pipeline-minimap-button--zoom-in'}\n          ariaLabel={'Zoom in'}\n          labelText={'Zoom in'}\n          visible={visible.miniMapBtn}\n          disabled={scale >= maxScale}\n          onClick={() => onUpdateChartZoom(scaleZoom(chartZoom, 1.3))}\n        />\n        <IconButton\n          icon={MinusIcon}\n          className={\n            'pipeline-minimap-button pipeline-minimap-button--zoom-out'\n          }\n          ariaLabel={'Zoom out'}\n          labelText={'Zoom out'}\n          visible={visible.miniMapBtn}\n          disabled={scale <= minScale}\n          onClick={() => onUpdateChartZoom(scaleZoom(chartZoom, 0.7))}\n        />\n        <IconButton\n          icon={ResetIcon}\n          className={'pipeline-minimap-button pipeline-minimap-button--reset'}\n          ariaLabel={'Reset zoom'}\n          labelText={'Reset zoom'}\n          visible={visible.miniMapBtn}\n          onClick={() => onUpdateChartZoom(scaleZoom(chartZoom, 0))}\n        />\n        <li>\n          <span className=\"pipeline-minimap-toolbar__scale\" title=\"Zoom level\">\n            {Math.round(100 * chartZoom.scale) || 100}%\n          </span>\n        </li>\n      </ul>\n    </>\n  );\n};\n\nconst scaleZoom = ({ scale }, factor) => ({\n  scale: scale * (factor || 1),\n  applied: false,\n  transition: true,\n  reset: factor === 0,\n});\n\nexport const mapStateToProps = (state) => ({\n  visible: state.visible,\n  displayMiniMap: state.display.miniMap,\n  chartZoom: getChartZoom(state),\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onToggleMiniMap: (value) => {\n    dispatch(toggleMiniMap(value));\n  },\n  onUpdateChartZoom: (transform) => {\n    dispatch(updateZoom(transform));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MiniMapToolbar);\n","import MiniMapToolbar from './minimap-toolbar';\n\nexport default MiniMapToolbar;\n","import React from 'react';\n\nconst SearchIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\n  </svg>\n);\n\nexport default SearchIcon;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport 'what-input';\n\nimport './search-input.css';\n\nconst SearchInput = ({\n  disabled,\n  label,\n  onBlur,\n  onChange,\n  onFocus,\n  placeholder,\n  theme,\n  value: inputValue,\n}) => {\n  const [focused, setFocused] = useState(false);\n  const [value, setValue] = useState(inputValue);\n\n  useEffect(() => {\n    if (inputValue !== null) {\n      setValue(inputValue);\n    }\n  }, [inputValue]);\n\n  const _handleFocused = (event) => {\n    setFocused(true);\n\n    if (typeof onFocus === 'function') {\n      onFocus(event, { focused: true });\n    }\n  };\n\n  /**\n   * _handleBlurred - changes the focus to disabled state.\n   */\n  const _handleBlurred = (event) => {\n    setFocused(false);\n\n    if (typeof onBlur === 'function') {\n      onBlur(event, { focused: false, value: event.target.value });\n    }\n  };\n\n  /**\n   * _handleChanged - updates the state with the value from the input and triggers the passed on change callback.\n   * @param  {object} event\n   */\n  const _handleChanged = (event) => {\n    setValue(event.target.value);\n\n    if (typeof onChange === 'function') {\n      onChange(event, { value: event.target.value });\n    }\n  };\n\n  const labelWrapper = label && (\n    <div className=\"search-input__label\">{label}</div>\n  );\n\n  return (\n    <div className=\"kedro search-input-wrapper\">\n      <div\n        className={classnames(\n          'search-input',\n          `search-theme--${theme}`,\n          { 'search-input--disabled': disabled },\n          { 'search-input--focused': focused }\n        )}\n        onFocus={_handleFocused}\n        onBlur={_handleBlurred}\n      >\n        {labelWrapper}\n        <input\n          className=\"search-input__field\"\n          disabled={disabled}\n          onBlur={_handleBlurred}\n          onChange={_handleChanged}\n          onFocus={_handleFocused}\n          placeholder={placeholder || ''}\n          type=\"text\"\n          value={value || ''}\n        />\n        <div\n          aria-hidden=\"true\"\n          className=\"search-input__line\"\n          data-value={value || ''}\n        />\n      </div>\n    </div>\n  );\n};\n\nSearchInput.defaultProps = {\n  disabled: false,\n  label: null,\n  onBlur: null,\n  onChange: null,\n  onFocus: null,\n  placeholder: null,\n  theme: 'light',\n  value: null,\n};\n\nSearchInput.propTypes = {\n  /**\n   * Whether the input should be editable or not.\n   */\n  disabled: PropTypes.bool,\n  /**\n   * Label indicating what should be written in the input.\n   */\n  label: PropTypes.string,\n  /**\n   * Event listener which will be triggered on losing focus of the input (in other words, on blur).\n   */\n  onBlur: PropTypes.func,\n  /**\n   * Event listener which will be triggered when input will gain focus,\n   */\n  onFocus: PropTypes.func,\n  /**\n   * Event listener which will be trigerred on change of the input.\n   */\n  onChange: PropTypes.func,\n  /**\n   * Placeholder hint text which is displayed inside the input field and dissapers when something is written inside.\n   */\n  placeholder: PropTypes.string,\n  /**\n   * Theme of the input - either 'dark' or 'light'.\n   */\n  theme: PropTypes.oneOf(['dark', 'light']),\n  /**\n   * Value to be displayed inside the input field, it is editable and can change if not disabled.\n   */\n  value: PropTypes.string,\n};\n\nexport default SearchInput;\n","import SearchInput from './search-input';\n\nexport default SearchInput;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nimport CloseIcon from '../../icons/close';\nimport SearchIcon from '../../icons/search';\nimport SearchInput from './search-input';\n\n/**\n * SearchBarRenderer, used to output the actual DOM markup for the component\n */\nconst SearchBarRenderer = (props) => {\n  const {\n    children,\n    isFocused,\n    placeholder,\n    onBlur,\n    onChange,\n    onClear,\n    onFocus,\n    onSubmit,\n    theme,\n    showClearButton,\n    value,\n  } = props;\n\n  return (\n    <form\n      className={classnames('kedro', 'search-bar', `kui-theme--${theme}`, {\n        'search-bar--focused': isFocused,\n      })}\n      onSubmit={onSubmit}\n      role={children ? 'combobox' : 'search'}\n    >\n      <label className=\"search-bar__label\" htmlFor=\"search-bar\">\n        Search\n      </label>\n      <div className=\"search-bar__icon-wrapper\">\n        <SearchIcon className=\"icon icon__graphics\" />\n      </div>\n      <SearchInput\n        id=\"search-bar\"\n        placeholder={placeholder}\n        onChange={onChange}\n        onFocus={onFocus}\n        onBlur={onBlur}\n        value={value}\n        theme={theme}\n        type=\"search\"\n      />\n      <div\n        className={classnames('search-bar__dynamic-icon', {\n          'search-bar__dynamic-icon--visible': showClearButton,\n        })}\n      >\n        <button\n          className=\"icon--close\"\n          onBlur={onBlur}\n          onClick={onClear}\n          onFocus={onFocus}\n        >\n          <CloseIcon className=\"icon icon__graphics\" />\n        </button>\n      </div>\n      {children}\n    </form>\n  );\n};\n\nSearchBarRenderer.defaultProps = {\n  children: null,\n  onSubmit: null,\n};\n\nSearchBarRenderer.propTypes = {\n  /**\n   * Child component, usually search-bar-results\n   */\n  children: PropTypes.node,\n  /**\n   * Indicating whether the search bar is focused or blurred\n   */\n  isFocused: PropTypes.bool.isRequired,\n  /**\n   * Place holder text for search input\n   */\n  placeholder: PropTypes.string.isRequired,\n  /**\n   * On blur method, triggered by clicking outside the input\n   */\n  onBlur: PropTypes.func.isRequired,\n  /**\n   * On change method called after wait time has passed\n   */\n  onChange: PropTypes.func.isRequired,\n  /**\n   * On close method, triggered by icon click\n   */\n  onClear: PropTypes.func.isRequired,\n  /**\n   * On focus method, triggered by clicking into the input\n   */\n  onFocus: PropTypes.func.isRequired,\n  /**\n   * On submit method, triggered by hitting enter on the input\n   */\n  onSubmit: PropTypes.func,\n  /**\n   * Theme of the component\n   */\n  theme: PropTypes.oneOf(['light', 'dark']).isRequired,\n  /**\n   * Show clear button on right\n   */\n  showClearButton: PropTypes.bool.isRequired,\n  /**\n   * Text value for the input\n   */\n  value: PropTypes.string.isRequired,\n};\n\nexport default SearchBarRenderer;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport SearchBarRenderer from './search-bar-renderer';\n\nimport './search-bar.css';\n\nconst SearchBar = ({\n  children,\n  onBlur,\n  onChange,\n  onClear,\n  onFocus,\n  onSubmit,\n  placeholder,\n  theme,\n  value: inputValue,\n}) => {\n  const [value, setValue] = useState(inputValue);\n  const [isFocused, setIsFocused] = useState(false);\n  const [showClearButton, setShowClearButton] = useState(inputValue !== '');\n\n  useEffect(() => {\n    setValue(inputValue);\n    setShowClearButton(inputValue !== '');\n  }, [inputValue]);\n\n  /**\n   * onChange - fired for onChange events in input field\n   * @param  {Event} e native change event\n   */\n  const _handleChanged = (e) => {\n    setValue(e.target.value);\n    setShowClearButton(e.target.value !== '');\n\n    // trigger onChange prop if available\n    if (typeof onChange === 'function') {\n      onChange(e.target.value);\n    }\n  };\n\n  /**\n   * onFocus - fired for onFocus events in input field\n   * @param  {Event} e native change event\n   */\n  const _handleFocused = (e) => {\n    setIsFocused(true);\n\n    // trigger onFocus prop if available\n    if (typeof onFocus === 'function') {\n      onFocus(e.target.value);\n    }\n  };\n\n  /**\n   * onBlurred - fired for onBlur events in input field\n   * @param  {Event} e native change event\n   */\n  const _handleBlurred = (e) => {\n    setIsFocused(false);\n\n    // trigger onBlur prop if available\n    if (typeof onBlur === 'function') {\n      onBlur(e.target.value);\n    }\n  };\n\n  /**\n   * onClose - clear the text in the input\n   */\n  const _handleCleared = (event) => {\n    setValue('');\n    setShowClearButton(false);\n\n    // trigger onClear prop if available\n    if (typeof onClear === 'function') {\n      onClear();\n    }\n\n    // trigger onChange prop if available\n    if (typeof onChange === 'function') {\n      onChange('');\n    }\n\n    event.preventDefault();\n  };\n\n  /**\n   * Trigger onSubmit prop if available\n   * @param {Object} e native change event\n   */\n  const _handleSubmit = (e) => {\n    if (typeof onSubmit === 'function') {\n      onSubmit({\n        e,\n        data: value,\n      });\n    }\n  };\n\n  return (\n    <SearchBarRenderer\n      onBlur={_handleBlurred}\n      isFocused={isFocused}\n      placeholder={placeholder}\n      onChange={_handleChanged}\n      onClear={_handleCleared}\n      onFocus={_handleFocused}\n      onSubmit={_handleSubmit}\n      showClearButton={showClearButton}\n      value={value}\n      theme={theme}\n    >\n      {children}\n    </SearchBarRenderer>\n  );\n};\n\nSearchBar.defaultProps = {\n  children: null,\n  placeholder: 'Search Here...',\n  onBlur: null,\n  onChange: null,\n  onClear: null,\n  onFocus: null,\n  onSubmit: null,\n  theme: 'dark',\n  value: '',\n};\n\nSearchBar.propTypes = {\n  /**\n   * Child component, usually search-bar-results\n   */\n  children: PropTypes.node,\n  /**\n   * On blur method, triggered by clicking outside the input\n   */\n  onBlur: PropTypes.func,\n  /**\n   * Subscribe to change events from input field\n   */\n  onChange: PropTypes.func,\n  /**\n   * On clear, triggered when clear button is pressed\n   */\n  onClear: PropTypes.func,\n  /**\n   * On focus method, triggered by clicking into the input\n   */\n  onFocus: PropTypes.func,\n  /**\n   * On submit method, triggered by hitting enter on the input\n   */\n  onSubmit: PropTypes.func,\n  /**\n   * Place holder text for search input\n   */\n  placeholder: PropTypes.string,\n  /**\n   * Theme of the component\n   */\n  theme: PropTypes.oneOf(['light', 'dark']).isRequired,\n  /**\n   * Value of the inner input bar\n   */\n  value: PropTypes.string,\n};\n\nexport default SearchBar;\n","import SearchBar from './search-bar';\n\nexport default SearchBar;\n","import React, { useEffect, useRef } from 'react';\nimport SearchBar from '../ui/search-bar';\nimport { connect } from 'react-redux';\nimport './search-list.css';\n\n/**\n * Handle Searching of List\n * @param {function} onUpdateSearchValue Event handler\n * @param {string} searchValue Search text\n * @param {string} theme Light/dark theme for SearchBar component\n */\nexport const SearchList = ({ onUpdateSearchValue, searchValue, theme }) => {\n  const container = useRef(null);\n\n  /**\n   * Focus search on CMD+F/CTRL+F, but only if not already focused, so that if\n   * you hit the shortcut again you will receive the default browser behaviour\n   * @param {object} event Keydown event\n   */\n  const handleWindowKeyDown = (event) => {\n    const isKeyF = event.key === 'f' || event.keyCode === 70;\n    const isKeyCtrlOrCmd = event.ctrlKey || event.metaKey;\n    if (isKeyF && isKeyCtrlOrCmd) {\n      const input = container.current.querySelector('input');\n      if (document.activeElement !== input) {\n        input.focus();\n        event.preventDefault();\n      } else {\n        input.blur();\n      }\n    }\n  };\n\n  /**\n   * Add window keydown event listener on mount, and remove on unmount\n   */\n  useEffect(() => {\n    window.addEventListener('keydown', handleWindowKeyDown);\n    return () => window.removeEventListener('keydown', handleWindowKeyDown);\n  });\n\n  /**\n   * Listen for keyboard events, and trigger relevant actions\n   * @param {number} keyCode The key event keycode\n   */\n  const handleKeyDown = (event) => {\n    const isKeyEscape = event.key === 'Escape' || event.keyCode === 27;\n    if (isKeyEscape) {\n      onUpdateSearchValue('');\n      container.current.querySelector('input').blur();\n    }\n  };\n\n  return (\n    <div\n      className=\"pipeline-search-list\"\n      onKeyDown={handleKeyDown}\n      ref={container}\n    >\n      <SearchBar\n        onChange={onUpdateSearchValue}\n        placeholder={'Search'}\n        theme={theme}\n        value={searchValue}\n      />\n    </div>\n  );\n};\n\nexport const mapStateToProps = (state) => ({\n  theme: state.theme,\n});\n\nexport default connect(mapStateToProps)(SearchList);\n","import SearchList from './search-list';\n\nexport default SearchList;\n","import React from 'react';\n\nconst VisibleIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M11.5 5.706c4.142 0 7.5 4.662 7.5 5.625 0 .963-3.358 5.625-7.5 5.625-4.142 0-7.5-4.632-7.5-5.625 0-.993 3.358-5.625 7.5-5.625zm0 1.875a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5zm0 1.875a1.875 1.875 0 110 3.75 1.875 1.875 0 010-3.75z\" />\n  </svg>\n);\n\nexport default VisibleIcon;\n","import React from 'react';\n\nconst InvisibleIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M17.97 5.3L19 6.33l-2 2.01c1.24 1.23 2 2.53 2 3 0 .95-3.36 5.62-7.5 5.62-.9 0-1.76-.22-2.55-.57L6.33 19 5.3 17.97 17.97 5.3zm-2.88 4.94l-1.9 1.9c-.18.39-.5.7-.88.88l-1.9 1.9a3.74 3.74 0 004.84-3.59c0-.38-.06-.74-.16-1.09zM11.5 5.71c1 0 1.95.27 2.83.7l-1.45 1.44a3.74 3.74 0 00-4.87 4.86l-1.8 1.81C4.83 13.24 4 11.82 4 11.33c0-1 3.36-5.63 7.5-5.63zm-.24 3.76L9.64 11.1c.11-.84.77-1.5 1.61-1.62z\" />\n  </svg>\n);\n\nexport default InvisibleIcon;\n","import React from 'react';\n\nconst FocusModeIcon = ({ className, checked }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n  >\n    <g>\n      <path\n        d=\"M5 0L5 2 2 2 2 5 0 5 0 0z\"\n        transform=\"translate(-258 -194) translate(258 194) translate(6 6)\"\n      />\n      <path\n        d=\"M12 0L12 2 9 2 9 5 7 5 7 0z\"\n        transform=\"translate(-258 -194) translate(258 194) translate(6 6) rotate(90 9.5 2.5)\"\n      />\n      <path\n        d=\"M12 7L12 9 9 9 9 12 7 12 7 7z\"\n        transform=\"translate(-258 -194) translate(258 194) translate(6 6) rotate(-180 9.5 9.5)\"\n      />\n      <path\n        d=\"M5 7L5 9 2 9 2 12 0 12 0 7z\"\n        transform=\"translate(-258 -194) translate(258 194) translate(6 6) rotate(-90 2.5 9.5)\"\n      />\n    </g>\n  </svg>\n);\n\nexport default FocusModeIcon;\n","import React, { memo } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport { changed } from '../../utils';\nimport NodeIcon from '../icons/node-icon';\nimport VisibleIcon from '../icons/visible';\nimport InvisibleIcon from '../icons/invisible';\nimport FocusModeIcon from '../icons/focus-mode';\nimport { getNodeActive } from '../../selectors/nodes';\n\n// The exact fixed height of a row as measured by getBoundingClientRect()\nexport const nodeListRowHeight = 37;\n\n/**\n * Returns `true` if there are no props changes, therefore the last render can be reused.\n * Performance: Checks only the minimal set of props known to change after first render.\n */\nconst shouldMemo = (prevProps, nextProps) =>\n  !changed(\n    [\n      'active',\n      'checked',\n      'allUnchecked',\n      'disabled',\n      'faded',\n      'focused',\n      'visible',\n      'selected',\n      'label',\n      'children',\n      'count',\n    ],\n    prevProps,\n    nextProps\n  );\n\nconst NodeListRow = memo(\n  ({\n    container: Container = 'div',\n    active,\n    checked,\n    allUnchecked,\n    children,\n    disabled,\n    faded,\n    focused,\n    visible,\n    id,\n    label,\n    count,\n    name,\n    kind,\n    onMouseEnter,\n    onMouseLeave,\n    onChange,\n    onClick,\n    selected,\n    type,\n    icon,\n    visibleIcon = VisibleIcon,\n    invisibleIcon = InvisibleIcon,\n    focusModeIcon = FocusModeIcon,\n    rowType,\n  }) => {\n    const VisibilityIcon =\n      type === 'modularPipeline'\n        ? focusModeIcon\n        : checked\n        ? visibleIcon\n        : invisibleIcon;\n    const isButton = onClick && kind !== 'filter';\n    const TextButton = isButton ? 'button' : 'div';\n    return (\n      <Container\n        className={classnames(\n          'pipeline-nodelist__row kedro',\n          `pipeline-nodelist__row--kind-${kind}`,\n          {\n            'pipeline-nodelist__row--visible': visible,\n            'pipeline-nodelist__row--active': active,\n            'pipeline-nodelist__row--selected': selected,\n            'pipeline-nodelist__row--disabled': disabled,\n            'pipeline-nodelist__row--unchecked': !checked,\n            'pipeline-nodelist__row--overwrite': !(active || selected),\n          }\n        )}\n        title={name}\n        onMouseEnter={visible ? onMouseEnter : null}\n        onMouseLeave={visible ? onMouseLeave : null}\n      >\n        {icon && (\n          <NodeIcon\n            className={classnames(\n              'pipeline-nodelist__row__type-icon',\n              'pipeline-nodelist__row__icon',\n              {\n                'pipeline-nodelist__row__type-icon--faded': faded,\n                'pipeline-nodelist__row__type-icon--disabled': disabled,\n                'pipeline-nodelist__row__type-icon--nested': !children,\n                'pipeline-nodelist__row__type-icon--active': active,\n                'pipeline-nodelist__row__type-icon--selected': selected,\n              }\n            )}\n            icon={icon}\n          />\n        )}\n        <TextButton\n          className={classnames(\n            'pipeline-nodelist__row__text',\n            `pipeline-nodelist__row__text--kind-${kind}`,\n            `pipeline-nodelist__row__text--${rowType}`\n          )}\n          onClick={onClick}\n          onFocus={onMouseEnter}\n          onBlur={onMouseLeave}\n          title={children ? null : name}\n        >\n          <span\n            className={classnames(\n              'pipeline-nodelist__row__label',\n              `pipeline-nodelist__row__label--kind-${kind}`,\n              {\n                'pipeline-nodelist__row__label--faded': faded,\n                'pipeline-nodelist__row__label--disabled': disabled,\n              }\n            )}\n            dangerouslySetInnerHTML={{ __html: label }}\n          />\n        </TextButton>\n        {typeof count === 'number' && (\n          <span onClick={onClick} className={'pipeline-nodelist__row__count'}>\n            {count}\n          </span>\n        )}\n        {VisibilityIcon && (\n          <label\n            htmlFor={id}\n            className={classnames(\n              'pipeline-row__toggle',\n              `pipeline-row__toggle--kind-${kind}`,\n              {\n                'pipeline-row__toggle--disabled': disabled,\n                'pipeline-row__toggle--selected': selected,\n              }\n            )}\n            onClick={(e) => e.stopPropagation()}\n          >\n            <input\n              id={id}\n              className=\"pipeline-nodelist__row__checkbox\"\n              type=\"checkbox\"\n              checked={checked}\n              disabled={disabled}\n              name={name}\n              onChange={onChange}\n            />\n            <VisibilityIcon\n              aria-label={name}\n              checked={checked}\n              className={classnames(\n                'pipeline-nodelist__row__icon',\n                'pipeline-row__toggle-icon',\n                `pipeline-row__toggle-icon--kind-${kind}`,\n                {\n                  'pipeline-row__toggle-icon--parent': Boolean(children),\n                  'pipeline-row__toggle-icon--child': !children,\n                  'pipeline-row__toggle-icon--checked': checked,\n                  'pipeline-row__toggle-icon--unchecked': !checked,\n                  'pipeline-row__toggle-icon--all-unchecked': allUnchecked,\n                  'pipeline-row__toggle-icon--focus-checked': focused,\n                }\n              )}\n            />\n          </label>\n        )}\n        {children}\n      </Container>\n    );\n  },\n  shouldMemo\n);\n\nexport const mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  active:\n    typeof ownProps.active !== 'undefined'\n      ? ownProps.active\n      : getNodeActive(state)[ownProps.id] || false,\n});\n\nexport default connect(mapStateToProps)(NodeListRow);\n","import { useState, useLayoutEffect, useRef, useMemo, useCallback } from 'react';\n\n/**\n * A component that renders only the children currently visible on screen.\n * Renders all children if not supported by browser or is disabled via the `lazy` prop.\n * @param {function} height A `function(start, end)` returning the pixel height for any given range of items\n * @param {number} total The total count of all items in the list\n * @param {function} children A `function(props)` rendering the list and items (see `childProps`)\n * @param {?number} [buffer=0.5] A number [0...1] as a % of the visible region to render additionally\n * @param {?boolean} [lazy=true] Toggles the lazy functionality\n * @param {?boolean} [dispose=false] Toggles disposing items when they lose visibility\n * @param {?function} onChange Optional change callback\n * @param {?function} container Optional, default scroll container is `element.offsetParent`\n * @return {object} The rendered children\n **/\nconst LazyList = ({\n  height,\n  total,\n  children,\n  lazy = true,\n  dispose = false,\n  buffer = 0.5,\n  onChange,\n  container = (element) => element?.offsetParent,\n}) => {\n  // Required browser feature checks\n  const supported = typeof window.IntersectionObserver !== 'undefined';\n\n  // Active only if supported and enabled else renders all children\n  const active = lazy && supported;\n\n  // The range of items currently rendered\n  const [range, setRange] = useState([0, 0]);\n  const rangeRef = useRef([0, 0]);\n\n  // List container element\n  const listRef = useRef();\n\n  // Upper placeholder element\n  const upperRef = useRef();\n\n  // Lower placeholder element\n  const lowerRef = useRef();\n\n  // Height of a single item\n  const itemHeight = useMemo(() => height(0, 1), [height]);\n\n  // Height of all items\n  const totalHeight = useMemo(() => height(0, total), [height, total]);\n\n  // Height of items above the rendered range\n  const upperHeight = useMemo(() => height(0, range[0]), [height, range]);\n\n  // Height of items below the rendered range\n  const lowerHeight = useMemo(\n    () => height(range[1], total),\n    [height, range, total]\n  );\n\n  // Allows an update only once per frame\n  const requestUpdate = useRequestFrameOnce(\n    // Memoise the frame callback\n    useCallback(() => {\n      // Get the range of items visible in this frame\n      const visibleRange = visibleRangeOf(\n        // The list container\n        listRef.current,\n        // The list's scrolling parent container\n        container(listRef.current),\n        buffer,\n        total,\n        itemHeight\n      );\n\n      // Merge ranges\n      const effectiveRange =\n        // If dispose, render visible range only\n        dispose\n          ? visibleRange\n          : // If not dispose, expand current range with visible range\n            rangeUnion(rangeRef.current, visibleRange);\n\n      // Avoid duplicate render calls as state is not set immediate\n      if (!rangeEqual(rangeRef.current, effectiveRange)) {\n        // Store the update in a ref immediately\n        rangeRef.current = effectiveRange;\n\n        // Apply the update in the next render\n        setRange(effectiveRange);\n      }\n    }, [buffer, total, itemHeight, dispose, container])\n  );\n\n  // Memoised observer options\n  const observerOptions = useMemo(\n    () => ({\n      // Create a threshold point for every item\n      threshold: thresholds(total),\n    }),\n    [total]\n  );\n\n  // Updates on changes in visibility at the given thresholds (intersection ratios)\n  useIntersection(listRef, observerOptions, requestUpdate);\n  useIntersection(upperRef, observerOptions, requestUpdate);\n  useIntersection(lowerRef, observerOptions, requestUpdate);\n\n  // Updates on changes in item dimensions\n  useLayoutEffect(\n    () => requestUpdate(),\n    [total, itemHeight, totalHeight, requestUpdate]\n  );\n\n  // Memoised child props for user to apply as needed\n  const childProps = useMemo(\n    () => ({\n      listRef,\n      upperRef,\n      lowerRef,\n      total,\n      start: active ? range[0] : 0,\n      end: active ? range[1] : total,\n      listStyle: {\n        // Relative for placeholder positioning\n        position: 'relative',\n        // List must always have the correct height\n        height: active ? totalHeight : undefined,\n        // List must always pad missing items (upper at least)\n        paddingTop: active ? upperHeight : undefined,\n      },\n      upperStyle: {\n        position: 'absolute',\n        display: !active ? 'none' : undefined,\n        height: upperHeight,\n        width: '100%',\n        // Upper placeholder must always snap to top edge\n        top: '0',\n      },\n      lowerStyle: {\n        position: 'absolute',\n        display: !active ? 'none' : undefined,\n        height: lowerHeight,\n        width: '100%',\n        // Lower placeholder must always snap to bottom edge\n        bottom: '0',\n      },\n    }),\n    [\n      active,\n      range,\n      total,\n      listRef,\n      upperRef,\n      lowerRef,\n      totalHeight,\n      upperHeight,\n      lowerHeight,\n    ]\n  );\n\n  // Optional change callback\n  onChange && onChange(childProps);\n\n  // Render the children\n  return children(childProps);\n};\n\n/**\n * Returns a range in the form `[start, end]` clamped inside `[min, max]`\n * @param {number} start The start of the range\n * @param {number} end The end of the range\n * @param {number} min The range minimum\n * @param {number} max The range maximum\n * @returns {array} The clamped range\n */\nexport const range = (start, end, min, max) => [\n  Math.max(Math.min(start, max), min),\n  Math.max(Math.min(end, max), min),\n];\n\n/**\n * Returns the union of both ranges\n * @param {array} rangeA The first range `[start, end]`\n * @param {array} rangeB The second range `[start, end]`\n * @returns {array} The range union\n */\nexport const rangeUnion = (rangeA, rangeB) => [\n  Math.min(rangeA[0], rangeB[0]),\n  Math.max(rangeA[1], rangeB[1]),\n];\n\n/**\n * Returns true if the ranges have the same `start` and `end` values\n * @param {array} rangeA The first range `[start, end]`\n * @param {array} rangeB The second range `[start, end]`\n * @returns {boolean} True if ranges are equal else false\n */\nexport const rangeEqual = (rangeA, rangeB) =>\n  rangeA[0] === rangeB[0] && rangeA[1] === rangeB[1];\n\n/**\n * Gets the range of items inside the container's screen bounds.\n * Assumes a single fixed height for all child items.\n * Only considers visibility along the vertical y-axis (i.e. only top, bottom bounds).\n * @param {HTMLElement} element The target element (e.g. list container)\n * @param {?HTMLElement} container The clipping container of the target (e.g. scroll container)\n * @param {number} buffer A number [0...1] as a % of the container to render additionally\n * @param {number} childTotal The total count of all children in the target (e.g. list row count)\n * @param {number} childHeight Height of a single child element (e.g. height of one list row)\n * @returns {array} The calculated range of visible items as `[start, end]`\n */\nconst visibleRangeOf = (\n  element,\n  container,\n  buffer,\n  childTotal,\n  childHeight\n) => {\n  // Check element exists\n  if (!element) {\n    return [0, 0];\n  }\n\n  // If no container use the element itself\n  if (!container) {\n    container = element;\n  }\n\n  // Find the clipping container bounds (e.g. scroll container)\n  const clip = container.getBoundingClientRect();\n\n  // Find element bounds (e.g. list container inside scroll container)\n  const list = element.getBoundingClientRect();\n\n  // Find the number of items to buffer\n  const bufferCount = Math.ceil((buffer * clip.height) / childHeight);\n\n  // When clip is fully above viewport or element is fully above clip\n  if (clip.bottom < 0 || list.bottom < clip.top) {\n    // Only bottom part of the buffer in range\n    return range(childTotal - bufferCount, childTotal, 0, childTotal);\n  }\n\n  // Get the viewport bounds\n  const viewport = {\n    top: 0,\n    bottom: window.innerHeight || document.documentElement.clientHeight,\n  };\n\n  // When clip is fully below viewport or element is fully below clip\n  if (clip.top > viewport.bottom || list.top > clip.bottom) {\n    // Only top part of the buffer in range\n    return range(0, bufferCount, 0, childTotal);\n  }\n\n  // Find intersection of clip and viewport now overlap guaranteed\n  const top = Math.max(clip.top, viewport.top);\n  const bottom = Math.min(clip.bottom, viewport.bottom);\n\n  // Find unbounded item range within the intersection\n  const start = Math.floor((top - list.top) / childHeight);\n  const end = Math.ceil((bottom - list.top) / childHeight);\n\n  // Apply buffer and clamp unbounded range to list bounds\n  return range(start - bufferCount, end + bufferCount, 0, childTotal);\n};\n\n/**\n * A hook to create a callback that runs once, at the end of the frame\n * @param {function} callback The callback\n * @returns {function} The wrapped callback\n */\nconst useRequestFrameOnce = (callback) => {\n  const request = useRef();\n\n  // Allow only a single callback per-frame\n  return useCallback(() => {\n    cancelAnimationFrame(request.current);\n    request.current = requestAnimationFrame(callback);\n  }, [request, callback]);\n};\n\n/**\n * Generates an array of the form [0, ...n / total]\n * except where total is `0` where it returns `[0]`.\n * @param {number} total The total number of thresholds to create\n * @returns {array} The threshold array\n */\nexport const thresholds = (total) =>\n  total === 0\n    ? [0]\n    : [...Array.from({ length: total }, (_, i) => i / total), 1];\n\n/**\n * A hook that creates and manages an IntersectionObserver for the given element\n * @param {object} element A React.Ref from the target element\n * @param {object} options An IntersectionObserver options object\n * @param {function} callback A function to call with IntersectionObserver changes\n */\nconst useIntersection = (element, options, callback) => {\n  const observer = useRef();\n\n  // After rendering and layout\n  return useLayoutEffect(() => {\n    // Check the element is ready\n    if (!element.current) {\n      return;\n    }\n\n    // Dispose any previous observer\n    if (observer.current) {\n      observer.current.disconnect();\n    }\n\n    // Create a new observer if supported\n    if (window.IntersectionObserver) {\n      observer.current = new window.IntersectionObserver(callback, options);\n      observer.current.observe(element.current);\n    }\n\n    // Manually callback as element may already be visible\n    callback();\n  }, [callback, element, options]);\n};\n\nexport default LazyList;\n","import LazyList from './lazy-list';\n\nexport default LazyList;\n","import React from 'react';\nimport modifiers from '../../utils/modifiers';\nimport NodeListRow, { nodeListRowHeight } from './node-list-row';\nimport LazyList from '../lazy-list';\n\nconst NodeRowList = ({\n  items = [],\n  group,\n  collapsed,\n  onItemClick,\n  onItemChange,\n  onItemMouseEnter,\n  onItemMouseLeave,\n}) => (\n  <LazyList\n    height={(start, end) => (end - start) * nodeListRowHeight}\n    total={items.length}\n  >\n    {({\n      start,\n      end,\n      total,\n      listRef,\n      upperRef,\n      lowerRef,\n      listStyle,\n      upperStyle,\n      lowerStyle,\n    }) => (\n      <ul\n        ref={listRef}\n        style={listStyle}\n        className={modifiers(\n          'pipeline-nodelist__children',\n          { closed: collapsed },\n          'pipeline-nodelist__list pipeline-nodelist__list--nested'\n        )}\n      >\n        <li\n          className={modifiers('pipeline-nodelist__placeholder-upper', {\n            fade: start !== end && start > 0,\n          })}\n          ref={upperRef}\n          style={upperStyle}\n        />\n        <li\n          className={modifiers('pipeline-nodelist__placeholder-lower', {\n            fade: start !== end && end < total,\n          })}\n          ref={lowerRef}\n          style={lowerStyle}\n        />\n        {items.slice(start, end).map((item) => (\n          <NodeListRow\n            container=\"li\"\n            key={item.id}\n            id={item.id}\n            kind={group.kind}\n            label={item.highlightedLabel}\n            count={item.count}\n            name={item.name}\n            type={item.type}\n            icon={item.icon}\n            active={item.active}\n            checked={item.checked}\n            disabled={item.disabled}\n            faded={item.faded}\n            visible={item.visible}\n            selected={item.selected}\n            allUnchecked={group.allUnchecked}\n            visibleIcon={item.visibleIcon}\n            invisibleIcon={item.invisibleIcon}\n            onClick={() => onItemClick(item)}\n            onMouseEnter={() => onItemMouseEnter(item)}\n            onMouseLeave={() => onItemMouseLeave(item)}\n            onChange={(e) => onItemChange(item, !e.target.checked)}\n            rowType=\"filter\"\n          />\n        ))}\n      </ul>\n    )}\n  </LazyList>\n);\n\nexport default NodeRowList;\n","import React from 'react';\nimport classnames from 'classnames';\nimport NodeListRow from './node-list-row';\nimport NodeRowList from './node-list-row-list';\n\nexport const NodeListGroup = ({\n  items,\n  group,\n  collapsed,\n  id,\n  name,\n  kind,\n  checked,\n  allUnchecked,\n  visibleIcon,\n  invisibleIcon,\n  onToggleChecked,\n  onToggleCollapsed,\n  onItemClick,\n  onItemChange,\n  onItemMouseEnter,\n  onItemMouseLeave,\n}) => (\n  <li\n    className={classnames(\n      'pipeline-nodelist__group',\n      `pipeline-nodelist__group--type-${id}`,\n      `pipeline-nodelist__group--kind-${kind}`,\n      {\n        'pipeline-nodelist__group--all-unchecked': allUnchecked,\n      }\n    )}\n  >\n    <h3 className=\"pipeline-nodelist__heading\">\n      <NodeListRow\n        id={id}\n        kind={kind}\n        name={name}\n        label={name}\n        allUnchecked={allUnchecked}\n        checked={checked}\n        visibleIcon={visibleIcon}\n        invisibleIcon={invisibleIcon}\n        rowType=\"filter\"\n        onChange={(e) => {\n          onToggleChecked(id, !e.target.checked);\n        }}\n      >\n        <button\n          aria-label={`${collapsed ? 'Show' : 'Hide'} ${name.toLowerCase()}`}\n          onClick={() => onToggleCollapsed(id)}\n          className={classnames('pipeline-type-group-toggle', {\n            'pipeline-type-group-toggle--alt': collapsed,\n          })}\n        />\n      </NodeListRow>\n    </h3>\n    <NodeRowList\n      items={items}\n      group={group}\n      collapsed={collapsed}\n      onItemClick={onItemClick}\n      onItemChange={onItemChange}\n      onItemMouseEnter={onItemMouseEnter}\n      onItemMouseLeave={onItemMouseLeave}\n    />\n  </li>\n);\n\nexport default NodeListGroup;\n","import React, { useState } from 'react';\nimport { loadState, saveState } from '../../store/helpers';\nimport NodeListGroup from './node-list-group';\n\nconst storedState = loadState();\n\nconst NodeListGroups = ({\n  items,\n  groups,\n  searchValue,\n  onGroupToggleChanged,\n  onItemClick,\n  onItemMouseEnter,\n  onItemMouseLeave,\n  onItemChange,\n}) => {\n  const [collapsed, setCollapsed] = useState(storedState.groupsCollapsed || {});\n\n  // Collapse/expand node group\n  const onToggleGroupCollapsed = (groupID) => {\n    const groupsCollapsed = {\n      ...collapsed,\n      [groupID]: !collapsed[groupID],\n    };\n\n    setCollapsed(groupsCollapsed);\n    saveState({ groupsCollapsed });\n  };\n\n  return (\n    <nav className=\"pipeline-nodelist-section kedro\">\n      <ul className=\"pipeline-nodelist__list\">\n        {Object.values(groups).map((group) => (\n          <NodeListGroup\n            group={group}\n            items={items[group.id] || []}\n            key={group.id}\n            id={group.id}\n            name={group.name}\n            kind={group.kind}\n            checked={group.checked}\n            allUnchecked={group.allUnchecked}\n            visibleIcon={group.visibleIcon}\n            invisibleIcon={group.invisibleIcon}\n            collapsed={Boolean(searchValue) ? false : collapsed[group.id]}\n            onToggleCollapsed={onToggleGroupCollapsed}\n            onToggleChecked={onGroupToggleChanged}\n            onItemClick={onItemClick}\n            onItemChange={onItemChange}\n            onItemMouseEnter={onItemMouseEnter}\n            onItemMouseLeave={onItemMouseLeave}\n          />\n        ))}\n      </ul>\n    </nav>\n  );\n};\n\nexport default NodeListGroups;\n","import { createSelector } from 'reselect';\nimport { getNodeDisabled } from './disabled';\nimport { arrayToObject } from '../utils';\n\nconst getNodeIDs = (state) => state.node.ids;\nconst getNodeType = (state) => state.node.type;\nexport const getNodeTypeIDs = (state) => state.nodeType.ids;\nconst getNodeTypeName = (state) => state.nodeType.name;\nconst getNodeTypeDisabled = (state) => state.nodeType.disabled;\nexport const isModularPipelineType = (type) => type === 'modularPipeline';\n\n/**\n * Calculate the total number of nodes (and the number of visible nodes)\n * for each node-type\n */\nexport const getTypeNodeCount = createSelector(\n  [getNodeTypeIDs, getNodeIDs, getNodeType, getNodeDisabled],\n  (types, nodeIDs, nodeType, nodeDisabled) =>\n    arrayToObject(types, (type) => {\n      const typeNodeIDs = nodeIDs.filter((nodeID) => nodeType[nodeID] === type);\n      const visibleTypeNodeIDs = typeNodeIDs.filter(\n        (nodeID) => !nodeDisabled[nodeID]\n      );\n      return {\n        total: typeNodeIDs.length,\n        visible: visibleTypeNodeIDs.length,\n      };\n    })\n);\n\n/**\n * Get formatted list of node type objects\n */\nexport const getNodeTypes = createSelector(\n  [getNodeTypeIDs, getNodeTypeName, getNodeTypeDisabled, getTypeNodeCount],\n  (types, typeName, typeDisabled, typeNodeCount) =>\n    types.map((id) => ({\n      id,\n      name: typeName[id],\n      disabled: typeDisabled[id],\n      nodeCount: typeNodeCount[id],\n    }))\n);\n","import React from 'react';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport TreeItem from '@material-ui/lab/TreeItem';\nimport NodeListRow from './node-list-row';\n\nconst arrowIconColor = '#8e8e90';\n\nconst NodeListTreeItem = ({\n  data,\n  onItemClick,\n  onItemMouseEnter,\n  onItemMouseLeave,\n  onItemChange,\n  children,\n}) => (\n  <TreeItem\n    key={data.id}\n    nodeId={data.id}\n    // this setup is to allow flexibility for adjusting the setting for individual arrow icons\n    collapseIcon={<ExpandMoreIcon style={{ color: arrowIconColor }} />}\n    expandIcon={<ChevronRightIcon style={{ color: arrowIconColor }} />}\n    label={\n      <NodeListRow\n        container=\"div\"\n        key={data.id}\n        id={data.id}\n        kind=\"element\"\n        label={data.highlightedLabel || data.name}\n        name={data.name}\n        icon={data.icon}\n        type={data.type}\n        active={data.active}\n        checked={data.checked}\n        disabled={data.disabled}\n        faded={data.faded}\n        visible={data.visible}\n        selected={data.selected}\n        allUnchecked={true}\n        visibleIcon={data.visibleIcon}\n        invisibleIcon={data.invisibleIcon}\n        focusModeIcon={data.focusModeIcon}\n        onClick={() => onItemClick(data)}\n        onMouseEnter={() => onItemMouseEnter(data)}\n        onMouseLeave={() => onItemMouseLeave(data)}\n        onChange={(e) => onItemChange(data, !e.target.checked)}\n        rowType=\"tree\"\n        focused={data.focused}\n      />\n    }\n  >\n    {children}\n  </TreeItem>\n);\n\nexport default NodeListTreeItem;\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport TreeView from '@material-ui/lab/TreeView';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport sortBy from 'lodash.sortby';\n\nimport { loadNodeData } from '../../actions/nodes';\nimport { getNodeSelected } from '../../selectors/nodes';\nimport { isModularPipelineType } from '../../selectors/node-types';\nimport NodeListTreeItem from './node-list-tree-item';\nimport VisibleIcon from '../icons/visible';\nimport InvisibleIcon from '../icons/invisible';\nimport FocusModeIcon from '../icons/focus-mode';\n\n// Display order of node groups\nconst GROUPED_NODES_DISPLAY_ORDER = {\n  modularPipeline: 0,\n  task: 1,\n  data: 2,\n  parameter: 3,\n};\n\n// please note that this setup is unique for initialization of the material-ui tree,\n// and setup is only used here and not anywhere else in the app.\nconst useStyles = makeStyles({\n  root: {\n    height: 110,\n    flexGrow: 1,\n    maxWidth: 400,\n  },\n});\n\nconst StyledTreeView = withStyles({\n  root: {\n    padding: '0 0 0 20px',\n  },\n})(TreeView);\n\n/**\n * Return whether the given modular pipeline ID is on focus mode path, i.e.\n * it's not the currently focused pipeline nor one of its children.\n * @param {String} focusModeID The currently focused modular pipeline ID.\n * @param {String} modularPipelineID The modular pipeline ID to check.\n * @return {Boolean} Whether the given modular pipeline ID is on focus mode path.\n */\nconst isOnFocusedModePath = (focusModeID, modularPipelineID) => {\n  return (\n    modularPipelineID === focusModeID ||\n    modularPipelineID.startsWith(`${focusModeID}.`)\n  );\n};\n\n/**\n * Return the data of a modular pipeline to display as a row in the node list.\n * @param {Object} params\n * @param {String} params.id The modular pipeline ID\n * @param {String} params.highlightedLabel The modular pipeline name with highlights when matched under search\n * @param {Object} params.data The modular pipeline data to display\n * @param {Boolean} params.disabled Whether the modular pipeline is disabled, e.g. when it's not the focused one\n * @param {Boolean} params.focused Whether the modular pipeline is the focused one in focus mode\n * @return {Object} The modular pipeline's data needed to render as a row in the node list tree.\n */\nconst getModularPipelineRowData = ({\n  id,\n  highlightedLabel,\n  data,\n  disabled,\n  focused,\n  focusModeIcon,\n}) => ({\n  id: id,\n  name: highlightedLabel || data.name,\n  type: 'modularPipeline',\n  icon: 'modularPipeline',\n  focusModeIcon: focusModeIcon,\n  active: false,\n  selected: false,\n  faded: false,\n  visible: true,\n  enabled: true,\n  disabled: disabled,\n  focused: focused,\n  checked: true,\n});\n\n/**\n * Return the data of a node to display as a row in the node list\n * @param {Object} node The node to display\n * @param {Boolean} selected Whether the node is currently disabled\n * @param {Boolean} selected Whether the node is currently selected\n */\nconst getNodeRowData = (node, disabled, selected) => {\n  const checked = !node.disabledNode;\n  return {\n    ...node,\n    visibleIcon: VisibleIcon,\n    invisibleIcon: InvisibleIcon,\n    active: node.active,\n    selected: selected,\n    faded: disabled || node.disabledNode,\n    visible: !disabled && checked,\n    checked,\n    disabled,\n  };\n};\n\nconst TreeListProvider = ({\n  nodeSelected,\n  modularPipelinesSearchResult,\n  modularPipelinesTree,\n  onItemChange,\n  onItemMouseEnter,\n  onItemMouseLeave,\n  onItemClick,\n  onNodeToggleExpanded,\n  focusMode,\n  expanded,\n  onToggleNodeSelected,\n}) => {\n  const classes = useStyles();\n\n  // render a leaf node in the modular pipelines tree\n  const renderLeafNode = (node) => {\n    const disabled =\n      node.disabledTag ||\n      node.disabledType ||\n      (focusMode &&\n        !node.modularPipelines\n          .map((modularPipelineID) =>\n            isOnFocusedModePath(focusMode.id, modularPipelineID)\n          )\n          .some(Boolean));\n    const selected = nodeSelected[node.id];\n    return (\n      <NodeListTreeItem\n        data={getNodeRowData(node, disabled, selected)}\n        onItemMouseEnter={onItemMouseEnter}\n        onItemMouseLeave={onItemMouseLeave}\n        onItemChange={onItemChange}\n        onItemClick={onItemClick}\n        key={node.id}\n      />\n    );\n  };\n\n  // recursively renders the modular pipeline tree\n  const renderTree = (tree, modularPipelineID) => {\n    // current tree node to render\n    const node = tree[modularPipelineID];\n    if (!node) {\n      return;\n    }\n\n    // render each child of the tree node first\n    const children = sortBy(\n      node.children,\n      (child) => GROUPED_NODES_DISPLAY_ORDER[child.type],\n      (child) => child.data.name\n    ).map((child) =>\n      isModularPipelineType(child.type)\n        ? renderTree(tree, child.id)\n        : renderLeafNode(child.data)\n    );\n\n    // then render the node itself wrapping around the children\n    // except when it's the root node,\n    // because we don't want to display the __root__ modular pipeline.\n    if (modularPipelineID === '__root__') {\n      return children;\n    }\n\n    const isFocusedModularPipeline = focusMode?.id === node.id;\n    let focusModeIcon;\n    if (!focusMode) {\n      focusModeIcon = FocusModeIcon;\n    } else {\n      focusModeIcon = isFocusedModularPipeline ? FocusModeIcon : null;\n    }\n\n    return (\n      <NodeListTreeItem\n        data={getModularPipelineRowData({\n          ...node,\n          focusModeIcon,\n          disabled: focusMode && !isOnFocusedModePath(focusMode.id, node.id),\n          focused: isFocusedModularPipeline,\n        })}\n        onItemMouseEnter={onItemMouseEnter}\n        onItemMouseLeave={onItemMouseLeave}\n        onItemChange={onItemChange}\n        onItemClick={onItemClick}\n        key={node.id}\n      >\n        {children}\n      </NodeListTreeItem>\n    );\n  };\n\n  const onItemExpandCollapseToggle = (event, expandedItemIds) => {\n    onNodeToggleExpanded(expandedItemIds);\n    //when the parent modular pipeline tree of the selected node is collapsed\n    if (expandedItemIds.length === 0) {\n      onToggleNodeSelected(null);\n    }\n  };\n\n  return modularPipelinesSearchResult ? (\n    <StyledTreeView\n      className={classes.root}\n      expanded={Object.keys(modularPipelinesSearchResult)}\n      defaultCollapseIcon={<ExpandMoreIcon />}\n      defaultExpandIcon={<ChevronRightIcon />}\n      key=\"modularPipelinesSearchResult\"\n    >\n      {renderTree(modularPipelinesSearchResult, '__root__')}\n    </StyledTreeView>\n  ) : (\n    <StyledTreeView\n      expanded={expanded}\n      className={classes.root}\n      defaultCollapseIcon={<ExpandMoreIcon />}\n      defaultExpandIcon={<ChevronRightIcon />}\n      onNodeToggle={onItemExpandCollapseToggle}\n      key=\"modularPipelinesTree\"\n    >\n      {renderTree(modularPipelinesTree, '__root__')}\n    </StyledTreeView>\n  );\n};\n\nexport const mapStateToProps = (state) => ({\n  nodeSelected: getNodeSelected(state),\n  expanded: state.modularPipeline.expanded,\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onToggleNodeSelected: (nodeID) => {\n    dispatch(loadNodeData(nodeID));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TreeListProvider);\n","import SplitPanel from './split-panel';\n\nexport default SplitPanel;\n","import { useState, useRef } from 'react';\n\n/**\n * Any React render function that returns elements, including those representing the container, panels and handle elements.\n * The state and props this function provides are expected to be applied these child elements to enable SplitPanel functionality.\n * See split-panel.test.js for a reference implementation.\n * @callback splitPanelRender\n * @param {object} state An object that contains a copy of the current split panel state and props intended for children\n * @param {boolean} state.isResizing Is `true` when the split is being actively moved, otherwise `false`\n * @param {number} state.split A number [0...1] as the current % split position\n * @param {object} state.props.container The props intended for the panel container element(s)\n * @param {object} state.props.panelA The props intended for the first panel descendent element(s)\n * @param {object} state.props.panelB The props intended for the second panel descendent element(s)\n * @param {object} state.props.handle The props intended for the handle descendent element(s)\n **/\n\n/**\n * A design agnostic user-resizable split panel controller.\n * Pass any React render function as this component's children and return your elements there.\n * See split-panel.test.js for a reference implementation.\n * @param {splitPanelRender} children Any React render function that returns elements including representing the container, panels, handle\n * @param {?number} [splitDefault=0.65] A number [0...1] as the default % split position\n * @param {?number} [splitMin=0] A number [0...1] as the minimum % split position\n * @param {?number} [splitMax=1] A number [0...1] as the maximum % split position\n * @param {?number} [keyboardStep=0.025] A number [0...1] as the % step to move split when using keyboard\n * @param {?string} [orientation='vertical'] Only 'vertical' currently supported\n **/\nexport const SplitPanel = ({\n  splitDefault = 0.65,\n  splitMin = 0,\n  splitMax = 1,\n  keyboardStep = 0.025,\n  orientation = 'vertical',\n  children,\n}) => {\n  const containerRef = useRef();\n  const handleRef = useRef();\n\n  const getRects = () => ({\n    container: containerRef.current?.getBoundingClientRect(),\n    handle: handleRef.current?.getBoundingClientRect(),\n  });\n\n  const clamp = (splitValue) => {\n    const rects = getRects();\n\n    const handleSize = rects.handle\n      ? rects.handle.height / rects.container.height\n      : 0;\n\n    if (splitValue < splitMin) {\n      return splitMin;\n    }\n\n    if (splitValue > splitMax - handleSize) {\n      return splitMax - handleSize;\n    }\n\n    return splitValue;\n  };\n\n  const [isResizing, setIsResizing] = useState(false);\n  const [split, setSplit] = useState(clamp(splitDefault));\n\n  const onMouse = (event) => {\n    if (event.type === 'mouseup') {\n      setIsResizing(false);\n      return;\n    }\n\n    if (isResizing || event.type === 'mousedown') {\n      const rects = getRects();\n\n      const mouseOffsetVertical =\n        (event.clientY - rects.container.top - rects.handle.height * 0.5) /\n        rects.container.height;\n\n      setIsResizing(true);\n      setSplit(clamp(mouseOffsetVertical));\n\n      event.preventDefault();\n    }\n  };\n\n  const onKey = (event) => {\n    const keyboardOffset =\n      {\n        ArrowUp: -keyboardStep,\n        ArrowLeft: -keyboardStep,\n        ArrowDown: keyboardStep,\n        ArrowRight: keyboardStep,\n      }[event.key] || 0;\n\n    if (keyboardOffset) {\n      setSplit(clamp(split + keyboardOffset));\n      event.preventDefault();\n    }\n  };\n\n  return children({\n    isResizing,\n    split,\n    props: {\n      container: {\n        ref: containerRef,\n        onMouseMove: onMouse,\n        onMouseUp: onMouse,\n      },\n      panelA: { style: { height: split * 100 + '%' } },\n      panelB: { style: { height: (1 - split) * 100 + '%' } },\n      handle: {\n        ref: handleRef,\n        role: 'separator',\n        'aria-orientation': orientation,\n        tabIndex: '0',\n        onMouseUp: onMouse,\n        onMouseDown: onMouse,\n        onKeyDown: onKey,\n      },\n    },\n  });\n};\n\nexport default SplitPanel;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport SearchList from '../search-list';\nimport NodeListGroups from './node-list-groups';\nimport NodeListTree from './node-list-tree';\nimport SplitPanel from '../split-panel';\n\nimport './styles/node-list.css';\n\n/**\n * Scrollable list of toggleable items, with search & filter functionality\n */\nconst NodeList = ({\n  faded,\n  items,\n  modularPipelinesTree,\n  modularPipelinesSearchResult,\n  groups,\n  searchValue,\n  getGroupState,\n  onUpdateSearchValue,\n  onGroupToggleChanged,\n  onItemClick,\n  onItemMouseEnter,\n  onItemMouseLeave,\n  onItemChange,\n  onModularPipelineToggleExpanded,\n  focusMode,\n}) => {\n  return (\n    <div\n      className={classnames('pipeline-nodelist', {\n        'pipeline-nodelist--fade': faded,\n      })}\n    >\n      <SearchList\n        onUpdateSearchValue={onUpdateSearchValue}\n        searchValue={searchValue}\n      />\n      <SplitPanel>\n        {({ isResizing, props: { container, panelA, panelB, handle } }) => (\n          <div\n            className={classnames('pipeline-nodelist__split', {\n              'pipeline-nodelist__split--resizing': isResizing,\n            })}\n            {...container}\n          >\n            <div className=\"pipeline-nodelist__elements-panel\" {...panelA}>\n              <Scrollbars\n                className=\"pipeline-nodelist-scrollbars\"\n                style={{ width: 'auto' }}\n                autoHide\n                hideTracksWhenNotNeeded\n              >\n                <div className=\"pipeline-nodelist-section\">\n                  <NodeListTree\n                    modularPipelinesSearchResult={modularPipelinesSearchResult}\n                    modularPipelinesTree={modularPipelinesTree}\n                    searchValue={searchValue}\n                    faded={faded}\n                    onItemClick={onItemClick}\n                    onItemMouseEnter={onItemMouseEnter}\n                    onItemMouseLeave={onItemMouseLeave}\n                    onItemChange={onItemChange}\n                    onNodeToggleExpanded={onModularPipelineToggleExpanded}\n                    focusMode={focusMode}\n                  />\n                </div>\n              </Scrollbars>\n            </div>\n            <div className=\"pipeline-nodelist__filter-panel\" {...panelB}>\n              <div className=\"pipeline-nodelist__split-handle\" {...handle} />\n              <Scrollbars\n                className=\"pipeline-nodelist-scrollbars\"\n                style={{ width: 'auto' }}\n                autoHide\n                hideTracksWhenNotNeeded\n              >\n                <h2 className=\"pipeline-nodelist-section__title\">Filters</h2>\n                <NodeListGroups\n                  items={items}\n                  groups={groups}\n                  searchValue={searchValue}\n                  getGroupState={getGroupState}\n                  onItemClick={onItemClick}\n                  onItemMouseEnter={onItemMouseEnter}\n                  onItemMouseLeave={onItemMouseLeave}\n                  onItemChange={onItemChange}\n                  onGroupToggleChanged={onGroupToggleChanged}\n                />\n              </Scrollbars>\n            </div>\n          </div>\n        )}\n      </SplitPanel>\n    </div>\n  );\n};\n\nexport default NodeList;\n","import React from 'react';\n\nconst IndicatorIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <rect x=\"8.5\" y=\"9\" width=\"5\" height=\"5\" rx=\"1\" strokeWidth=\"1.5\" />\n  </svg>\n);\n\nexport default IndicatorIcon;\n","import React from 'react';\n\nconst OffIndicatorIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    {/* Note: some strokeWidth values fail when zoomed in Chrome e.g. 2 */}\n    <rect x=\"8.5\" y=\"9\" width=\"5\" height=\"5\" rx=\"1\" strokeWidth=\"1.9\" />\n  </svg>\n);\n\nexport default OffIndicatorIcon;\n","import React from 'react';\n\nconst PartialIndicatorIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <rect x=\"6.5\" y=\"10.5\" width=\"8\" height=\"1.5\" />\n  </svg>\n);\n\nexport default PartialIndicatorIcon;\n","import { createSelector } from 'reselect';\nimport { sidebarElementTypes, sidebarGroups } from '../../config';\nimport IndicatorIcon from '../icons/indicator';\nimport IndicatorOffIcon from '../icons/indicator-off';\nimport IndicatorPartialIcon from '../icons/indicator-partial';\nimport InvisibleIcon from '../icons/invisible';\nimport VisibleIcon from '../icons/visible';\nimport { escapeRegExp, getHighlightedText } from '../../utils/search-utils';\n\nexport const isTagType = (type) => type === 'tag';\nexport const isElementType = (type) => type === 'elementType';\nexport const isGroupType = (type) => isElementType(type) || isTagType(type);\n\n/**\n * Get a list of IDs of the visible nodes from all groups\n * @param {object} nodeGroups Grouped lists of nodes by type\n * @return {array} List of node IDs\n */\nexport const getNodeIDs = (nodeGroups) =>\n  Object.values(nodeGroups).flatMap((nodes) => nodes.map((node) => node.id));\n\n/**\n * Add a new highlightedLabel field to each of the node objects\n * @param {object} nodeGroups Grouped lists of nodes by type\n * @param {string} searchValue Search term\n * @return {object} The grouped nodes with highlightedLabel fields added\n */\nexport const highlightMatch = (nodeGroups, searchValue) => {\n  const highlightedGroups = {};\n\n  for (const type of Object.keys(nodeGroups)) {\n    highlightedGroups[type] = nodeGroups[type].map((node) => ({\n      ...node,\n      highlightedLabel: getHighlightedText(node.name, searchValue),\n    }));\n  }\n\n  return highlightedGroups;\n};\n\n/**\n * Check whether a node matches the search text or true if no search value given\n * @param {object} node\n * @param {string} searchValue\n * @return {boolean} True if node matches or no search value given\n */\nexport const nodeMatchesSearch = (node, searchValue) => {\n  if (searchValue) {\n    return new RegExp(escapeRegExp(searchValue), 'gi').test(node.name);\n  }\n\n  return true;\n};\n\n/**\n * Return only the results that match the search text\n * @param {object} nodeGroups Grouped lists of nodes by type\n * @param {string} searchValue Search term\n * @return {object} Grouped nodes\n */\nexport const filterNodeGroups = (nodeGroups, searchValue) => {\n  const filteredGroups = {};\n\n  for (const nodeGroupId of Object.keys(nodeGroups)) {\n    filteredGroups[nodeGroupId] = nodeGroups[nodeGroupId].filter((node) =>\n      nodeMatchesSearch(node, searchValue)\n    );\n  }\n\n  return filteredGroups;\n};\n\n/**\n * Return filtered/highlighted nodes, and filtered node IDs\n * @param {object} nodeGroups Grouped lists of nodes by type\n * @param {string} searchValue Search term\n * @return {object} Grouped nodes, and node IDs\n */\nexport const getFilteredNodes = createSelector(\n  [(state) => state.nodes, (state) => state.searchValue],\n  (nodeGroups, searchValue) => {\n    const filteredGroups = filterNodeGroups(nodeGroups, searchValue);\n    return {\n      filteredNodes: highlightMatch(filteredGroups, searchValue),\n      nodeIDs: getNodeIDs(filteredGroups),\n    };\n  }\n);\n\n/**\n * Return filtered/highlighted tags\n * @param {object} tags List of tags\n * @param {string} searchValue Search term\n * @return {object} Grouped tags\n */\nexport const getFilteredTags = createSelector(\n  [(state) => state.tags, (state) => state.searchValue],\n  (tags, searchValue) =>\n    highlightMatch(filterNodeGroups({ tag: tags }, searchValue), searchValue)\n);\n\n/**\n * Return filtered/highlighted tag list items\n * @param {object} filteredTags List of filtered tags\n * @return {array} Node list items\n */\nexport const getFilteredTagItems = createSelector(\n  [getFilteredTags, (state) => state.tagNodeCounts],\n  (filteredTags, tagNodeCounts = {}) => ({\n    tag: filteredTags.tag.map((tag) => ({\n      ...tag,\n      type: 'tag',\n      visibleIcon: IndicatorIcon,\n      invisibleIcon: IndicatorOffIcon,\n      active: false,\n      selected: false,\n      faded: false,\n      visible: true,\n      disabled: false,\n      checked: tag.enabled,\n      count: tagNodeCounts[tag.id] || 0,\n    })),\n  })\n);\n\n/**\n * Return filtered/highlighted element types\n * @param {string} searchValue Search term\n * @return {object} Grouped element types\n */\nexport const getFilteredElementTypes = createSelector(\n  [(state) => state.searchValue],\n  (searchValue) =>\n    highlightMatch(\n      filterNodeGroups(\n        {\n          elementType: Object.entries(sidebarElementTypes).map(\n            ([type, name]) => ({\n              id: type,\n              name,\n            })\n          ),\n        },\n        searchValue\n      ),\n      searchValue\n    )\n);\n\n/**\n * Return filtered/highlighted element type items\n * @param {object} filteredTags List of filtered element types\n * @param {array} nodeTypes List of node types\n * @return {object} Element type items\n */\nexport const getFilteredElementTypeItems = createSelector(\n  [getFilteredElementTypes, (state) => state.nodeTypes],\n  (filteredElementTypes, nodeTypes) => ({\n    elementType: filteredElementTypes.elementType.map((elementType) => {\n      const nodeType = nodeTypes.find((type) => type.id === elementType.id);\n\n      return {\n        ...elementType,\n        type: 'elementType',\n        visibleIcon: IndicatorIcon,\n        invisibleIcon: IndicatorOffIcon,\n        active: false,\n        selected: false,\n        faded: false,\n        visible: true,\n        disabled: false,\n        checked: nodeType.disabled === false,\n        count: nodeType.nodeCount.total,\n      };\n    }),\n  })\n);\n\n/**\n * Compares items for sorting in groups first\n * by enabled status (by tag) and then alphabeticaly (by name)\n * @param {object} itemA First item to compare\n * @param {object} itemB Second item to compare\n * @return {number} Comparison result\n */\nconst compareEnabledThenAlpha = (itemA, itemB) => {\n  const byEnabledTag = Number(itemA.disabledTag) - Number(itemB.disabledTag);\n  const byAlpha = itemA.name.localeCompare(itemB.name);\n  return byEnabledTag !== 0 ? byEnabledTag : byAlpha;\n};\n\n/**\n * Compares items for sorting in groups first\n * by enabled status (by tag) and then alphabeticaly (by name)\n * @param {object} itemA First item to compare\n * @param {object} itemB Second item to compare\n * @return {number} Comparison result\n */\nexport const getFilteredNodeItems = createSelector(\n  [\n    getFilteredNodes,\n    (state) => state.nodeSelected,\n    (state) => state.focusMode,\n    (state) => state.inputOutputDataNodes,\n  ],\n  ({ filteredNodes }, nodeSelected, focusMode, inputOutputDataNodes) => {\n    const filteredNodeItems = {};\n\n    for (const type of Object.keys(filteredNodes)) {\n      filteredNodeItems[type] = filteredNodes[type]\n        .map((node) => {\n          const checked = !node.disabledNode;\n          const disabled =\n            node.disabledTag ||\n            node.disabledType ||\n            (focusMode !== null && !!inputOutputDataNodes[node.id]);\n\n          return {\n            ...node,\n            visibleIcon: VisibleIcon,\n            invisibleIcon: InvisibleIcon,\n            active: undefined,\n            selected: nodeSelected[node.id],\n            faded: disabled || node.disabledNode,\n            visible: !disabled && checked,\n            checked,\n            disabled,\n          };\n        })\n        .sort(compareEnabledThenAlpha);\n    }\n\n    return filteredNodeItems;\n  }\n);\n\n/**\n * Returns group items for each sidebar filter group defined in the sidebar config.\n * @param {object} items List items by group type\n * @return {array} List of groups\n */\nexport const getGroups = createSelector([(state) => state.items], (items) => {\n  const groups = {};\n\n  for (const [type, name] of Object.entries(sidebarGroups)) {\n    const itemsOfType = items[type] || [];\n    const allUnchecked = itemsOfType.every((item) => !item.checked);\n    const allChecked = itemsOfType.every((item) => item.checked);\n\n    groups[type] = {\n      type,\n      name,\n      id: type,\n      kind: 'filter',\n      allUnchecked: itemsOfType.every((item) => !item.checked),\n      allChecked: itemsOfType.every((item) => item.checked),\n      checked: !allUnchecked,\n      visibleIcon: allChecked ? IndicatorIcon : IndicatorPartialIcon,\n      invisibleIcon: IndicatorOffIcon,\n    };\n  }\n\n  return groups;\n});\n\n/**\n * Returns filtered/highlighted items for nodes & tags\n * @param {object} filteredNodeItems List of filtered nodes\n * @param {object} filteredTagItems List of filtered tags\n * @param {object} getFilteredElementTypeItems List of filtered element type items\n * @return {array} final list of all filtered items from the three filtered item sets\n */\nexport const getFilteredItems = createSelector(\n  [getFilteredNodeItems, getFilteredTagItems, getFilteredElementTypeItems],\n  (filteredNodeItems, filteredTagItems, filteredElementTypeItems) => ({\n    ...filteredTagItems,\n    ...filteredNodeItems,\n    ...filteredElementTypeItems,\n  })\n);\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport debounce from 'lodash/debounce';\nimport NodeList from './node-list';\nimport {\n  getFilteredItems,\n  getGroups,\n  isTagType,\n  isElementType,\n  isGroupType,\n} from './node-list-items';\nimport {\n  getNodeTypes,\n  isModularPipelineType,\n} from '../../selectors/node-types';\nimport { getTagData, getTagNodeCounts } from '../../selectors/tags';\nimport {\n  getFocusedModularPipeline,\n  getModularPipelinesSearchResult,\n} from '../../selectors/modular-pipelines';\nimport {\n  getGroupedNodes,\n  getNodeSelected,\n  getInputOutputNodesForFocusedModularPipeline,\n  getModularPipelinesTree,\n} from '../../selectors/nodes';\nimport { toggleTagActive, toggleTagFilter } from '../../actions/tags';\nimport { toggleTypeDisabled } from '../../actions/node-type';\nimport { toggleParametersHovered, toggleFocusMode } from '../../actions';\nimport {\n  toggleModularPipelineActive,\n  toggleModularPipelineExpanded,\n} from '../../actions/modular-pipelines';\nimport {\n  loadNodeData,\n  toggleNodeHovered,\n  toggleNodesDisabled,\n} from '../../actions/nodes';\nimport './styles/node-list.css';\n\n/**\n * Provides data from the store to populate a NodeList component.\n * Also handles user interaction and dispatches updates back to the store.\n */\nconst NodeListProvider = ({\n  faded,\n  nodes,\n  nodeSelected,\n  tags,\n  tagNodeCounts,\n  nodeTypes,\n  onToggleNodesDisabled,\n  onToggleNodeSelected,\n  onToggleNodeActive,\n  onToggleParametersActive,\n  onToggleTagActive,\n  onToggleTagFilter,\n  onToggleModularPipelineActive,\n  onToggleModularPipelineExpanded,\n  onToggleTypeDisabled,\n  onToggleFocusMode,\n  modularPipelinesTree,\n  focusMode,\n  inputOutputDataNodes,\n}) => {\n  const [searchValue, updateSearchValue] = useState('');\n  const items = getFilteredItems({\n    nodes,\n    tags,\n    nodeTypes,\n    tagNodeCounts,\n    nodeSelected,\n    searchValue,\n    focusMode,\n    inputOutputDataNodes,\n  });\n\n  const modularPipelinesSearchResult = searchValue\n    ? getModularPipelinesSearchResult(modularPipelinesTree, searchValue)\n    : null;\n\n  const groups = getGroups({ items });\n\n  const onItemClick = (item) => {\n    if (isGroupType(item.type)) {\n      onGroupItemChange(item, item.checked);\n    } else if (isModularPipelineType(item.type)) {\n      onToggleNodeSelected(null);\n    } else {\n      if (item.faded || item.selected) {\n        onToggleNodeSelected(null);\n      } else {\n        onToggleNodeSelected(item.id);\n      }\n    }\n  };\n\n  const onItemChange = (item, checked) => {\n    if (isGroupType(item.type) || isModularPipelineType(item.type)) {\n      onGroupItemChange(item, checked);\n      if (isModularPipelineType(item.type)) {\n        if (focusMode === null) {\n          onToggleFocusMode(item);\n        } else {\n          onToggleFocusMode(null);\n        }\n      }\n    } else {\n      if (checked) {\n        onToggleNodeActive(null);\n      }\n      onToggleNodesDisabled([item.id], checked);\n    }\n  };\n\n  const onItemMouseEnter = (item) => {\n    if (isTagType(item.type)) {\n      onToggleTagActive(item.id, true);\n    } else if (isModularPipelineType(item.type)) {\n      onToggleModularPipelineActive(item.id, true);\n    } else if (isElementType(item.type) && item.id === 'parameters') {\n      // Show parameters highlight when mouse enter parameters filter item\n      onToggleParametersActive(true);\n    } else if (item.visible) {\n      onToggleNodeActive(item.id);\n    }\n  };\n\n  const onItemMouseLeave = (item) => {\n    if (isTagType(item.type)) {\n      onToggleTagActive(item.id, false);\n    } else if (isModularPipelineType(item.type)) {\n      onToggleModularPipelineActive(item.id, false);\n    } else if (isElementType(item.type) && item.id === 'parameters') {\n      // Hide parameters highlight when mouse leave parameters filter item\n      onToggleParametersActive(false);\n    } else if (item.visible) {\n      onToggleNodeActive(null);\n    }\n  };\n\n  const onGroupToggleChanged = (groupType) => {\n    // Enable all items in group if none enabled, otherwise disable all of them\n    const groupItems = items[groupType] || [];\n    const groupItemsDisabled = groupItems.every(\n      (groupItem) => !groupItem.checked\n    );\n\n    if (isTagType(groupType)) {\n      onToggleTagFilter(\n        groupItems.map((item) => item.id),\n        groupItemsDisabled\n      );\n    } else if (isElementType(groupType)) {\n      onToggleTypeDisabled(\n        groupItems.reduce(\n          (state, item) => ({ ...state, [item.id]: !groupItemsDisabled }),\n          {}\n        )\n      );\n    }\n  };\n\n  const onGroupItemChange = (item, wasChecked) => {\n    // Toggle the group\n    if (isTagType(item.type)) {\n      onToggleTagFilter(item.id, !wasChecked);\n    } else if (isElementType(item.type)) {\n      onToggleTypeDisabled({ [item.id]: wasChecked });\n    }\n\n    // Reset node selection\n    onToggleNodeSelected(null);\n    onToggleNodeActive(null);\n  };\n\n  // Deselect node on Escape key\n  const handleKeyDown = (event) => {\n    if (event.keyCode === 27) {\n      onToggleNodeSelected(null);\n    }\n  };\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  });\n\n  return (\n    <NodeList\n      faded={faded}\n      items={items}\n      modularPipelinesTree={modularPipelinesTree}\n      modularPipelinesSearchResult={modularPipelinesSearchResult}\n      groups={groups}\n      searchValue={searchValue}\n      onUpdateSearchValue={debounce(updateSearchValue, 250)}\n      onModularPipelineToggleExpanded={onToggleModularPipelineExpanded}\n      onGroupToggleChanged={onGroupToggleChanged}\n      onItemClick={onItemClick}\n      onItemMouseEnter={onItemMouseEnter}\n      onItemMouseLeave={onItemMouseLeave}\n      onItemChange={onItemChange}\n      focusMode={focusMode}\n    />\n  );\n};\n\nexport const mapStateToProps = (state) => ({\n  tags: getTagData(state),\n  tagNodeCounts: getTagNodeCounts(state),\n  nodes: getGroupedNodes(state),\n  nodeSelected: getNodeSelected(state),\n  nodeTypes: getNodeTypes(state),\n  focusMode: getFocusedModularPipeline(state),\n  inputOutputDataNodes: getInputOutputNodesForFocusedModularPipeline(state),\n  modularPipelinesTree: getModularPipelinesTree(state),\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onToggleTagActive: (tagIDs, active) => {\n    dispatch(toggleTagActive(tagIDs, active));\n  },\n  onToggleTagFilter: (tagIDs, enabled) => {\n    dispatch(toggleTagFilter(tagIDs, enabled));\n  },\n  onToggleModularPipelineActive: (modularPipelineIDs, active) => {\n    dispatch(toggleModularPipelineActive(modularPipelineIDs, active));\n  },\n  onToggleTypeDisabled: (typeID, disabled) => {\n    dispatch(toggleTypeDisabled(typeID, disabled));\n  },\n  onToggleNodeSelected: (nodeID) => {\n    dispatch(loadNodeData(nodeID));\n  },\n  onToggleModularPipelineExpanded: (expanded) => {\n    dispatch(toggleModularPipelineExpanded(expanded));\n  },\n  onToggleNodeActive: (nodeID) => {\n    dispatch(toggleNodeHovered(nodeID));\n  },\n  onToggleParametersActive: (active) => {\n    dispatch(toggleParametersHovered(active));\n  },\n  onToggleNodesDisabled: (nodeIDs, disabled) => {\n    dispatch(toggleNodesDisabled(nodeIDs, disabled));\n  },\n  onToggleFocusMode: (modularPipeline) => {\n    dispatch(toggleFocusMode(modularPipeline));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NodeListProvider);\n","/**\n * Event Controller for managing listeners for the dropdown component.\n * Handles adding and removing listeners attached to body of the document.\n */\nclass EventController {\n  /**\n   * Manages the attachment of the event listener when body is clicked.\n   * @param {object} eventHandler - event handler which will be added\n   */\n  static addBodyListener(eventHandler) {\n    if (typeof window.__bodyEventHandlers === 'undefined') {\n      window.__bodyEventHandlers = [];\n    }\n\n    // add event handler to the array attached to the window so that it can be retrieved outside of component\n    window.__bodyEventHandlers.push(eventHandler);\n    // add the event handler to the body\n    document.body.addEventListener('click', eventHandler);\n\n    // indicate that event listeners are attached\n    window.__bodyListenerAttached = true;\n  }\n\n  /**\n   * Manages the removal of the event listeners when body is clicked - all event listeners added\n   * by dropdown components are removed.\n   * This method is static because it doesn't utilize 'this'.\n   */\n  static removeBodyListeners() {\n    if (window.__bodyListenerAttached) {\n      // remove all event listeners attached to body\n      window.__bodyEventHandlers.forEach((handler) => {\n        document.body.removeEventListener('click', handler);\n      });\n\n      // indicate that no listeners are attached and reset the array\n      window.__bodyEventHandlers = [];\n      window.__bodyListenerAttached = false;\n    }\n  }\n}\n\nexport default EventController;\n","// Keyboard character codes\nconst KEYS = {\n  13: 'enter',\n  27: 'escape',\n  38: 'up',\n  40: 'down',\n};\n\n/**\n * Convenience function for handling keyCodes and creating actions\n * @param  {number} keyCode - A keyboard character\n * @param  {Object} [keyActions] - An optional object-literal list of key names and actions\n * @return {Function|object} Either a function for a given key char, or nothing\n */\nconst handleKeyEvent = (keyCode, keyActions) => {\n  /**\n   * Execute a callback if a given key name matches the key code received\n   * @param {string}   keyName  - A key name string (e.g. 'left')\n   * @param {Function} callback - A function to execute if the key name matches the key code\n   */\n  const handleSingleKey = (keyName, callback) => {\n    if (keyCode in KEYS && KEYS[keyCode] === keyName.toLowerCase()) {\n      return callback();\n    }\n\n    return undefined;\n  };\n\n  if (keyActions) {\n    return Object.keys(keyActions).map((key) =>\n      handleSingleKey(key, keyActions[key])\n    );\n  }\n\n  // Handle a single key, or a comma-separated list of keys\n  return (key, callback) => {\n    if (key.includes(',')) {\n      return key.split(/\\s*,\\s*/).map((k) => handleSingleKey(k, callback));\n    }\n\n    return handleSingleKey(key, callback);\n  };\n};\n\nexport default handleKeyEvent;\n","import React from 'react';\n\nconst DropdownArrow = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M15.572 15.35L17 13.936l-4.997-4.953L7 13.93l1.432 1.417 3.586-3.55z\"></path>\n  </svg>\n);\n\nexport default DropdownArrow;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport handleKeyEvent from '../../../utils/key-events';\nimport uniqueId from 'lodash/uniqueId';\nimport DropdownArrow from '../../icons/dropdown-arrow';\n\n/**\n * Renderer for the Dropdown component\n */\nconst DropdownRenderer = ({\n  children,\n  defaultText,\n  disabled,\n  focusedOption,\n  handleRef,\n  onLabelClicked,\n  onOptionSelected,\n  onSelectChanged,\n  open,\n  selectedOption,\n  title,\n  width,\n}) => {\n  const wrapperClasses = classnames('kedro', 'dropdown', {\n    'dropdown--open': open,\n    'dropdown--disabled': disabled,\n  });\n  let optionIndex = 0;\n\n  /**\n   * Clone a React element and extend with extra props tieing it to a new scope\n   */\n  const _extendMenuOption = (element, id, index) => {\n    const extraProps = {\n      id,\n      onSelected: onOptionSelected,\n      focused: focusedOption === index,\n      selected:\n        selectedOption.id === id ||\n        (!selectedOption.id && element.props.selected),\n    };\n    optionIndex += 1;\n\n    return React.cloneElement(element, extraProps);\n  };\n\n  /**\n   * Handle keyboard events\n   * @param {Object} e - The key event object\n   */\n  const _handleKeyDown = (e) => {\n    if (open) {\n      handleKeyEvent(e.keyCode, {\n        escape: onLabelClicked,\n        up: onSelectChanged.bind(this, -1),\n        down: onSelectChanged.bind(this, 1),\n      });\n    } else {\n      handleKeyEvent(e.keyCode, {\n        up: onLabelClicked,\n        down: onLabelClicked,\n      });\n    }\n    // Prevent the page from scrolling etc when using the dropdown:\n    handleKeyEvent(e.keyCode)('escape, up, down', () => e.preventDefault());\n  };\n\n  const childElements = React.Children.toArray(children);\n  const sectionWrapRequired =\n    childElements[0] && typeof childElements[0].type === 'function';\n\n  // create options node\n  // we may have a plain array of Menu Options, in which case we'll wrap it with a section\n  // an array of sections, each containing an array of Menu Options\n  // sections may contain headings, which are defined as spans\n  const options = React.Children.map(childElements, (child, i) => {\n    switch (child.type) {\n      case 'section':\n        // one level of sections to iterate before we get to the Menu Options\n        return (\n          <section key={`menu-section-${uniqueId(i)}`}>\n            {React.Children.map(child.props.children, (sectionChild, j) => {\n              switch (sectionChild.type) {\n                case 'span':\n                  // Heading\n                  return sectionChild;\n                default:\n                  // Menu Option\n                  return _extendMenuOption(\n                    sectionChild,\n                    `menu-option-${i}.${j}`,\n                    optionIndex\n                  );\n              }\n            })}\n          </section>\n        );\n      case 'span':\n        // Heading\n        return child;\n      default:\n        // Menu Option\n        return _extendMenuOption(child, `menu-option-${i}`, optionIndex);\n    }\n  });\n\n  const optionsNode = sectionWrapRequired ? (\n    <section>{options}</section>\n  ) : (\n    options\n  );\n\n  return (\n    <div\n      aria-expanded={open.toString()}\n      aria-haspopup=\"true\"\n      className={wrapperClasses}\n      onKeyDown={_handleKeyDown}\n      ref={handleRef}\n      style={{ width: `${width}px` }}\n      title={title}\n    >\n      <button\n        type=\"button\"\n        disabled={disabled}\n        className=\"dropdown__label\"\n        onClick={onLabelClicked}\n      >\n        <span>{selectedOption.label || defaultText}</span>\n        <span className=\"dropdown__icon\">\n          <DropdownArrow />\n        </span>\n      </button>\n      <div className=\"dropdown__options\">{optionsNode}</div>\n    </div>\n  );\n};\n\nDropdownRenderer.defaultProps = {\n  children: null,\n  defaultText: 'Please select...',\n  disabled: false,\n  focusedOption: null,\n  handleRef: null,\n  onLabelClicked: null,\n  onOptionSelected: null,\n  onSelectChanged: null,\n  open: false,\n  selectedOption: null,\n  title: null,\n  width: 160,\n};\n\nDropdownRenderer.propTypes = {\n  /**\n   * Child items. The nodes which React will pass down, defined inside the DropdownRenderer tag.\n   */\n  children: PropTypes.node,\n  /**\n   * Default text to show in a closed unselected state\n   */\n  defaultText: PropTypes.string,\n  /**\n   * Whether to disable the dropdown\n   */\n  disabled: PropTypes.bool,\n  /**\n   * The index of the currently-focused menu option\n   */\n  focusedOption: PropTypes.number,\n  /**\n   * Retrieve a reference to the dropdown DOM node\n   */\n  handleRef: PropTypes.func,\n  /**\n   * Callback to be executed when the main label is clicked\n   */\n  onLabelClicked: PropTypes.func,\n  /**\n   * Callback to be executed when an option is selected\n   */\n  onOptionSelected: PropTypes.func,\n  /**\n   * Callback to be executed when the focused option changes\n   */\n  onSelectChanged: PropTypes.func,\n  /**\n   * Whether the dropdown is in an open state\n   */\n  open: PropTypes.bool,\n  /**\n   * An object containing selected option details.\n   * This will be created based on the id, primaryText, value of a selected Menu Option.\n   */\n  selectedOption: PropTypes.shape({\n    id: PropTypes.string,\n    label: PropTypes.string,\n    value: PropTypes.any,\n  }),\n\n  /**\n   * Title text for native tooltip\n   */\n  title: PropTypes.string,\n  /**\n   * The width for the component. Both the label and options are the same width\n   */\n  width: PropTypes.number,\n};\n\nexport default DropdownRenderer;\n","import React, { useCallback, useEffect, useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport 'what-input';\nimport { flatten, find, flow, isEqual, map } from 'lodash/fp';\nimport EventController from './event-controller.js';\nimport { usePrevious } from '../../../utils/hooks';\nimport DropdownRenderer from './dropdown-renderer';\n\nimport './dropdown.css';\n\nconst Dropdown = (props) => {\n  const {\n    children,\n    defaultText,\n    disabled,\n    onChanged,\n    onClosed,\n    onOpened,\n    width,\n  } = props;\n\n  /**\n   * Format the selected option props for adding to state\n   * @param {Object} props - Component props\n   * @return {Object} Selected option object for use in the state\n   */\n  const _findSelectedOption = useCallback((props) => {\n    const selectedOptionElement = _findSelectedOptionElement(props);\n\n    // check children for a selected option\n    if (selectedOptionElement) {\n      const { id, primaryText, value } = selectedOptionElement.props;\n\n      return {\n        id,\n        label: primaryText,\n        value,\n      };\n    }\n\n    // otherwise, default to first\n    return {\n      id: null,\n      label: null,\n      value: null,\n    };\n  }, []);\n\n  /**\n   * Find the selected option by traversing sections and MenuOptions\n   * @param {Object} props - Component props (optional)\n   * @return {Object} Selected option element\n   */\n  const _findSelectedOptionElement = (props) => {\n    const children = React.Children.toArray(props.children);\n\n    if (!children.length) {\n      return null;\n    }\n\n    // we may have an array of options\n    // or an array of sections, containing options\n    if (children[0].type === 'section') {\n      return flow(\n        map((x) => x.props.children),\n        flatten,\n        find((x) => x.props.selected)\n      )(children);\n    }\n\n    return find((child) => child.props.selected)(children);\n  };\n\n  const prevProps = usePrevious(props);\n  const [focusedOption, setFocusedOption] = useState(null);\n  const [haveClicked, setHaveClicked] = useState(false); // tracker for detecting _handleLabelClicked\n  const [selectedOption, setSelectedOption] = useState(\n    _findSelectedOption(props)\n  );\n  const [open, setOpen] = useState(false);\n  const [selectedObject, setSelectedObject] = useState(null); // this is to store the object that was passed from the handleOptionSelected event handler\n\n  const dropdownRef = useRef();\n  const handleOptionSelectedRef = useRef({ open, selectedOption });\n  const selectedObjRef = useRef(selectedObject);\n\n  const mounted = useRef(false); // ref for detecting mounting of component\n\n  useEffect(() => {\n    /**\n     * Check whether new props contain updated children\n     * @param {Object} nextProps - New component props\n     * @return {Boolean} True if new children are different from current ones\n     */\n    const _childrenHaveChanged = (nextProps) => {\n      const children = [props, nextProps].map((props) =>\n        React.Children.toArray(props.children)\n      );\n\n      return !isEqual(...children);\n    };\n\n    if (!mounted.current) {\n      // update mounted on componentDidMount\n      mounted.current = true;\n    } else {\n      // triggers every time on componentDidUpdate\n      if (_childrenHaveChanged(prevProps)) {\n        setSelectedOption(_findSelectedOption(prevProps));\n      }\n    }\n  }, [_findSelectedOption, prevProps, props]);\n\n  useEffect(() => {\n    if (haveClicked === true) {\n      if (typeof onOpened === 'function' && open) {\n        onOpened();\n      } else if (typeof onClosed === 'function' && !open) {\n        onClosed();\n      }\n\n      setHaveClicked(false);\n    }\n  }, [haveClicked, onOpened, onClosed, open]);\n\n  // to be fired after state changes triggered by handleOptionSelected event handler\n  useEffect(() => {\n    // This check is to ensure that only the changes in the handleOptionSelected event handler will trigger this effect\n    if (selectedObjRef.current !== selectedObject) {\n      if (\n        !open &&\n        handleOptionSelectedRef.current.handleOptionSelectedRef !==\n          selectedOption\n      ) {\n        if (typeof onChanged === 'function') {\n          onChanged(selectedObject);\n        }\n      }\n      if (!open && typeof onClosed === 'function') {\n        onClosed();\n      }\n    }\n  });\n\n  // Event to be fired on componentWillUnmount\n  useEffect(() => {\n    return () => EventController.removeBodyListeners();\n  }, []);\n\n  useEffect(() => {\n    // Focus either the button label or the active option.\n    // This is so screen-readers will follow the active element\n    const focusClass =\n      focusedOption !== null ? '.menu-option--focused' : '.dropdown__label';\n\n    dropdownRef.current.querySelector(focusClass).focus();\n  }, [focusedOption]);\n\n  /**\n   * Handler for closing a dropdown if a click occurred outside the dropdown.\n   * @param {object} e - event object\n   */\n  const _handleBodyClicked = (e) => {\n    if (!dropdownRef.current.contains(e.target) && open) {\n      _handleClose();\n    }\n  };\n\n  /**\n   * Event handler which is fired when the label is clicked\n   */\n  const _handleLabelClicked = () => {\n    // remove or add the event listeners for\n    if (open) {\n      EventController.removeBodyListeners();\n    } else {\n      EventController.addBodyListener(_handleBodyClicked);\n    }\n    // revert the state of open\n    setOpen(!open);\n    // set the click tracker to true to trigger the userEffect callback\n    setHaveClicked(true);\n\n    _focusLabel();\n  };\n\n  /**\n   * Sort, filter and flatten the list of children to retrieve just the MenuOptions,\n   * with any Sections removed.\n   * @return {Object} A flat list of MenuOptions\n   */\n  const _getOptionsList = () => {\n    /**\n     * Recurse through sections to retrieve a list of all MenuOptions\n     * @param  {Object} previous The Options array as of the previous iteration\n     * @param  {Object} current  The current item (either a MenuOption or Section)\n     * @return {Object}          The current state of the Options array\n     */\n    const getSectionChildren = (previous, current) => {\n      if (current.props.primaryText) {\n        // MenuOption: Add to list\n        return previous.concat(current);\n      }\n      if (current.type === 'section') {\n        // Section: Keep recursing\n        return previous.concat(\n          current.props.children.reduce(getSectionChildren, [])\n        );\n      }\n      return previous;\n    };\n\n    return React.Children.toArray(props.children).reduce(\n      getSectionChildren,\n      []\n    );\n  };\n\n  /**\n   * Convenience method to return focus from an option to the label.\n   * This is particularly useful for screen-readers and keyboard users.\n   */\n  const _focusLabel = () => {\n    dropdownRef.current.querySelector('.dropdown__label').focus();\n\n    setFocusedOption(null);\n  };\n\n  /**\n   * When the focused option changes (e.g. via up/down keyboard controls),\n   * update the focusedOption index state and select the new one\n   * @param {number} direction - The direction that focus is travelling through the list:\n   * negative is up and positive is down.\n   */\n  const _handleFocusChange = (direction) => {\n    let newFocusedOption = focusedOption;\n    const optionsLength = _getOptionsList().length;\n\n    if (focusedOption === null) {\n      newFocusedOption = direction > 0 ? 0 : optionsLength - 1;\n    } else {\n      newFocusedOption += direction;\n    }\n    if (newFocusedOption >= optionsLength || newFocusedOption < 0) {\n      newFocusedOption = null;\n    }\n\n    setFocusedOption(newFocusedOption);\n  };\n\n  /**\n   * Event handler which is fired when a child item is selected\n   */\n  const _handleOptionSelected = (obj) => {\n    const { label, id, value } = obj;\n\n    setSelectedObject(obj);\n\n    // detect if the selected item has changed\n    const hasChanged = value !== selectedOption.value;\n    if (hasChanged) {\n      const newSelectedOption = { label, value, id };\n\n      setOpen(false);\n      setSelectedOption(newSelectedOption);\n    } else {\n      setOpen(false);\n    }\n    _focusLabel();\n  };\n\n  /**\n   * Retrieve a reference to the dropdown DOM node (from the renderer component),\n   * and assign it to a class-wide variable property.\n   * @param {object} el - The ref for the Dropdown container node\n   */\n  const _handleRef = (el) => {\n    dropdownRef.current = el;\n  };\n\n  /**\n   * API method to close the dropdown\n   */\n  const _handleClose = () => {\n    setOpen(false);\n\n    // remove event listener\n    EventController.removeBodyListeners();\n  };\n\n  return (\n    <DropdownRenderer\n      defaultText={defaultText}\n      disabled={disabled}\n      handleRef={_handleRef}\n      onLabelClicked={_handleLabelClicked}\n      onOptionSelected={_handleOptionSelected}\n      onSelectChanged={_handleFocusChange}\n      open={open}\n      focusedOption={focusedOption}\n      selectedOption={selectedOption}\n      width={width}\n    >\n      {children}\n    </DropdownRenderer>\n  );\n};\n\nDropdown.defaultProps = {\n  children: null,\n  defaultText: 'Please select...',\n  disabled: false,\n  onChanged: null,\n  onClosed: null,\n  onOpened: null,\n  width: 160,\n};\n\nDropdown.propTypes = {\n  /**\n   * Child items. The nodes which React will pass down, defined inside the DropdownRenderer tag\n   */\n  children: PropTypes.node.isRequired,\n  /**\n   * Default text to show in a closed unselected state\n   */\n  defaultText: PropTypes.string,\n  /**\n   * Whether to disable the dropdown\n   */\n  disabled: PropTypes.bool,\n  /**\n   * Callback function to be executed when a menu item is clicked, other than the one currently selected.\n   */\n  onChanged: PropTypes.func,\n  /**\n   * Callback to be executed after menu opens\n   */\n  onOpened: PropTypes.func,\n  /**\n   * Callback to be executed after menu closed\n   */\n  onClosed: PropTypes.func,\n  /**\n   * The width for the component. Both the label and options are the same width\n   */\n  width: PropTypes.number,\n};\n\nexport default Dropdown;\n","import { useEffect, useRef } from 'react';\n\n/**\n * Custom hook to obtain previous values before state changes. The value can be any data type.\n * @param {value} object\n */\nexport const usePrevious = (value) => {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\n","import Dropdown from './dropdown';\n\nexport default Dropdown;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport handleKeyEvent from '../../../utils/key-events';\nimport './menu-option.css';\n\n/**\n * Generic Kedro Menu Option\n */\nconst MenuOption = ({\n  className,\n  focused,\n  id,\n  onSelected,\n  primaryText,\n  selected,\n  value,\n}) => {\n  const wrapperClasses = classnames('kedro', 'menu-option', className, {\n    'menu-option--focused': focused,\n    'menu-option--selected': selected,\n  });\n\n  /**\n   * Event handler executed when the option is selected\n   * @param  {object} e The event object\n   * @return {function}   The event handler\n   */\n  const _handleClicked = (e) =>\n    onSelected({\n      event: e,\n      id,\n      label: primaryText,\n      value,\n    });\n\n  /**\n   * Event handler executed when key events are triggered on the focused option\n   * @param {Object} e - The key event object\n   */\n  const _handleKeyDown = (e) =>\n    handleKeyEvent(e.keyCode)('enter, space', () => {\n      _handleClicked(e);\n      // Prevent the page from scrolling when selecting an item:\n      e.preventDefault();\n    });\n\n  return (\n    <div\n      aria-selected={selected.toString()}\n      className={wrapperClasses}\n      onClick={_handleClicked}\n      onKeyDown={_handleKeyDown}\n      role=\"option\"\n      tabIndex=\"-1\"\n    >\n      <div className=\"menu-option__content\" title={primaryText}>\n        <span>{primaryText}</span>\n      </div>\n    </div>\n  );\n};\n\nMenuOption.defaultProps = {\n  className: null,\n  focused: false,\n  id: null,\n  onSelected: null,\n  selected: false,\n  value: null,\n};\n\nMenuOption.propTypes = {\n  /**\n   * Container class\n   */\n  className: PropTypes.string,\n  /**\n   * Whether the option is focused\n   */\n  focused: PropTypes.bool,\n  /**\n   * A unique key for this element, which will be set by the parent menu component.\n   * This is used by the parent menu component to determine which option is selected.\n   */\n  id: PropTypes.string,\n  /**\n   * A callback which is automatically implemented by a parent menu component\n   */\n  onSelected: PropTypes.func,\n  /**\n   * The main label displayed\n   */\n  primaryText: PropTypes.string.isRequired,\n  /**\n   * Whether the option is selected\n   */\n  selected: PropTypes.bool,\n  /**\n   * The value to send to the parent menu component when this item is selected\n   */\n  value: PropTypes.any,\n};\n\nexport default MenuOption;\n","import MenuOption from './menu-option';\n\nexport default MenuOption;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport Dropdown from '../ui/dropdown';\nimport MenuOption from '../ui/menu-option';\nimport { loadPipelineData } from '../../actions/pipelines';\nimport { toggleFocusMode } from '../../actions';\nimport './pipeline-list.css';\n\n/**\n * A Dropdown displaying a list of selectable pipelines\n * @param {Object} pipeline Pipeline IDs, names, and active pipeline\n * @param {Function} onUpdateActivePipeline Handle updating the active pipeline\n * @param {Function} onToggleOpen Callback when opening/closing the dropdown\n */\nexport const PipelineList = ({\n  asyncDataSource,\n  onUpdateActivePipeline,\n  pipeline,\n  prettyName,\n  onToggleOpen,\n}) => {\n  if (!pipeline.ids.length && !asyncDataSource) {\n    return null;\n  }\n  return (\n    <div className=\"pipeline-list\">\n      <Dropdown\n        disabled={!pipeline.ids.length}\n        onOpened={() => onToggleOpen(true)}\n        onClosed={() => onToggleOpen(false)}\n        width={null}\n        onChanged={onUpdateActivePipeline}\n        defaultText={\n          prettyName\n            ? pipeline.name[pipeline.active]\n            : pipeline.active || 'Default'\n        }\n      >\n        {pipeline.ids.map((id) => (\n          <MenuOption\n            key={`pipeline-${id}`}\n            className={classnames({\n              'pipeline-list__option--active': pipeline.active === id,\n            })}\n            value={id}\n            primaryText={prettyName ? pipeline.name[id] : id}\n          />\n        ))}\n      </Dropdown>\n    </div>\n  );\n};\n\nexport const mapStateToProps = (state) => ({\n  asyncDataSource: state.dataSource === 'json',\n  pipeline: state.pipeline,\n  prettyName: state.prettyName,\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onUpdateActivePipeline: (event) => {\n    dispatch(loadPipelineData(event.value));\n    dispatch(toggleFocusMode(null));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PipelineList);\n","import PipelineList from './pipeline-list';\n\nexport default PipelineList;\n","import Switch from './switch';\n\nexport default Switch;\n","import React, { useState } from 'react';\nimport classnames from 'classnames';\n\nimport './switch.css';\n\nconst Switch = ({ defaultChecked = false, onChange }) => {\n  const [checked, setChecked] = useState(defaultChecked);\n\n  const onClick = () => {\n    setChecked(!checked);\n    onChange && onChange();\n  };\n\n  return (\n    <div className=\"switch\" onClick={onClick}>\n      <span className=\"switch__label\">{checked ? 'On' : 'Off'}</span>\n      <div className=\"switch__root\">\n        <div\n          className={classnames('switch__base', {\n            'switch__base--active': checked,\n          })}\n        >\n          <input\n            className=\"switch__input\"\n            defaultChecked={checked}\n            type=\"checkbox\"\n          />\n          <div className=\"switch__circle\"></div>\n        </div>\n        <div className=\"switch__track\"></div>\n      </div>\n    </div>\n  );\n};\n\nexport default Switch;\n","import Accordion from './accordion';\n\nexport default Accordion;\n","import React, { useEffect, useState } from 'react';\nimport classnames from 'classnames';\n\nimport './accordion.css';\n\n/**\n * A collapsable container component.\n * @param {object} children React children\n * @param {string|null} className A top-level class name for the component.\n * @param {string} heading Text to display on the top-level.\n * @param {string|null} headingClassName A class name for the accordion header.\n * @param {string|null} headingDetail Text to display on the top-level.\n * @param {boolean} isCollapsed Control to collapse or expand the content.\n * @param {string|null} layout A secondary text string for additional context\n * @param {function} onCallback Fire a function on click from a parent.\n * @param {string} size Set the header font size.\n */\nconst Accordion = ({\n  children,\n  className = null,\n  heading = '',\n  headingClassName = null,\n  headingDetail = null,\n  isCollapsed = false,\n  layout = 'right',\n  onCallback,\n  size = 'small',\n}) => {\n  const [collapsed, setCollapsed] = useState(isCollapsed);\n\n  useEffect(() => {\n    setCollapsed(isCollapsed);\n  }, [isCollapsed]);\n\n  const onClick = () => {\n    setCollapsed(!collapsed);\n    onCallback && onCallback();\n  };\n\n  return (\n    <div\n      className={classnames('accordion', {\n        'accordion--left': layout === 'left',\n        [`${className}`]: className,\n      })}\n    >\n      <div\n        className={classnames('accordion__heading', {\n          [`${headingClassName}`]: headingClassName,\n        })}\n      >\n        {layout === 'left' && (\n          <button\n            aria-label={`${\n              collapsed ? 'Show' : 'Hide'\n            } ${heading.toLowerCase()}`}\n            onClick={onClick}\n            className={classnames('accordion__toggle', {\n              'accordion__toggle--alt': collapsed,\n            })}\n          />\n        )}\n        <div\n          className={classnames('accordion__title', {\n            'accordion__title--medium': size === 'medium',\n            'accordion__title--large': size === 'large',\n          })}\n        >\n          {heading}\n          {headingDetail && (\n            <span className=\"accordion__title__detail\">{headingDetail}</span>\n          )}\n        </div>\n        {layout === 'right' && (\n          <button\n            aria-label={`${\n              collapsed ? 'Show' : 'Hide'\n            } ${heading.toLowerCase()}`}\n            onClick={onClick}\n            className={classnames('accordion__toggle', {\n              'accordion__toggle--alt': collapsed,\n            })}\n          />\n        )}\n      </div>\n      <div className={collapsed ? 'accordion__content--hide' : null}>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default Accordion;\n","import dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nconst _dayJs = dayjs.extend(relativeTime);\n\nconst formatTimestamp = (timestamp) =>\n  timestamp.replace('.', ':').replace('.', ':');\n\n/**\n * Take a timestamp and return a meaningful length of time, e.g. 5 months ago\n * Kedro uses this format VERSION_FORMAT = \"%Y-%m-%dT%H.%M.%S.%fZ\"\n * So we need to do some string manipulation to get it to this formatted\n * version: 2021-11-08T18:31:01.171Z\n * @param {string} timestamp The timestamp to be converted\n * @returns A human-readable from-now date\n */\nexport const toHumanReadableTime = (timestamp) => {\n  return _dayJs(formatTimestamp(timestamp)).fromNow();\n};\n\n/**\n * Take a set of runIds and sort them in ascending order of time\n * Kedro uses this format VERSION_FORMAT = \"%Y-%m-%dT%H.%M.%S.%fZ\"\n * So we need to do some string manipulation to get it to this formatted\n * version: 2021-11-08T18:31:01.171Z\n * @param {array} runIds The runID which adopts the same format as the timestamp\n * @returns a sorted list of runIDs according to ascending time\n */\nexport const sortRunByTime = (runIds) => {\n  const runsWithTimestamps = runIds.map((runId) => ({\n    id: runId,\n    dateObj: new Date(formatTimestamp(runId)),\n  }));\n\n  runsWithTimestamps.sort((a, b) => new Date(a.dateObj) - new Date(b.dateObj));\n\n  return runsWithTimestamps.map((run) => run.id);\n};\n","import React from 'react';\n\nconst CheckIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M9.95 17.314 5 12.364l1.414-1.414 3.536 3.535L18.435 6l1.414 1.414z\" />\n  </svg>\n);\n\nexport default CheckIcon;\n","import RunsListCard from './runs-list-card';\n\nexport default RunsListCard;\n","import React, { useEffect, useState } from 'react';\nimport { useUpdateRunDetails } from '../../../apollo/mutations';\nimport classnames from 'classnames';\nimport {\n  getHighlightedText,\n  textMatchesSearch,\n} from '../../../utils/search-utils';\nimport { toHumanReadableTime } from '../../../utils/date-utils';\nimport BookmarkIcon from '../../icons/bookmark';\nimport BookmarkStrokeIcon from '../../icons/bookmark-stroke';\nimport CheckIcon from '../../icons/check';\n\nimport './runs-list-card.css';\n\n/**\n * Display a card showing run info from an experiment\n * @param {object} data High-level data from the run (id, etc.)\n */\nconst RunsListCard = ({\n  data,\n  disableRunSelection = false,\n  enableComparisonView = false,\n  onRunSelection,\n  selectedRunIds = [],\n  searchValue,\n}) => {\n  const { id, notes, title = null, bookmark, gitSha } = data;\n  const [active, setActive] = useState(false);\n  const { updateRunDetails } = useUpdateRunDetails();\n  const humanReadableTime = toHumanReadableTime(id);\n\n  const isMatchSearchValue = (text) =>\n    searchValue ? textMatchesSearch(text, searchValue) : false;\n\n  const displayValue = (value) =>\n    isMatchSearchValue(value) ? getHighlightedText(value, searchValue) : value;\n\n  const isSearchValueInNotes = isMatchSearchValue(notes);\n\n  const onRunsListCardClick = (id, e) => {\n    /**\n     * If we click the bookmark icon or the path HTML element within the SVG,\n     * then update the bookmark boolean. If we didn't check for the path, the\n     * user could hit a dead zone, and nothing would happen.\n     */\n    if (\n      e.target.classList.contains('runs-list-card__bookmark') ||\n      e.target.tagName === 'path'\n    ) {\n      updateRunDetails({\n        runId: id,\n        runInput: { bookmark: !bookmark },\n      });\n\n      return;\n    }\n\n    onRunSelection(id);\n  };\n\n  useEffect(() => {\n    setActive(selectedRunIds.includes(id));\n  }, [id, selectedRunIds]);\n\n  return (\n    <div\n      className={classnames('kedro', 'runs-list-card', {\n        'runs-list-card--active': active,\n        'runs-list-card--disabled': disableRunSelection && !active,\n      })}\n      onClick={(e) => onRunsListCardClick(id, e)}\n    >\n      {enableComparisonView && (\n        <CheckIcon\n          className={classnames('runs-list-card__checked', {\n            'runs-list-card__checked--active': active,\n            'runs-list-card__checked--comparing': enableComparisonView,\n          })}\n        />\n      )}\n      <div>\n        <div\n          className=\"runs-list-card__title\"\n          dangerouslySetInnerHTML={{\n            __html: displayValue(title),\n          }}\n        />\n\n        <div\n          className=\"runs-list-card__gitsha\"\n          dangerouslySetInnerHTML={{\n            __html: displayValue(gitSha),\n          }}\n        />\n        <div className=\"runs-list-card__timestamp\">{humanReadableTime}</div>\n        {isSearchValueInNotes && (\n          <div\n            className=\"runs-list-card__notes\"\n            dangerouslySetInnerHTML={{\n              __html: `Notes:  <em>${displayValue(notes)}</em>`,\n            }}\n          />\n        )}\n      </div>\n      {bookmark ? (\n        <BookmarkIcon\n          className={'runs-list-card__bookmark runs-list-card__bookmark--solid'}\n        />\n      ) : (\n        <BookmarkStrokeIcon\n          className={\n            'runs-list-card__bookmark runs-list-card__bookmark--stroke'\n          }\n        />\n      )}\n    </div>\n  );\n};\n\nexport default RunsListCard;\n","import RunsList from './runs-list';\n\nexport default RunsList;\n","import React, { useState } from 'react';\nimport debounce from 'lodash/debounce';\nimport { textMatchesSearch } from '../../../utils/search-utils';\nimport SearchList from '../../search-list';\nimport Switch from '../../ui/switch';\nimport Accordion from '../accordion';\nimport RunsListCard from '../runs-list-card';\nimport './runs-list.css';\n\n/**\n * Return only the runs that match the search text\n * @param {object} runData original set of runs\n * @param {string} searchValue Search term\n * @return {object} Grouped nodes\n */\nconst getFilteredRunList = (runData, searchValue) => {\n  // filter the runs that matches the runId\n  const filteredRuns = runData?.filter(\n    (run) =>\n      textMatchesSearch(run.title, searchValue) ||\n      textMatchesSearch(run.notes, searchValue) ||\n      textMatchesSearch(run.gitSha, searchValue)\n  );\n\n  return filteredRuns;\n};\n\nconst RunsList = ({\n  disableRunSelection,\n  enableComparisonView,\n  onRunSelection,\n  onToggleComparisonView,\n  runData,\n  selectedRunIds,\n}) => {\n  const [searchValue, updateSearchValue] = useState('');\n\n  const filteredRunList = getFilteredRunList(runData, searchValue);\n\n  const bookmarkedRuns = filteredRunList.filter((run) => run.bookmark === true);\n  const unbookmarkedRuns = filteredRunList.filter(\n    (run) => run.bookmark === false\n  );\n\n  return (\n    <>\n      <div className=\"runs-list-top-wrapper\">\n        <div className=\"search-bar-wrapper\">\n          <SearchList\n            onUpdateSearchValue={debounce(updateSearchValue, 250)}\n            searchValue={searchValue}\n          />\n        </div>\n        <div className=\"compare-switch-wrapper\">\n          <span className=\"compare-switch-wrapper__text\">\n            Compare runs (max. 3)\n          </span>\n          <Switch onChange={onToggleComparisonView} />\n        </div>\n      </div>\n      {bookmarkedRuns.length > 0 ? (\n        <Accordion\n          heading=\"Bookmarked\"\n          headingClassName=\"runs-list__accordion-header\"\n          headingDetail={bookmarkedRuns.length}\n        >\n          <div className=\"runs-list__wrapper\">\n            {bookmarkedRuns.map((data, i) => (\n              <RunsListCard\n                data={data}\n                disableRunSelection={disableRunSelection}\n                enableComparisonView={enableComparisonView}\n                key={i}\n                onRunSelection={onRunSelection}\n                selectedRunIds={selectedRunIds}\n                searchValue={searchValue}\n              />\n            ))}\n          </div>\n        </Accordion>\n      ) : null}\n      {unbookmarkedRuns.length > 0 ? (\n        <Accordion\n          heading={`${bookmarkedRuns.length === 0 ? 'All' : 'Unbookmarked'}`}\n          headingClassName=\"runs-list__accordion-header\"\n          headingDetail={unbookmarkedRuns.length}\n        >\n          <div className=\"runs-list__wrapper\">\n            {unbookmarkedRuns.map((data, i) => (\n              <RunsListCard\n                data={data}\n                disableRunSelection={disableRunSelection}\n                enableComparisonView={enableComparisonView}\n                key={i}\n                onRunSelection={onRunSelection}\n                selectedRunIds={selectedRunIds}\n                searchValue={searchValue}\n              />\n            ))}\n          </div>\n        </Accordion>\n      ) : null}\n    </>\n  );\n};\n\nexport default RunsList;\n","import Sidebar from './sidebar';\n\nexport default Sidebar;\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport ExperimentPrimaryToolbar from '../experiment-tracking/experiment-primary-toolbar';\nimport FlowchartPrimaryToolbar from '../flowchart-primary-toolbar';\nimport MiniMap from '../minimap';\nimport MiniMapToolbar from '../minimap-toolbar';\nimport NodeList from '../node-list';\nimport PipelineList from '../pipeline-list';\nimport RunsList from '../experiment-tracking/runs-list';\n\nimport './sidebar.css';\n\n/**\n * Main app container. Handles showing/hiding the sidebar nav, and theme classes.\n * @param {boolean} props.visible Whether the sidebar is open/closed\n */\nexport const Sidebar = ({\n  disableRunSelection,\n  displayGlobalToolbar,\n  enableComparisonView,\n  enableShowChanges,\n  isExperimentView = false,\n  onRunSelection,\n  onToggleComparisonView,\n  runsListData,\n  runMetadata,\n  runTrackingData,\n  selectedRunData,\n  selectedRunIds,\n  setEnableShowChanges,\n  setSidebarVisible,\n  showRunDetailsModal,\n  sidebarVisible,\n  visible,\n}) => {\n  const [pipelineIsOpen, togglePipeline] = useState(false);\n\n  if (isExperimentView) {\n    return (\n      <>\n        <div\n          className={classnames('pipeline-sidebar', {\n            'pipeline-sidebar--visible': sidebarVisible,\n          })}\n        >\n          <div className=\"pipeline-ui pipeline-ui--experiment-tracking\">\n            <RunsList\n              disableRunSelection={disableRunSelection}\n              enableComparisonView={enableComparisonView}\n              onRunSelection={onRunSelection}\n              runData={runsListData}\n              selectedRunIds={selectedRunIds}\n              onToggleComparisonView={onToggleComparisonView}\n            />\n          </div>\n          <nav className=\"pipeline-toolbar\">\n            <ExperimentPrimaryToolbar\n              enableComparisonView={enableComparisonView}\n              enableShowChanges={enableShowChanges}\n              selectedRunData={selectedRunData}\n              setEnableShowChanges={setEnableShowChanges}\n              setSidebarVisible={setSidebarVisible}\n              showChangesIconDisabled={!(selectedRunIds.length > 1)}\n              showRunDetailsModal={showRunDetailsModal}\n              sidebarVisible={sidebarVisible}\n              runMetadata={runMetadata}\n              runTrackingData={runTrackingData}\n            />\n          </nav>\n        </div>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <div\n          className={classnames('pipeline-sidebar', {\n            'pipeline-sidebar--visible': visible,\n            'pipeline-sidebar--no-global-toolbar': !displayGlobalToolbar,\n          })}\n        >\n          <div className=\"pipeline-ui\">\n            <PipelineList onToggleOpen={togglePipeline} />\n            <NodeList faded={pipelineIsOpen} />\n          </div>\n          <nav className=\"pipeline-toolbar\">\n            <FlowchartPrimaryToolbar />\n            <MiniMapToolbar />\n          </nav>\n          <MiniMap />\n        </div>\n      </>\n    );\n  }\n};\n\nconst mapStateToProps = (state) => ({\n  visible: state.visible.sidebar,\n  displayGlobalToolbar: state.display.globalToolbar,\n});\n\nexport default connect(mapStateToProps)(Sidebar);\n","import FlowChartWrapper from './flowchart-wrapper';\n\nexport default FlowChartWrapper;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { isLoading } from '../../selectors/loading';\nimport ExportModal from '../export-modal';\nimport FlowChart from '../flowchart';\nimport LargePipelineWarning from '../large-pipeline-warning';\nimport LoadingIcon from '../icons/loading';\nimport MetaData from '../metadata';\nimport PlotlyModal from '../plotly-modal';\nimport Sidebar from '../sidebar';\nimport './flowchart-wrapper.css';\n\n/**\n * Main flowchart container. Handles showing/hiding the sidebar nav for flowchart view,\n * the rendering of the flowchart, as well as the display of all related modals.\n */\nexport const FlowChartWrapper = ({ loading }) => (\n  <div className=\"kedro-pipeline\">\n    <Sidebar />\n    <MetaData />\n    <div className=\"pipeline-wrapper\">\n      <LargePipelineWarning />\n      <FlowChart />\n      <LoadingIcon className=\"pipeline-wrapper__loading\" visible={loading} />\n    </div>\n    <ExportModal />\n    <PlotlyModal />\n  </div>\n);\n\nexport const mapStateToProps = (state) => ({\n  loading: isLoading(state),\n});\n\nexport default connect(mapStateToProps)(FlowChartWrapper);\n","import gql from 'graphql-tag';\n\n/** subscribe to receive new runs */\nexport const NEW_RUN_SUBSCRIPTION = gql`\n  subscription {\n    runsAdded {\n      id\n      bookmark\n      gitSha\n      title\n    }\n  }\n`;\n","import React from 'react';\n\nconst KebabIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M12 16a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm0-6a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm0-6a2 2 0 1 1 0 4 2 2 0 0 1 0-4z\" />\n  </svg>\n);\n\nexport default KebabIcon;\n","import React from 'react';\n\nconst SelectedPinIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M12 4a8 8 0 1 1 0 16 8 8 0 0 1 0-16zm0 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\" />\n  </svg>\n);\n\nexport default SelectedPinIcon;\n","import React from 'react';\n\nconst UnSelectedPinIcon = ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M12 4a8 8 0 1 1 0 16 8 8 0 0 1 0-16zm0 2a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 4a2 2 0 1 1 0 4 2 2 0 0 1 0-4z\" />\n  </svg>\n);\n\nexport default UnSelectedPinIcon;\n","import React, { useState } from 'react';\nimport classnames from 'classnames';\nimport { useUpdateRunDetails } from '../../../apollo/mutations';\nimport { toHumanReadableTime } from '../../../utils/date-utils';\nimport CloseIcon from '../../icons/close';\nimport IconButton from '../../ui/icon-button';\nimport KebabIcon from '../../icons/kebab';\nimport SelectedPin from '../../icons/selected-pin';\nimport UnSelectedPin from '../../icons/un-selected-pin';\n\nimport './run-metadata.css';\n\n// Return a '-' character if the value is empty or null\nconst sanitiseEmptyValue = (value) => {\n  return value === '' || value === null ? '-' : value;\n};\n\nconst HiddenMenu = ({ children, isBookmarked, runId }) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const { updateRunDetails } = useUpdateRunDetails();\n\n  const toggleBookmark = () => {\n    updateRunDetails({\n      runId,\n      runInput: { bookmark: !isBookmarked },\n    });\n  };\n\n  return (\n    <div\n      className=\"hidden-menu-wrapper\"\n      onClick={() => setIsVisible(!isVisible)}\n    >\n      <div\n        className={classnames('hidden-menu', {\n          'hidden-menu--visible': isVisible,\n        })}\n      >\n        <div className=\"hidden-menu__item\" onClick={() => toggleBookmark()}>\n          {isBookmarked ? 'Unbookmark' : 'Bookmark'}\n        </div>\n      </div>\n      {children}\n    </div>\n  );\n};\n\nconst RunMetadata = ({\n  enableShowChanges = false,\n  isSingleRun,\n  onRunSelection,\n  pinnedRun,\n  runs = [],\n  setPinnedRun,\n  setRunMetadataToEdit,\n  setShowRunDetailsModal,\n}) => {\n  let initialState = {};\n  for (let i = 0; i < runs.length; i++) {\n    initialState[i] = false;\n  }\n\n  const [toggleNotes, setToggleNotes] = useState(initialState);\n\n  const onToggleNoteExpand = (index) => {\n    setToggleNotes({ ...toggleNotes, [index]: !toggleNotes[index] });\n  };\n\n  const onTitleOrNoteClick = (id) => {\n    const metadata = runs.find((run) => run.id === id);\n\n    setRunMetadataToEdit(metadata);\n    setShowRunDetailsModal(true);\n  };\n\n  return (\n    <div\n      className={classnames('details-metadata', {\n        'details-metadata--single': isSingleRun,\n      })}\n    >\n      {runs.map((run, i) => {\n        const humanReadableTime = toHumanReadableTime(run.id);\n\n        return (\n          <div\n            className={classnames('details-metadata__run', {\n              'details-metadata__run--single': isSingleRun,\n            })}\n            key={run.id}\n          >\n            <table className=\"details-metadata__table\">\n              <tbody>\n                {isSingleRun ? (\n                  <tr>\n                    <td className=\"details-metadata__title\" colSpan=\"2\">\n                      <span\n                        onClick={() => onTitleOrNoteClick(run.id)}\n                        title={sanitiseEmptyValue(run.title)}\n                      >\n                        {sanitiseEmptyValue(run.title)}\n                      </span>\n                    </td>\n                  </tr>\n                ) : (\n                  <tr>\n                    {i === 0 ? <td></td> : null}\n                    <td className=\"details-metadata__title\">\n                      <span\n                        onClick={() => onTitleOrNoteClick(run.id)}\n                        title={sanitiseEmptyValue(run.title)}\n                      >\n                        {sanitiseEmptyValue(run.title)}\n                      </span>\n                      <ul className=\"details-metadata__buttons\">\n                        <IconButton\n                          ariaLive=\"polite\"\n                          className={classnames(\n                            'pipeline-menu-button--labels',\n                            'pipeline-menu-button__pin',\n                            {\n                              'details-metadata__buttons--selected-pin':\n                                run.id === pinnedRun,\n                            }\n                          )}\n                          onClick={() => setPinnedRun(run.id)}\n                          icon={\n                            run.id === pinnedRun ? SelectedPin : UnSelectedPin\n                          }\n                          visible={enableShowChanges}\n                        />\n                        <HiddenMenu isBookmarked={run.bookmark} runId={run.id}>\n                          <IconButton\n                            ariaLive=\"polite\"\n                            className=\"pipeline-menu-button--labels\"\n                            icon={KebabIcon}\n                          />\n                        </HiddenMenu>\n                        <IconButton\n                          ariaLive=\"polite\"\n                          className=\"pipeline-menu-button--labels\"\n                          onClick={() => onRunSelection(run.id)}\n                          icon={CloseIcon}\n                        />\n                      </ul>\n                    </td>\n                  </tr>\n                )}\n                <tr>\n                  {i === 0 ? <td>Created By</td> : null}\n                  <td>{sanitiseEmptyValue(run.author)}</td>\n                </tr>\n                <tr>\n                  {i === 0 ? <td>Creation Date</td> : null}\n                  <td>{`${humanReadableTime} (${sanitiseEmptyValue(\n                    run.id\n                  )})`}</td>\n                </tr>\n                <tr>\n                  {i === 0 ? <td>Git SHA</td> : null}\n                  <td>{sanitiseEmptyValue(run.gitSha)}</td>\n                </tr>\n                <tr>\n                  {i === 0 ? <td>Git Branch</td> : null}\n                  <td>{sanitiseEmptyValue(run.gitBranch)}</td>\n                </tr>\n                <tr>\n                  {i === 0 ? <td>Run Command</td> : null}\n                  <td>{sanitiseEmptyValue(run.runCommand)}</td>\n                </tr>\n                <tr>\n                  {i === 0 ? <td>Notes</td> : null}\n                  <td>\n                    <p\n                      className=\"details-metadata__notes\"\n                      onClick={() => onTitleOrNoteClick(run.id)}\n                      style={toggleNotes[i] ? { display: 'block' } : null}\n                    >\n                      {run.notes !== '' ? run.notes : '- Add notes here'}\n                    </p>\n                    {run.notes.length > 100 ? (\n                      <button\n                        className=\"details-metadata__show-more kedro\"\n                        onClick={() => onToggleNoteExpand(i)}\n                      >\n                        {toggleNotes[i] ? 'Show less' : 'Show more'}\n                      </button>\n                    ) : null}\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default RunMetadata;\n","import RunMetadata from './run-metadata';\n\nexport default RunMetadata;\n","import React from 'react';\n\nexport const paths = {\n  upArrow:\n    'm10 4.167 4.583 4.583-1.146 1.146-2.604-2.604v9.375H9.167V7.292L6.563 9.896 5.417 8.75z',\n  downArrow:\n    'M10 15.833 5.417 11.25l1.145-1.146 2.605 2.604V3.333h1.666v9.375l2.604-2.604 1.146 1.146z',\n};\n\nconst PinArrowIcon = ({ className, icon }) => {\n  return paths[icon] ? (\n    <svg className=\"dataset-arrow-icon\" viewBox=\"0 0 24 24\">\n      <path d={paths[icon]} />\n    </svg>\n  ) : null;\n};\n\nexport default PinArrowIcon;\n","import React from 'react';\nimport classnames from 'classnames';\nimport Accordion from '../accordion';\nimport PinArrowIcon from '../../icons/pin-arrow';\nimport { sanitizeValue } from '../../../utils/experiment-tracking-utils';\n\nimport './run-dataset.css';\n\nconst determinePinIcon = (data, pinValue, pinnedRun) => {\n  if (data.runId !== pinnedRun && typeof data.value === 'number') {\n    if (data.value > pinValue) {\n      return 'upArrow';\n    }\n    if (data.value < pinValue) {\n      return 'downArrow';\n    }\n  }\n  return null;\n};\n\nconst resolveRunDataWithPin = (runData, pinnedRun) => {\n  const pinValue = runData.filter((data) => data.runId === pinnedRun)[0]?.value;\n\n  if (typeof pinValue === 'number') {\n    return runData.map((data) => ({\n      pinIcon: determinePinIcon(data, pinValue, pinnedRun),\n      ...data,\n    }));\n  }\n\n  return runData;\n};\n\n/**\n * Display the dataset of the experiment tracking run.\n * @param {boolean} props.enableShowChanges Are changes enabled or not.\n * @param {boolean} props.isSingleRun Indication to display a single run.\n * @param {string} props.pinnedRun ID of the pinned run.\n * @param {array} props.selectedRunIds Array of strings of runIds.\n * @param {array} props.trackingData The experiment tracking run data.\n */\nconst RunDataset = ({\n  enableShowChanges,\n  isSingleRun,\n  pinnedRun,\n  selectedRunIds,\n  trackingData = [],\n}) => {\n  return (\n    <div\n      className={classnames('details-dataset', {\n        'details-dataset--single': isSingleRun,\n      })}\n    >\n      {trackingData.map((dataset) => {\n        const { data, datasetName } = dataset;\n\n        return (\n          <Accordion\n            className=\"details-dataset__accordion\"\n            heading={datasetName}\n            headingClassName=\"details-dataset__accordion-header\"\n            key={dataset.datasetName}\n            layout=\"left\"\n            size=\"large\"\n          >\n            {Object.keys(data)\n              .sort((a, b) => {\n                return a.localeCompare(b);\n              })\n              .map((key, rowIndex) => {\n                return buildDatasetDataMarkup(\n                  key,\n                  dataset.data[key],\n                  rowIndex,\n                  isSingleRun,\n                  pinnedRun,\n                  enableShowChanges,\n                  selectedRunIds\n                );\n              })}\n          </Accordion>\n        );\n      })}\n    </div>\n  );\n};\n\n/**\n * Build the necessary markup used to display the run dataset.\n * @param {string} datasetKey The row label of the data.\n * @param {array} datasetValues A single dataset array from a run.\n * @param {number} rowIndex The array index of the dataset data.\n * @param {boolean} isSingleRun Whether or not this is a single run.\n * @param {string} pinnedRun ID of the pinned run.\n * @param {boolean} enableShowChanges Are changes enabled or not.\n * @param {array} selectedRunIds Array of strings of runIds.\n */\nfunction buildDatasetDataMarkup(\n  datasetKey,\n  datasetValues,\n  rowIndex,\n  isSingleRun,\n  pinnedRun,\n  enableShowChanges,\n  selectedRunIds\n) {\n  const updatedDatasetValues = fillEmptyMetrics(datasetValues, selectedRunIds);\n  const runDataWithPin = resolveRunDataWithPin(updatedDatasetValues, pinnedRun);\n\n  return (\n    <React.Fragment key={datasetKey + rowIndex}>\n      {rowIndex === 0 ? (\n        <div className=\"details-dataset__row\">\n          <span\n            className={classnames('details-dataset__name-header', {\n              'details-dataset__value-header--single': isSingleRun,\n            })}\n          >\n            Name\n          </span>\n          {datasetValues.map((value, index) => (\n            <span\n              className={classnames('details-dataset__value-header', {\n                'details-dataset__value-header--single': isSingleRun,\n              })}\n              key={value.runId + index}\n            >\n              Value\n            </span>\n          ))}\n        </div>\n      ) : null}\n      <div className=\"details-dataset__row\">\n        <span\n          className={classnames('details-dataset__label', {\n            'details-dataset__label--single': isSingleRun,\n          })}\n        >\n          {datasetKey}\n        </span>\n        {runDataWithPin.map((data, index) => (\n          <span\n            className={classnames('details-dataset__value', {\n              'details-dataset__value--single': isSingleRun,\n            })}\n            key={data.runId + index}\n          >\n            {sanitizeValue(data.value)}\n            {enableShowChanges && <PinArrowIcon icon={data.pinIcon} />}\n          </span>\n        ))}\n      </div>\n    </React.Fragment>\n  );\n}\n\n/**\n * Fill in missing run metrics if they don't match the number of runIds.\n * @param {array} datasetValues Array of objects for a metric, e.g. r2_score.\n * @param {array} selectedRunIds Array of strings of runIds.\n * @returns Array of objects, the length of which matches the length\n * of the selectedRunIds.\n */\nfunction fillEmptyMetrics(datasetValues, selectedRunIds) {\n  if (datasetValues.length === selectedRunIds.length) {\n    return datasetValues;\n  }\n\n  const metrics = [];\n\n  selectedRunIds.forEach((id) => {\n    const foundIdIndex = datasetValues.findIndex((item) => {\n      return item.runId === id;\n    });\n\n    // We didn't find a metric with this runId, so add a placeholder.\n    if (foundIdIndex === -1) {\n      metrics.push({ runId: id, value: null });\n    } else {\n      metrics.push(datasetValues[foundIdIndex]);\n    }\n  });\n\n  return metrics;\n}\n\nexport default RunDataset;\n","import RunDataset from './run-dataset';\n\nexport default RunDataset;\n","import React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\n\nimport './input.css';\n\nconst MIN_HEIGHT = 20;\n\nconst Input = ({\n  characterLimit = false,\n  defaultValue = '',\n  onChange,\n  placeholder,\n  resetValueTrigger,\n  size = 'large',\n}) => {\n  const isLimitSet = characterLimit > 0;\n  const ref = useRef(null);\n  const [value, setValue] = useState(defaultValue);\n\n  useEffect(() => {\n    setValue(defaultValue);\n  }, [defaultValue]);\n\n  useEffect(() => {\n    setValue(defaultValue);\n  }, [defaultValue, resetValueTrigger]);\n\n  useLayoutEffect(() => {\n    ref.current.style.height = 'inherit';\n\n    ref.current.style.height = `${Math.max(\n      ref.current.scrollHeight,\n      MIN_HEIGHT\n    )}px`;\n  }, [value]);\n\n  const handleChange = (e) => {\n    const value = e.target.value;\n\n    if (isLimitSet) {\n      setValue(value.slice(0, characterLimit));\n      onChange && onChange(value.slice(0, characterLimit));\n    } else {\n      setValue(value.slice(0));\n      onChange && onChange(value.slice(0));\n    }\n  };\n\n  return (\n    <>\n      <textarea\n        className={`input input--${size}`}\n        onChange={handleChange}\n        placeholder={placeholder}\n        ref={ref}\n        rows={1}\n        value={value}\n      />\n      {isLimitSet ? (\n        <div className=\"input-character-count\">\n          <span>\n            <span className=\"input-number-characters\">{value.length}</span>/\n            {characterLimit} characters\n          </span>\n        </div>\n      ) : null}\n    </>\n  );\n};\n\nexport default Input;\n","import RunDetailsModal from './run-details-modal';\n\nexport default RunDetailsModal;\n","import React, { useEffect, useState } from 'react';\nimport { useUpdateRunDetails } from '../../../apollo/mutations';\nimport Button from '../../ui/button';\nimport Modal from '../../ui/modal';\nimport Input from '../../ui/input';\n\nimport '../../settings-modal/settings-modal.css';\nimport './run-details-modal.css';\n\nconst RunDetailsModal = ({ onClose, runMetadataToEdit, theme, visible }) => {\n  const [valuesToUpdate, setValuesToUpdate] = useState({});\n  const { updateRunDetails, error, reset } = useUpdateRunDetails();\n\n  const onApplyChanges = () => {\n    updateRunDetails({\n      runId: runMetadataToEdit.id,\n      runInput: { notes: valuesToUpdate.notes, title: valuesToUpdate.title },\n    });\n  };\n\n  const onChange = (key, value) => {\n    setValuesToUpdate(\n      Object.assign({}, valuesToUpdate, {\n        [key]: value,\n      })\n    );\n  };\n\n  useEffect(() => {\n    setValuesToUpdate({\n      notes: runMetadataToEdit?.notes,\n      title: runMetadataToEdit?.title,\n    });\n  }, [runMetadataToEdit]);\n\n  useEffect(() => {\n    /**\n     * If there's a GraphQL error when trying to update the title/notes,\n     * reset the mutation when the modal closes so the error doesn't appear\n     * the next time the modal opens.\n     */\n    reset();\n  }, [reset, visible]);\n\n  return (\n    <div className=\"pipeline-settings-modal pipeline-settings-modal--experiment-tracking\">\n      <Modal\n        onClose={() => onClose(false)}\n        theme={theme}\n        title=\"Edit run details\"\n        visible={visible}\n      >\n        <div className=\"pipeline-settings-modal__content pipeline-settings-modal__content--short\">\n          <div className=\"pipeline-settings-modal__header\">\n            <div className=\"pipeline-settings-modal__name\">Run name</div>\n          </div>\n          <Input\n            defaultValue={runMetadataToEdit?.title}\n            onChange={(value) => onChange('title', value)}\n            size=\"large\"\n          />\n        </div>\n        <div className=\"pipeline-settings-modal__content pipeline-settings-modal__content--short\">\n          <div className=\"pipeline-settings-modal__header\">\n            <div className=\"pipeline-settings-modal__name\">Notes</div>\n          </div>\n          <Input\n            characterLimit={500}\n            defaultValue={runMetadataToEdit?.notes || ''}\n            onChange={(value) => onChange('notes', value)}\n            placeholder=\"Add here\"\n            resetValueTrigger={visible}\n            size=\"small\"\n          />\n        </div>\n        <div className=\"run-details-modal-button-wrapper\">\n          <Button mode=\"secondary\" onClick={() => onClose(false)} size=\"small\">\n            Cancel\n          </Button>\n          <Button onClick={onApplyChanges} size=\"small\">\n            Apply changes\n          </Button>\n        </div>\n        {error ? (\n          <div className=\"run-details-modal-error-wrapper\">\n            <p>Couldn't update run details. Please try again later.</p>\n          </div>\n        ) : null}\n      </Modal>\n    </div>\n  );\n};\n\nexport default RunDetailsModal;\n","import Details from './details';\n\nexport default Details;\n","import React, { useEffect, useState } from 'react';\nimport classnames from 'classnames';\nimport RunMetadata from '../run-metadata';\nimport RunDataset from '../run-dataset';\nimport RunDetailsModal from '../run-details-modal';\n\nimport './details.css';\n\nconst Details = ({\n  enableComparisonView,\n  enableShowChanges,\n  metadataError,\n  onRunSelection,\n  pinnedRun,\n  runMetadata,\n  runTrackingData,\n  selectedRunIds,\n  setPinnedRun,\n  setShowRunDetailsModal,\n  showRunDetailsModal,\n  sidebarVisible,\n  theme,\n  trackingDataError,\n}) => {\n  const [runMetadataToEdit, setRunMetadataToEdit] = useState(null);\n\n  useEffect(() => {\n    if (runMetadata && !enableComparisonView) {\n      const metadata = runMetadata.find((run) => run.id === selectedRunIds[0]);\n\n      setRunMetadataToEdit(metadata);\n    }\n  }, [enableComparisonView, runMetadata, selectedRunIds]);\n\n  const isSingleRun = runMetadata?.length === 1 ? true : false;\n\n  if (metadataError || trackingDataError) {\n    return null;\n  }\n\n  return (\n    <>\n      <RunDetailsModal\n        onClose={setShowRunDetailsModal}\n        runs={runMetadata}\n        runMetadataToEdit={runMetadataToEdit}\n        theme={theme}\n        visible={showRunDetailsModal}\n      />\n      <div\n        className={classnames('kedro', 'details-mainframe', {\n          'details-mainframe--sidebar-visible': sidebarVisible,\n        })}\n      >\n        <RunMetadata\n          enableShowChanges={enableShowChanges}\n          isSingleRun={isSingleRun}\n          onRunSelection={onRunSelection}\n          pinnedRun={pinnedRun}\n          runs={runMetadata}\n          setPinnedRun={setPinnedRun}\n          setRunMetadataToEdit={setRunMetadataToEdit}\n          setShowRunDetailsModal={setShowRunDetailsModal}\n        />\n        <RunDataset\n          enableShowChanges={enableShowChanges}\n          isSingleRun={isSingleRun}\n          pinnedRun={pinnedRun}\n          selectedRunIds={selectedRunIds}\n          trackingData={runTrackingData}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default Details;\n","import ExperimentWrapper from './experiment-wrapper';\n\nexport default ExperimentWrapper;\n","import React, { useEffect, useState } from 'react';\nimport { useApolloQuery } from '../../apollo/utils';\nimport { connect } from 'react-redux';\nimport {\n  GET_RUNS,\n  GET_RUN_METADATA,\n  GET_RUN_TRACKING_DATA,\n} from '../../apollo/queries';\nimport { NEW_RUN_SUBSCRIPTION } from '../../apollo/subscriptions';\nimport { sortRunByTime } from '../../utils/date-utils';\nimport Button from '../ui/button';\nimport Details from '../experiment-tracking/details';\nimport Sidebar from '../sidebar';\n\nimport './experiment-wrapper.css';\n\nconst MAX_NUMBER_COMPARISONS = 2; // 0-based, so three.\n\nconst ExperimentWrapper = ({ theme }) => {\n  const [disableRunSelection, setDisableRunSelection] = useState(false);\n  const [enableComparisonView, setEnableComparisonView] = useState(false);\n  const [enableShowChanges, setEnableShowChanges] = useState(true);\n  const [isSidebarVisible, setIsSidebarVisible] = useState(true);\n  const [pinnedRun, setPinnedRun] = useState();\n  const [selectedRunIds, setSelectedRunIds] = useState([]);\n  const [selectedRunData, setSelectedRunData] = useState(null);\n  const [showRunDetailsModal, setShowRunDetailsModal] = useState(false);\n\n  // Fetch all runs.\n  const { subscribeToMore, data, loading } = useApolloQuery(GET_RUNS);\n\n  // Fetch all metadata for selected runs.\n  const { data: { runMetadata } = [], metadataError } = useApolloQuery(\n    GET_RUN_METADATA,\n    {\n      skip: selectedRunIds.length === 0,\n      variables: { runIds: selectedRunIds },\n    }\n  );\n\n  // Fetch all tracking data for selected runs.\n  const { data: { runTrackingData } = [], error: trackingDataError } =\n    useApolloQuery(GET_RUN_TRACKING_DATA, {\n      skip: selectedRunIds.length === 0,\n      variables: { runIds: selectedRunIds, showDiff: true },\n    });\n\n  const onRunSelection = (id) => {\n    if (enableComparisonView) {\n      if (selectedRunIds.includes(id)) {\n        if (selectedRunIds.length === 1) {\n          return;\n        }\n        setSelectedRunIds(\n          // Runs need to be sorted by time to ensure runIDs get sent to the\n          // graphql endpoint in correct order.\n          sortRunByTime(selectedRunIds.filter((run) => run !== id))\n        );\n      } else {\n        setSelectedRunIds(sortRunByTime([...selectedRunIds, id]));\n      }\n    } else {\n      if (selectedRunIds.includes(id)) {\n        return;\n      } else {\n        setSelectedRunIds([id]);\n      }\n    }\n  };\n\n  const onToggleComparisonView = () => {\n    setEnableComparisonView(!enableComparisonView);\n\n    if (enableComparisonView && selectedRunIds.length > 1) {\n      setSelectedRunIds(selectedRunIds.slice(0, 1));\n    }\n  };\n\n  useEffect(() => {\n    if (selectedRunIds.length > MAX_NUMBER_COMPARISONS) {\n      setDisableRunSelection(true);\n    } else {\n      setDisableRunSelection(false);\n    }\n  }, [selectedRunIds]);\n\n  useEffect(() => {\n    if (data?.runsList.length > 0 && selectedRunIds.length === 0) {\n      /**\n       * If we return runs and don't yet have a selected run, set the first one\n       * as the default, with precedence given to runs that are bookmarked.\n       */\n      const bookmarkedRuns = data.runsList.filter((run) => {\n        return run.bookmark === true;\n      });\n\n      if (bookmarkedRuns.length > 0) {\n        setSelectedRunIds(bookmarkedRuns.map((run) => run.id).slice(0, 1));\n      } else {\n        setSelectedRunIds(data.runsList.map((run) => run.id).slice(0, 1));\n      }\n    }\n  }, [data, selectedRunIds]);\n\n  useEffect(() => {\n    /**\n     * If we return runs and aren't in comparison view, set a single selected\n     * run data object for use in the ExperimentPrimaryToolbar component.\n     */\n    if (data?.runsList.length > 0 && !enableComparisonView) {\n      const singleSelectedRunData = data.runsList.filter((run) => {\n        return run.id === selectedRunIds[0];\n      })[0];\n\n      setSelectedRunData(singleSelectedRunData);\n    }\n  }, [data, enableComparisonView, selectedRunIds]);\n\n  useEffect(() => {\n    if (\n      typeof pinnedRun === 'undefined' ||\n      !selectedRunIds.includes(pinnedRun)\n    ) {\n      // Assign the first selected run as the first pinned run.\n      setPinnedRun(selectedRunIds[0]);\n    }\n  }, [selectedRunIds, pinnedRun]);\n\n  useEffect(() => {\n    if (!data?.runsList || data.runsList.length === 0) {\n      return;\n    }\n\n    subscribeToMore({\n      document: NEW_RUN_SUBSCRIPTION,\n      updateQuery: (prev, { subscriptionData }) => {\n        if (!subscriptionData.data || !prev?.runsList) {\n          return prev;\n        }\n        const newRuns = subscriptionData.data.runsAdded;\n\n        return Object.assign({}, prev, {\n          runsList: [...newRuns, ...prev.runsList],\n        });\n      },\n    });\n  }, [data, subscribeToMore]);\n\n  if (loading) {\n    return (\n      <div className=\"experiment-wrapper\">\n        <p className=\"experiment-wrapper__text\">Loading...</p>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {data?.runsList.length > 0 ? (\n        <>\n          <Sidebar\n            disableRunSelection={disableRunSelection}\n            enableComparisonView={enableComparisonView}\n            enableShowChanges={enableShowChanges}\n            isExperimentView\n            onRunSelection={onRunSelection}\n            onToggleComparisonView={onToggleComparisonView}\n            runMetadata={runMetadata}\n            runsListData={data.runsList}\n            runTrackingData={runTrackingData}\n            selectedRunData={selectedRunData}\n            selectedRunIds={selectedRunIds}\n            setEnableShowChanges={setEnableShowChanges}\n            setSidebarVisible={setIsSidebarVisible}\n            showRunDetailsModal={setShowRunDetailsModal}\n            sidebarVisible={isSidebarVisible}\n          />\n          {selectedRunIds.length > 0 ? (\n            <Details\n              enableComparisonView={enableComparisonView}\n              enableShowChanges={enableShowChanges && selectedRunIds.length > 1}\n              metadataError={metadataError}\n              onRunSelection={onRunSelection}\n              pinnedRun={pinnedRun}\n              runMetadata={runMetadata}\n              runTrackingData={runTrackingData}\n              selectedRunIds={selectedRunIds}\n              setPinnedRun={setPinnedRun}\n              setShowRunDetailsModal={setShowRunDetailsModal}\n              showRunDetailsModal={showRunDetailsModal}\n              sidebarVisible={isSidebarVisible}\n              theme={theme}\n              trackingDataError={trackingDataError}\n            />\n          ) : null}\n        </>\n      ) : (\n        <div className=\"experiment-wrapper\">\n          <h2 className=\"experiment-wrapper__header\">\n            You don't have any experiments\n          </h2>\n          <p className=\"experiment-wrapper__text\">\n            Kedro can help you manage your experiments. Learn more how you can\n            enable experiment tracking in your projects from our docs.{' '}\n          </p>\n          <a\n            href=\"https://github.com/kedro-org/kedro-viz\"\n            rel=\"noreferrer\"\n            target=\"_blank\"\n          >\n            <Button>View docs</Button>\n          </a>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport const mapStateToProps = (state) => ({\n  theme: state.theme,\n});\n\nexport default connect(mapStateToProps)(ExperimentWrapper);\n","import React from 'react';\nimport Toggle from '../ui/toggle';\n\n/**\n * Shows a list of MetaDataValue\n */\nconst SettingsModalRow = ({\n  id,\n  name,\n  toggleValue,\n  description,\n  onToggleChange,\n}) => (\n  <div className=\"pipeline-settings-modal__column\" key={id}>\n    <div className=\"pipeline-settings-modal__name\">{name}</div>\n    <Toggle\n      id={id}\n      className=\"pipeline-settings-modal__state\"\n      title={toggleValue ? 'On' : 'Off'}\n      checked={toggleValue}\n      onChange={onToggleChange}\n    ></Toggle>\n    <div className=\"pipeline-settings-modal__description\">{description}</div>\n  </div>\n);\n\nexport default SettingsModalRow;\n","import SettingsModal from './settings-modal';\n\nexport default SettingsModal;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Modal from '../ui/modal';\nimport {\n  changeFlag,\n  toggleSettingsModal,\n  togglePrettyName,\n} from '../../actions';\nimport { getFlagsState } from '../../utils/flags';\nimport SettingsModalRow from './settings-modal-row';\nimport { settings as settingsConfig } from '../../config';\nimport './settings-modal.css';\n\n/**\n * Modal to allow users to change the flag settings\n */\n\nconst SettingsModal = ({\n  flags,\n  isOutdated,\n  onClose,\n  onToggleFlag,\n  onTogglePrettyName,\n  latestVersion,\n  prettyName,\n  visible,\n  theme,\n}) => {\n  const flagData = getFlagsState();\n\n  return (\n    <div className=\"pipeline-settings-modal\">\n      <Modal\n        title=\"Settings\"\n        onClose={() => onClose(false)}\n        visible={visible.settingsModal}\n      >\n        <div className=\"pipeline-settings-modal__content\">\n          <div className=\"pipeline-settings-modal__subtitle\">General</div>\n          <div className=\"pipeline-settings-modal__header\">\n            <div className=\"pipeline-settings-modal__name\">Name</div>\n            <div className=\"pipeline-settings-modal__state\">State</div>\n            <div className=\"pipeline-settings-modal__description\">\n              Description\n            </div>\n          </div>\n          <SettingsModalRow\n            id=\"prettyName\"\n            name={settingsConfig['prettyName'].name}\n            toggleValue={prettyName}\n            description={settingsConfig['prettyName'].description}\n            onToggleChange={(event) => onTogglePrettyName(event.target.checked)}\n          />\n          <div className=\"pipeline-settings-modal__subtitle\">Experiments</div>\n          {flagData.map(({ name, value, description }, index) => (\n            <SettingsModalRow\n              key={value}\n              id={value}\n              name={name}\n              toggleValue={flags[value]}\n              description={description}\n              onToggleChange={(event) =>\n                onToggleFlag(value, event.target.checked)\n              }\n            />\n          ))}\n          {isOutdated ? (\n            <div className=\"pipeline-settings-modal__upgrade-reminder\">\n              <span>&#8226; Kedro-Viz {latestVersion} is here! </span>\n              <a\n                href=\"https://github.com/kedro-org/kedro-viz/releases\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                View release notes\n              </a>\n            </div>\n          ) : (\n            <div className=\"pipeline-settings-modal__already-latest\">\n              <span>\n                &#8226; You are on the latest version of Kedro-Viz (\n                {latestVersion})\n              </span>\n            </div>\n          )}\n        </div>\n      </Modal>\n    </div>\n  );\n};\n\nexport const mapStateToProps = (state) => ({\n  visible: state.visible,\n  theme: state.theme,\n  prettyName: state.prettyName,\n  flags: state.flags,\n});\n\nexport const mapDispatchToProps = (dispatch) => ({\n  onClose: (value) => {\n    dispatch(toggleSettingsModal(value));\n  },\n  onToggleFlag: (name, value) => {\n    dispatch(changeFlag(name, value));\n  },\n  onTogglePrettyName: (value) => {\n    dispatch(togglePrettyName(value));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsModal);\n","import UpdateReminder from './update-reminder';\n\nexport default UpdateReminder;\n","import React, { useState } from 'react';\nimport CommandCopier from '../ui/command-copier/command-copier';\nimport IconButton from '../ui/icon-button';\nimport CloseIcon from '../icons/close';\n\nimport './update-reminder.css';\n\nconst UpdateReminder = ({ versions, setDismiss }) => {\n  const [expand, setExpand] = useState(false);\n  const { latest, installed } = versions;\n\n  const command = 'pip install -U kedro-viz';\n\n  if (expand) {\n    return (\n      <>\n        <div className=\"update-reminder-expanded-header\">\n          <p>Kedro-Viz {latest} is here! </p>\n\n          <div className=\"close-button-container\">\n            <IconButton\n              container={React.Fragment}\n              ariaLabel=\"Close Upgrade Reminder Panel\"\n              className=\"close-button\"\n              icon={CloseIcon}\n              onClick={() => setExpand(false)}\n            />\n          </div>\n        </div>\n        <div className=\"update-reminder-expanded-detail\">\n          <p>\n            We're excited to announce that Kedro-Viz {latest} has been released.\n            To update Kedro-Viz, copy and paste the following update command\n            into your terminal. <br />\n            <br />\n            You are currently on Kedro-Viz {installed}.\n          </p>\n\n          <p className=\"subtext\">Update command</p>\n          <div className=\"command-copier\">\n            <CommandCopier command={command} />\n          </div>\n\n          <p className=\"subtext\">\n            Refer to the release page for the set of changes introduced. <br />\n            <a\n              href=\"https://github.com/kedro-org/kedro-viz/releases\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              View release notes\n            </a>\n          </p>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div className=\"update-reminder-unexpanded\">\n      <p>Kedro-Viz {latest} is here! </p>\n      <div className=\"buttons-container\">\n        <button className=\"kedro\" onClick={() => setExpand(true)}>\n          Expand\n        </button>\n        <button className=\"kedro\" onClick={() => setDismiss(true)}>\n          Dismiss\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default UpdateReminder;\n","import Wrapper from './wrapper';\n\nexport default Wrapper;\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport { useApolloQuery } from '../../apollo/utils';\nimport { client } from '../../apollo/config';\nimport { GraphQLProvider } from '../provider/provider';\nimport { GET_VERSIONS } from '../../apollo/queries';\nimport { isLoading } from '../../selectors/loading';\nimport classnames from 'classnames';\nimport GlobalToolbar from '../global-toolbar';\nimport FlowChartWrapper from '../flowchart-wrapper';\nimport ExperimentWrapper from '../experiment-wrapper';\nimport SettingsModal from '../settings-modal';\nimport UpdateReminder from '../update-reminder';\n\nimport './wrapper.css';\n\n/**\n * Main app container. Handles showing/hiding the sidebar nav, and theme classes.\n */\nexport const Wrapper = ({ theme, displayGlobalToolbar }) => {\n  const { data: versionData } = useApolloQuery(GET_VERSIONS, { client });\n  const [dismissed, setDismissed] = useState(false);\n  const [isOutdated, setIsOutdated] = useState(false);\n  const [latestVersion, setLatestVersion] = useState(null);\n\n  useEffect(() => {\n    if (versionData) {\n      setIsOutdated(versionData.version.isOutdated);\n      setLatestVersion(versionData.version.latest);\n    }\n  }, [versionData]);\n\n  return (\n    <GraphQLProvider useMocks={false}>\n      <div\n        className={classnames('kedro-pipeline kedro', {\n          'kui-theme--dark': theme === 'dark',\n          'kui-theme--light': theme === 'light',\n        })}\n      >\n        <h1 className=\"pipeline-title\">Kedro-Viz</h1>\n        <Router>\n          {displayGlobalToolbar && <GlobalToolbar isOutdated={isOutdated} />}\n          <SettingsModal\n            isOutdated={isOutdated}\n            latestVersion={latestVersion}\n          />\n          {versionData && isOutdated && !dismissed && (\n            <UpdateReminder\n              dismissed={dismissed}\n              versions={versionData.version}\n              setDismiss={setDismissed}\n            />\n          )}\n          <Switch>\n            <Route exact path={['/', '/flowchart']}>\n              <FlowChartWrapper />\n            </Route>\n            <Route path={['/runsList', '/runsList/:id']}>\n              <ExperimentWrapper />\n            </Route>\n          </Switch>\n        </Router>\n      </div>\n    </GraphQLProvider>\n  );\n};\n\nexport const mapStateToProps = (state) => ({\n  loading: isLoading(state),\n  theme: state.theme,\n  displayGlobalToolbar: state.display.globalToolbar,\n});\n\nexport default connect(mapStateToProps)(Wrapper);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Provider } from 'react-redux';\nimport 'what-input';\nimport configureStore from '../../store';\nimport { resetData } from '../../actions';\nimport { loadInitialPipelineData } from '../../actions/pipelines';\nimport Wrapper from '../wrapper';\nimport getInitialState, {\n  preparePipelineState,\n} from '../../store/initial-state';\nimport { getFlagsMessage } from '../../utils/flags';\nimport './app.css';\n\n/**\n * Entry-point component for the use-case where Kedro-Viz is imported as a\n * library/package into a larger application, rather than run as a standalone\n * app. If run as a standalone then 'Container' is the top-level component.\n *\n * This component intialises anything that might be needed in both use-cases,\n * e.g. the Redux store, webfont loading, announcing flags, etc.\n */\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    const initialState = getInitialState(props);\n    this.store = configureStore(initialState);\n  }\n\n  componentDidMount() {\n    if (this.props.data === 'json') {\n      this.store.dispatch(loadInitialPipelineData());\n    }\n    this.announceFlags(this.store.getState().flags);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.data !== this.props.data) {\n      this.updatePipelineData();\n    }\n  }\n\n  /**\n   * Shows a console message regarding the given flags\n   */\n  announceFlags(flags) {\n    const message = getFlagsMessage(flags);\n\n    if (message && typeof jest === 'undefined') {\n      console.info(message);\n    }\n  }\n\n  /**\n   * Dispatch an action to update the store with new pipeline data\n   */\n  updatePipelineData() {\n    const newState = preparePipelineState(this.props.data, true);\n    this.store.dispatch(resetData(newState));\n  }\n\n  render() {\n    return this.props.data ? (\n      <Provider store={this.store}>\n        <Wrapper />\n      </Provider>\n    ) : null;\n  }\n}\n\nApp.propTypes = {\n  /**\n   * Determines what pipeline data will be displayed on the chart.\n   * You can supply an object containing lists of edges, nodes, tags -\n   * See /src/utils/data for examples of the expected data format.\n   * Alternatively, the string 'json' indicates that data is being\n   * loaded asynchronously from /public/api/nodes.json\n   */\n  data: PropTypes.oneOfType([\n    PropTypes.oneOf(['json']),\n    PropTypes.shape({\n      edges: PropTypes.array.isRequired,\n      layers: PropTypes.array,\n      nodes: PropTypes.array.isRequired,\n      tags: PropTypes.array,\n    }),\n  ]),\n  /**\n   * Specify the theme: Either 'light' or 'dark'.\n   * If set, this will override the localStorage value.\n   */\n  theme: PropTypes.oneOf(['dark', 'light']),\n  /**\n   * Override visibility of various features, e.g. icon buttons\n   */\n  visible: PropTypes.shape({\n    labelBtn: PropTypes.bool,\n    layerBtn: PropTypes.bool,\n    exportBtn: PropTypes.bool,\n    sidebar: PropTypes.bool,\n  }),\n  /**\n   * Determines if certain elements are displayed, e.g global tool bar, sidebar\n   */\n  display: PropTypes.shape({\n    globalToolbar: PropTypes.bool,\n    sidebar: PropTypes.bool,\n    miniMap: PropTypes.bool,\n    expandAllPipelines: PropTypes.bool,\n  }),\n};\n\nexport default App;\n","import App from './app';\n\nexport default App;\n","import seedrandom from 'seedrandom';\n\n/**\n * Generate a pseudo-random UUID\n * via https://stackoverflow.com/a/1349426/1651713\n * @param {number} length Hash/ID length\n * @return string\n */\nexport const generateHash = (length) => {\n  const result = [];\n  const characters =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  for (let i = 0; i < length; i++) {\n    result.push(\n      characters.charAt(Math.floor(Math.random() * characters.length))\n    );\n  }\n  return result.join('');\n};\n\n/**\n * Seed data with a random hash, allowing it to be reproduced.\n * If the URL searchParams contain a 'seed' key then use its value,\n * else create a new one, and make it available via the console.\n */\nexport const getSeedFromURL = () => {\n  let url;\n  let seed;\n  try {\n    url = new URL(document.location.href);\n    seed = url.searchParams.get('seed');\n  } catch (e) {\n    console.warn('Random data seeding is not supported in this browser');\n    return;\n  }\n  if (!seed) {\n    seed = generateHash(30);\n    url.searchParams.set('seed', seed);\n  }\n  if (typeof jest === 'undefined') {\n    console.info(\n      `%cRandom data seed: ${seed}\\nTo reuse this layout, visit ${url.toString()}`,\n      'font-weight: bold'\n    );\n  }\n  return seed;\n};\n\n/**\n * Get an array of numbers\n * @param {number} length Length of the array\n */\nexport const getNumberArray = (length) => Array.from(Array(length).keys());\n\nexport const LOREM_IPSUM =\n  'lorem ipsum dolor sit amet consectetur adipiscing elit vestibulum id turpis nunc nulla vitae diam dignissim fermentum elit sit amet viverra libero quisque condimentum pellentesque convallis sed consequat neque ac rhoncus finibus'.split(\n    ' '\n  );\n\n/**\n * Utils that depend on a seeded RNG\n */\nconst randomUtils = () => {\n  // Set up seeded random number generator:\n  const seed = getSeedFromURL();\n  const random = seedrandom(seed);\n\n  /**\n   * Get a random number between 0 to n-1, inclusive\n   * @param {number} max Max number\n   */\n  const randomIndex = (max) => Math.floor(random() * max);\n\n  /**\n   * Get a random number between 1 to n, inclusive\n   * @param {number} max Max number\n   */\n  const randomNumber = (max) => Math.ceil(random() * max);\n\n  /**\n   * Get a random number between min and max, inclusive\n   * @param {number} (min) Min number\n   * @param {number} (max) Max number\n   */\n  const randomNumberBetween = (min, max) => randomNumber(max - min) + min;\n\n  /**\n   * Get a random datum from an array\n   * @param {Array} range The array to select a random item from\n   */\n  const getRandom = (range) => range[randomIndex(range.length)];\n\n  /**\n   * Generate a random latin name\n   * @param {number} numWords Number of words in the name\n   * @param {string} join The character(s) used to join each word\n   */\n  const getRandomName = (numWords, join = '_') =>\n    getNumberArray(numWords)\n      .map(() => getRandom(LOREM_IPSUM))\n      .join(join);\n\n  /**\n   * Randomly select a certain number (n) of items from an array (arr).\n   * via https://stackoverflow.com/a/19270021/1651713\n   * @param {array} arr List from which to choose\n   * @param {number} numItems Number of items to select\n   */\n  const getRandomSelection = (arr, numItems) => {\n    const result = new Array(numItems);\n    let len = arr.length;\n    const taken = new Array(len);\n    if (numItems > len) {\n      return arr;\n    }\n    while (numItems--) {\n      const x = Math.floor(random() * len);\n      result[numItems] = arr[x in taken ? taken[x] : x];\n      taken[x] = --len in taken ? taken[len] : len;\n    }\n    return result;\n  };\n\n  return {\n    random,\n    randomIndex,\n    randomNumber,\n    randomNumberBetween,\n    getRandom,\n    getRandomName,\n    getRandomSelection,\n  };\n};\n\nexport default randomUtils;\n","import batchingToposort from 'batching-toposort';\n\nimport { arrayToObject, unique } from './index';\nimport randomUtils, { getNumberArray } from './random-utils';\n\n//--- Config variables ---//\n\nconst MAX_EDGE_COUNT = 200;\nconst MIN_EDGE_COUNT = 100;\nconst MAX_RANK_COUNT = 50;\nconst MIN_RANK_COUNT = 10;\nconst MAX_RANK_NODE_COUNT = 10;\nconst MIN_RANK_NODE_COUNT = 1;\nconst MIN_NODE_DEGREE = 2;\nconst MAX_NODE_TAG_COUNT = 5;\nconst MAX_TAG_COUNT = 20;\nconst PARAMETERS_FREQUENCY = 0.2;\nconst MIN_PIPELINES_COUNT = 2;\nconst MAX_PIPELINES_COUNT = 15;\nconst LAYERS = [\n  'Raw',\n  'Intermediate',\n  'Primary',\n  'Feature',\n  'Model Input',\n  'Model Output',\n];\n\n/**\n * Generate a random pipeline dataset\n */\nclass Pipeline {\n  constructor() {\n    this.utils = randomUtils();\n    this.pipelines = this.generatePipelines();\n    this.rankCount = this.getRankCount();\n    this.rankLayers = this.getRankLayers();\n    this.tags = this.generateTags();\n    this.nodes = this.generateNodes();\n    this.edges = this.generateEdges();\n    this.modularPipelines = this.generateModularPipelines(this.nodes);\n\n    this.update();\n    this.finalise();\n  }\n\n  /**\n   * Create the pipelines array\n   * @returns {number} Rank count total\n   */\n  generatePipelines() {\n    const pipelines = ['Default'];\n    const pipelineCount = this.utils.randomNumberBetween(\n      MIN_PIPELINES_COUNT,\n      MAX_PIPELINES_COUNT\n    );\n    for (let i = 1; i < pipelineCount; i++) {\n      pipelines.push(this.utils.getRandomName(this.utils.randomNumber(4), ' '));\n    }\n    return pipelines.filter(unique);\n  }\n\n  /**\n   * Create the modular pipelines tree from nodes in the graph\n   * @returns {Object} A modular pipelines tree\n   */\n  generateModularPipelines(nodes) {\n    return {\n      __root__: {\n        id: '__root__',\n        name: 'Root',\n        children: nodes.map((node) => ({ id: node.id, type: node.type })),\n      },\n    };\n  }\n\n  /**\n   * Get the number of ranks (i.e. horizontal bands)\n   * Odd ranks are data, even are task\n   * @returns {number} Rank count total\n   */\n  getRankCount() {\n    let rankCount = this.utils.randomNumberBetween(\n      MIN_RANK_COUNT,\n      MAX_RANK_COUNT\n    );\n    // Ensure odd numbers only, so that we start and end with a data node\n    if (!rankCount % 2) {\n      rankCount += 1;\n    }\n    return rankCount;\n  }\n\n  /**\n   * Randomly determine the layer for each rank\n   * @returns {object} Layers by rank\n   */\n  getRankLayers() {\n    const layerSize = arrayToObject(LAYERS, () => 0);\n    // Randomly decide the number of ranks in each layer\n    for (let i = 0; i < this.rankCount; i++) {\n      layerSize[this.utils.getRandom(LAYERS)]++;\n    }\n    // Assign layers to ranks based on layerSize\n    const rankLayers = {};\n    for (let rank = 0, layer = 0; rank < this.rankCount; rank++) {\n      while (layerSize[LAYERS[layer]] < 1) {\n        layer++;\n      }\n      rankLayers[rank] = LAYERS[layer];\n      layerSize[LAYERS[layer]]--;\n    }\n    return rankLayers;\n  }\n\n  /**\n   * Generate a random list of tags\n   * @returns {array} Tag name strings\n   */\n  generateTags() {\n    const tagCount = this.utils.randomNumber(MAX_TAG_COUNT);\n    return getNumberArray(tagCount)\n      .map(() =>\n        this.utils.getRandomName(this.utils.randomNumber(MAX_NODE_TAG_COUNT))\n      )\n      .filter(unique);\n  }\n\n  /**\n   * Create list of nodes\n   * @returns {array} List of node objects\n   */\n  generateNodes() {\n    const nodes = [];\n    for (let rank = 0; rank < this.rankCount; rank++) {\n      const rankNodeCount = this.getRankNodeCount(rank);\n      for (let i = 0; i < rankNodeCount; i++) {\n        const node = this.createNode(i, rank);\n        nodes.push(node);\n      }\n    }\n    return nodes;\n  }\n\n  /**\n   * Return a random count of nodes for a rank\n   * @returns {number} rank node count\n   */\n  getRankNodeCount() {\n    return Math.min(\n      MIN_RANK_NODE_COUNT / this.utils.random(),\n      MAX_RANK_NODE_COUNT\n    );\n  }\n\n  /**\n   * Determine a node's type based on its rank\n   * @param {number} rank Rank number\n   * @returns {string} Node type (task/data/parameters)\n   */\n  getType(node) {\n    if (node.rank % 2) {\n      return 'task';\n    }\n\n    if (!node._sources.length && this.utils.random() < PARAMETERS_FREQUENCY) {\n      return 'parameters';\n    }\n\n    return 'data';\n  }\n\n  /**\n   * Create a node datum object.\n   * @param {number} i Node index within its rank\n   * @param {number} initialRank Rank index\n   * @returns {object} Node object\n   */\n\n  createNode(i, initialRank) {\n    const layer = this.rankLayers[initialRank];\n    const node = {\n      id: `${layer}_${initialRank}_${i}`,\n      name: null,\n      full_name: null, //eslint-disable-line camelcase\n      type: null,\n      rank: initialRank,\n      layer: layer,\n      pipelines: this.getNodePipelines(),\n      modular_pipelines: null, //eslint-disable-line camelcase\n      tags: this.getRandomTags(),\n      _sources: [],\n      _targets: [],\n    };\n    return node;\n  }\n\n  /**\n   * Create a new node name of up to 10 words\n   * @param {string} Node type (task/data/parameters)\n   * @returns {string} Node name\n   */\n  getNodeName(type) {\n    const name = this.utils.getRandomName(this.utils.randomNumber(10), ' ');\n    return type === 'parameters' ? `Parameters ${name}` : name;\n  }\n\n  /**\n   * Generate node metadata panel info\n   * @param {object} node A single node object\n   */\n  getNodeMetaData(node) {\n    const { getRandomName, randomNumber } = this.utils;\n\n    if (node.type === 'task') {\n      node.code = this.generateCodeSnippet();\n    } else if (node.type === 'data') {\n      node.datasetType = getRandomName(randomNumber(2));\n    }\n    node.filepath = getRandomName(randomNumber(10), '/');\n    node.parameters = arrayToObject(\n      getNumberArray(randomNumber(10)).map(() =>\n        getRandomName(randomNumber(2), '_')\n      ),\n      () => this.utils.randomNumber(50) / 10\n    );\n  }\n\n  /**\n   * Use one of the methods of this class as a code example\n   */\n  generateCodeSnippet() {\n    const methods = Object.getOwnPropertyNames(Pipeline.prototype);\n    const index = this.utils.randomIndex(methods.length);\n    let code = Pipeline.prototype[methods[index]].toString();\n    if (index > 0) {\n      code = 'function ' + code.replace(/\\n\\s\\s/g, '\\n');\n    }\n    return code;\n  }\n\n  /**\n   * Create a list of the pipelines that the node will be included in\n   * @returns {array} Node piplines\n   */\n  getNodePipelines() {\n    return this.pipelines.reduce((pipelines, id, i) => {\n      if (i === 0 || this.utils.randomIndex(2)) {\n        return pipelines.concat(id);\n      }\n      return pipelines;\n    }, []);\n  }\n\n  /**\n   * Select a random number of tags from the list of tags\n   * @returns {array} List of tags\n   */\n  getRandomTags() {\n    return this.utils.getRandomSelection(\n      this.tags,\n      this.utils.randomNumber(this.tags.length)\n    );\n  }\n\n  /**\n   * Gets a map of ranks to lists of nodes at that rank\n   * @returns {array} List of nodes\n   */\n  getNodesByRank() {\n    const nodesByRank = {};\n\n    for (const node of this.nodes) {\n      nodesByRank[node.rank] = nodesByRank[node.rank] || [];\n      nodesByRank[node.rank].push(node);\n    }\n\n    return nodesByRank;\n  }\n\n  /**\n   * Create list of edges\n   * @returns {array} Edge objects\n   */\n  generateEdges() {\n    const edges = [];\n    const edgeCount = this.utils.randomNumberBetween(\n      MIN_EDGE_COUNT,\n      MAX_EDGE_COUNT\n    );\n    const nodesByRank = this.getNodesByRank();\n\n    // Find the sorted list of node ranks\n    const ranks = Object.keys(nodesByRank)\n      .map((rank) => parseFloat(rank))\n      .sort((a, b) => a - b);\n\n    // Gets a random node with the given rank index\n    const getRandomNodeAtRank = (rankIndex) => {\n      const rankValue = ranks[rankIndex];\n      const rankNodes = nodesByRank[rankValue];\n      const rankNodeIndex = this.utils.randomIndex(rankNodes.length);\n      return rankNodes[rankNodeIndex];\n    };\n\n    // For the desired amount of edges\n    for (let i = 0; i < edgeCount; i += 1) {\n      // Choose a random source node excluding the last rank\n      const sourceRankIndex = this.utils.randomIndex(ranks.length - 1);\n      const source = getRandomNodeAtRank(sourceRankIndex);\n\n      // Choose a random target node after the source rank prefering nearby\n      const remainingRankCount = ranks.length - 1 - sourceRankIndex;\n      const biasedRandom = Math.round(0.5 / this.utils.random());\n      const targetRankIndex =\n        sourceRankIndex + Math.min(biasedRandom, remainingRankCount);\n      const target = getRandomNodeAtRank(targetRankIndex);\n\n      // Build the edge\n      const edge = {\n        source: source.id,\n        target: target.id,\n        _sourceNode: source,\n        _targetNode: target,\n      };\n\n      edges.push(edge);\n\n      // Keep track of edges on nodes for later convenience\n      source._targets.push(edge);\n      target._sources.push(edge);\n    }\n\n    return edges;\n  }\n\n  /**\n   * Select only nodes with at least the minimum required connected nodes\n   * @returns {object} Filtered nodes\n   */\n  activeNodes() {\n    const nodes = {};\n\n    // Gets the total number of edges for the given node\n    const degree = (node) => node._sources.length + node._targets.length;\n\n    for (const edge of this.edges) {\n      // Keep both nodes if they have enough combined connections\n      if (\n        degree(edge._sourceNode) + degree(edge._targetNode) >\n        MIN_NODE_DEGREE\n      ) {\n        nodes[edge._sourceNode.id] = edge._sourceNode;\n        nodes[edge._targetNode.id] = edge._targetNode;\n      }\n    }\n\n    return Object.values(nodes);\n  }\n\n  /**\n   * Select only used tags\n   * @returns {object} Filtered tags\n   */\n  activeTags() {\n    return this.nodes\n      .reduce((tags, node) => (node.tags ? tags.concat(node.tags) : tags), [])\n      .filter(unique)\n      .map((tag) => ({ name: tag, id: tag }));\n  }\n\n  /**\n   * Select only used edges\n   * @returns {object} Filtered edges\n   */\n  activeEdges() {\n    const visibleNodes = arrayToObject(\n      this.nodes.map((node) => node.id),\n      () => true\n    );\n\n    return this.edges.filter(\n      (edge) => visibleNodes[edge.target] && visibleNodes[edge.source]\n    );\n  }\n\n  /**\n   * Updates node properties including rank, type and name based on the current graph\n   */\n  update() {\n    const graph = {};\n\n    for (const node of this.nodes) {\n      graph[node.id] = [];\n    }\n\n    for (const edge of this.edges) {\n      graph[edge.source].push(edge.target);\n    }\n\n    // Use toposort to find actual ranks\n    const sortedNodes = batchingToposort(graph);\n\n    for (let rank = 0; rank < sortedNodes.length; rank++) {\n      for (const id of sortedNodes[rank]) {\n        const node = this.nodes.find((node) => node.id === id);\n        node.rank = rank;\n        node.type = this.getType(node);\n        node.name = this.getNodeName(node.type);\n        node.full_name =  //eslint-disable-line camelcase\n        `${node.layer}_${node.type}_${node.rank}_${node.name}`.replace(\n          /\\s/g,\n          '_'\n        );\n        this.getNodeMetaData(node);\n      }\n    }\n  }\n\n  /**\n   * Removes unused elements and cleans up temporary properties\n   */\n  finalise() {\n    this.nodes = this.activeNodes();\n    this.tags = this.activeTags();\n    this.edges = this.activeEdges();\n\n    for (const node of this.nodes) {\n      delete node._sources;\n      delete node._targets;\n    }\n\n    for (const edge of this.edges) {\n      delete edge._targetNode;\n      delete edge._sourceNode;\n    }\n  }\n\n  /**\n   * Gets the complete pipeline data\n   * @returns {object} The pipeline data\n   */\n  all() {\n    return {\n      edges: this.edges,\n      layers: LAYERS,\n      nodes: this.nodes,\n      pipelines: this.pipelines.map((name) => ({ id: name, name })),\n      //eslint-disable-next-line camelcase\n      modular_pipelines: this.modularPipelines,\n      tags: this.tags,\n    };\n  }\n}\n\nconst generateRandomPipeline = () => new Pipeline().all();\n\nexport default generateRandomPipeline;\n","import getRandomPipeline from './random-data';\nimport spaceflights from './data/spaceflights.mock.json';\nimport demo from './data/demo.mock.json';\nimport selectors from './data/selectors.mock.json';\n\n/**\n * Determine the data source ID from the URL query string, or an environment\n * variable from the CLI, or from the URL host, else return undefined.\n * You can supply one of the following strings:\n   - 'random': Use randomly-generated data\n   - 'spaceflights': Use data from the 'spaceflights' test dataset ( this is the same dataset as used by the Core team for their tests )\n   - 'demo': Use data from the 'demo' test dataset\n   - 'json': Load data from a local json file (in /public/api/main)\n * @return {string} Data source identifier\n */\nexport const getSourceID = () => {\n  const urlParams = new URL(document.location.href).searchParams;\n  const dataSource = urlParams.get('data');\n  const { REACT_APP_DATA_SOURCE } = process.env;\n  const isDemo = document.location.host === 'kedro-org.github.io';\n\n  if (dataSource) {\n    return encodeURIComponent(dataSource);\n  }\n  if (REACT_APP_DATA_SOURCE) {\n    return REACT_APP_DATA_SOURCE;\n  }\n  if (isDemo) {\n    return 'demo';\n  }\n  return 'json';\n};\n\n/**\n * Either load synchronous pipeline data, or else indicate with a string\n * that json data should be loaded asynchronously later on.\n * @param {string} source Data source identifier\n * @return {object|string} Either raw data itself, or 'json'\n */\nexport const getDataValue = (source) => {\n  // Add data source string to data object\n  const nameSource = (data) => Object.assign(data, { source });\n\n  switch (source) {\n    case 'spaceflights':\n      // Use data from the 'spaceflights' test dataset\n      return nameSource(spaceflights);\n    case 'demo':\n      // Use data from the 'demo' test dataset\n      return nameSource(demo);\n    case 'selectors':\n      // Use data from the 'selectors' test dataset\n      return nameSource(selectors);\n    case 'random':\n      // Use procedurally-generated data\n      return nameSource(getRandomPipeline());\n    case 'json':\n      // Load data asynchronously later\n      return source;\n    default:\n      throw new Error(\n        `Unexpected data source value '${source}'. Your input should be one of the following values: 'spaceflights', 'demo', 'json', 'selectors', or 'random'`\n      );\n  }\n};\n\n/**\n * Determine which data source to use, and return it\n * @return {object|string} Pipeline data, or 'json'\n */\nconst getPipelineData = () => getDataValue(getSourceID());\n\nexport default getPipelineData;\n","import Container from './container';\n\nexport default Container;\n","import React from 'react';\nimport App from '../app';\nimport getPipelineData from '../../utils/data-source';\nimport './container.css';\n\n/**\n * Top-level component for the use-case where Kedro-Viz is run as a standalone\n * app rather than imported as a library/package into a larger application.\n */\nconst Container = () => (\n  <>\n    <App data={getPipelineData()} />\n  </>\n);\n\nexport default Container;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport KedroViz from './components/container';\n\nReactDOM.render(<KedroViz />, document.getElementById('root'));\n","/* eslint-disable id-length */\n\n/**\n * PI / 2 constant\n */\n\nexport const HALF_PI = Math.PI * 0.5;\n\n/**\n * Clamps the value between min and max\n * @param {number} value The number to clamp\n * @param {number} min The minimum value\n * @param {number} max The maximum value\n * @returns {number} The value clamped\n */\nexport const clamp = (value, min, max) =>\n  value < min ? min : value > max ? max : value;\n\n/**\n * Rounds the value to the nearest unit value\n * @param {number} value The value to snap\n * @param {number} unit The unit\n * @returns {number} The value snapped\n */\nexport const snap = (value, unit) => Math.round(value / unit) * unit;\n\n/**\n * Returns the distance between two values\n * @param {number} a The first value\n * @param {number} b The second value\n * @returns {number} The distance\n */\nexport const distance1d = (a, b) => Math.abs(a - b);\n\n/**\n * Returns the angle in radians between the points a and b relative to the X-axis about the origin\n * @param {object} a The first point\n * @param {object} b The second point\n * @returns {number} The angle\n */\nexport const angle = (a, b) => Math.atan2(a.y - b.y, a.x - b.x);\n\n/**\n * Returns the left edge x-position of the node\n * @param {object} node The node\n * @returns {number} The left edge position\n */\nexport const nodeLeft = (node) => node.x - node.width * 0.5;\n\n/**\n * Returns the right edge x-position of the node\n * @param {object} node The node\n * @returns {number} The right edge position\n */\nexport const nodeRight = (node) => node.x + node.width * 0.5;\n\n/**\n * Returns the top edge y-position of the node\n * @param {object} node The node\n * @returns {number} The top edge position\n */\nexport const nodeTop = (node) => node.y - node.height * 0.5;\n\n/**\n * Returns the bottom edge y-position of the node\n * @param {object} node The node\n * @returns {number} The bottom edge position\n */\nexport const nodeBottom = (node) => node.y + node.height * 0.5;\n\n/**\n * Finds the rows formed by nodes given the their positions in Y.\n * The result is sorted in X and Y.\n * Adds a `row` property to each node in-place\n * @param {array} nodes The input nodes\n * @returns {array} The sorted rows of nodes\n */\nexport const groupByRow = (nodes) => {\n  const rows = {};\n\n  // Create rows using node Y values\n  for (const node of nodes) {\n    rows[node.y] = rows[node.y] || [];\n    rows[node.y].push(node);\n  }\n\n  // Sort the set of rows accounting for keys being strings\n  const rowNumbers = Object.keys(rows).map((row) => parseFloat(row));\n  rowNumbers.sort((a, b) => a - b);\n\n  // Sort rows in order of X position if set. Break ties with ids for stability\n  const sortedRows = rowNumbers.map((row) => rows[row]);\n  for (let i = 0; i < sortedRows.length; i += 1) {\n    sortedRows[i].sort((a, b) => compare(a.x, b.x, a.id, b.id));\n\n    for (const node of sortedRows[i]) {\n      node.row = i;\n    }\n  }\n\n  return sortedRows;\n};\n\n/**\n * Generalised comparator function for sorting\n * If values are strings then `localeCompare` is used, otherwise values are subtracted\n * Compares the first pair of values and returns the difference if non equal,\n * otherwise ties are broken by comparing the subsequent pairs of values\n * @param {number|string} a Value to compare with `b`\n * @param {number|string} b Value to compare with `a`\n * @param {...number|string} values Any number of further pairs of values to compare as tie-breakers\n * @returns {number} A standard signed comparator result\n */\nexport const compare = (a, b, ...values) => {\n  const delta = typeof a === 'string' ? a.localeCompare(b) : a - b;\n  return delta !== 0 || values.length === 0 ? delta : compare(...values);\n};\n\n/**\n * Returns the node with the position translated in-place\n * @param {object} node The node\n * @param {object} offset The translation vector\n * @returns {object} The node\n */\nexport const offsetNode = (node, offset) => {\n  node.x = node.x - offset.x;\n  node.y = node.y - offset.y;\n  // Node sort order for tabindex:\n  node.order = node.x + node.y * 9999;\n  return node;\n};\n\n/**\n * Returns the edge with each point translated in-place\n * @param {object} edge The edge\n * @param {object} offset The translation vector\n * @returns {object} The edge\n */\nexport const offsetEdge = (edge, offset) => {\n  edge.points.forEach((point) => {\n    point.x = point.x - offset.x;\n    point.y = point.y - offset.y;\n  });\n  return edge;\n};\n\n/**\n * Returns the point on the line segment `ax, ay, bx, by` closest to point `x, y`\n * @param {number} x The test point x\n * @param {number} y The test point y\n * @param {number} ax The start of the line segement x point\n * @param {number} ay The start of the line segement y point\n * @param {number} bx The end of the line segement x point\n * @param {number} by The end of the line segement y point\n * @returns {object} An object with the closest point and both line segment points\n */\nexport const nearestOnLine = (x, y, ax, ay, bx, by) => {\n  const dx = bx - ax;\n  const dy = by - ay;\n  const position = ((x - ax) * dx + (y - ay) * dy) / (dx * dx + dy * dy || 1);\n  const positionClamped = clamp(position, 0, 1);\n\n  return {\n    x: ax + dx * positionClamped,\n    y: ay + dy * positionClamped,\n    ax,\n    ay,\n    bx,\n    by,\n  };\n};\n","/** @license kiwi.js v1.1.2\n * #------------------------------------------------------------------------------\n * # Copyright (c) 2013, Nucleic Development Team & H. Rutjes.\n * #\n * # Distributed under the terms of the Modified BSD License.\n * #\n * # The full license is in the file COPYING.txt, distributed with this software.\n * #------------------------------------------------------------------------------\n **/\nimport { Solver, Variable } from 'kiwi.js';\n\n/**\n * Applies the given constraints to the objects in-place.\n * A solution is approximated iteratively.\n * Refer to LAYOUT_ENGINE.md for further details.\n * @param {array} constraints The constraints\n * @param {function} constraint.base.solve A function that solves the constraint in-place\n * @param {number} iterations The number of iterations\n * @param {?object} constants The constants used by constraints\n */\nexport const solveLoose = (constraints, iterations, constants) => {\n  for (let i = 0; i < iterations; i += 1) {\n    for (const constraint of constraints) {\n      constraint.base.solve(constraint, constants);\n    }\n  }\n};\n\n/**\n * Applies the given constraints to the objects in-place.\n * A solution is found exactly for the constraints that are solvable.\n * Any unsolvable constraints will be skipped and a warning logged in the console.\n * Refer to LAYOUT_ENGINE.md for further details.\n * @param {array} constraints The constraints\n * @param {string} constraint.base.property The property name on `a` and `b` to constrain\n * @param {function} constraint.base.strict A function returns the constraint in strict form\n * @param {object} constraint.a The first object to constrain\n * @param {object} constraint.b The second object to constrain\n * @param {object} constraint.a.id A unique id for the first object\n * @param {object} constraint.b.id A unique id for the second object\n * @param {?object} constants The constants used by constraints\n */\nexport const solveStrict = (constraints, constants) => {\n  const solver = new Solver();\n  const variables = {};\n\n  const variableId = (obj, property) => `${obj.id}_${property}`;\n\n  const addVariable = (obj, property) => {\n    const id = variableId(obj, property);\n\n    if (!variables[id]) {\n      const variable = (variables[id] = new Variable());\n      variable.property = property;\n      variable.obj = obj;\n    }\n  };\n\n  for (const constraint of constraints) {\n    addVariable(constraint.a, constraint.base.property);\n    addVariable(constraint.b, constraint.base.property);\n  }\n\n  let unsolvableCount = 0;\n\n  for (const constraint of constraints) {\n    try {\n      solver.addConstraint(\n        constraint.base.strict(\n          constraint,\n          constants,\n          variables[variableId(constraint.a, constraint.base.property)],\n          variables[variableId(constraint.b, constraint.base.property)]\n        )\n      );\n    } catch (err) {\n      unsolvableCount += 1;\n    }\n  }\n\n  if (unsolvableCount > 0) {\n    console.warn(`Skipped ${unsolvableCount} unsolvable constraints`);\n  }\n\n  solver.updateVariables();\n\n  const variablesList = Object.values(variables);\n\n  for (const variable of variablesList) {\n    variable.obj[variable.property] = variable.value();\n  }\n};\n","/**\n * Constraint base definitions.\n *\n * Refer to LAYOUT_ENGINE.md for descriptions of each constraint.\n *\n * See `solve` function of `solver.js` for constraint specification.\n */\n\nimport { Constraint, Operator, Strength } from 'kiwi.js';\n\n/**\n * Layout constraint in Y for separating rows\n */\nexport const rowConstraint = {\n  property: 'y',\n\n  strict: (constraint, constants, variableA, variableB) =>\n    new Constraint(\n      variableA.minus(variableB),\n      Operator.Ge,\n      constants.spaceY,\n      Strength.required\n    ),\n};\n\n/**\n * Layout constraint in Y for separating layers\n */\nexport const layerConstraint = {\n  property: 'y',\n\n  strict: (constraint, constants, variableA, variableB) =>\n    new Constraint(\n      variableA.minus(variableB),\n      Operator.Ge,\n      constants.layerSpace,\n      Strength.required\n    ),\n};\n\n/**\n * Layout constraint in X for minimising distance from source to target for straight edges\n */\nexport const parallelConstraint = {\n  property: 'x',\n\n  solve: (constraint) => {\n    const { a, b, strength } = constraint;\n    const resolve = strength * (a.x - b.x);\n    a.x -= resolve;\n    b.x += resolve;\n  },\n\n  strict: (constraint, constants, variableA, variableB) =>\n    new Constraint(\n      variableA.minus(variableB),\n      Operator.Eq,\n      0,\n      Strength.create(1, 0, 0, constraint.strength)\n    ),\n};\n\n/**\n * Crossing constraint in X for minimising edge crossings\n */\nexport const crossingConstraint = {\n  property: 'x',\n\n  solve: (constraint) => {\n    const { edgeA, edgeB, separationA, separationB, strength } = constraint;\n\n    // Amount to move each node towards required separation\n    const resolveSource =\n      strength *\n      ((edgeA.sourceNode.x - edgeB.sourceNode.x - separationA) / separationA);\n\n    const resolveTarget =\n      strength *\n      ((edgeA.targetNode.x - edgeB.targetNode.x - separationB) / separationB);\n\n    // Apply the resolve each node\n    edgeA.sourceNode.x -= resolveSource;\n    edgeB.sourceNode.x += resolveSource;\n    edgeA.targetNode.x -= resolveTarget;\n    edgeB.targetNode.x += resolveTarget;\n  },\n};\n\n/**\n * Layout constraint in X for minimum node separation\n */\nexport const separationConstraint = {\n  property: 'x',\n\n  strict: (constraint, constants, variableA, variableB) =>\n    new Constraint(\n      variableB.minus(variableA),\n      Operator.Ge,\n      constraint.separation,\n      Strength.required\n    ),\n};\n","import { HALF_PI, snap, angle, compare, groupByRow } from './common';\nimport { solveLoose, solveStrict } from './solver';\nimport {\n  rowConstraint,\n  layerConstraint,\n  parallelConstraint,\n  crossingConstraint,\n  separationConstraint,\n} from './constraints';\n\n/**\n * Finds positions for the given nodes relative to their edges.\n * Input nodes and edges are updated in-place.\n * Results are stored in the `x, y` properties on nodes.\n * @param {object} params The layout parameters\n * @param {array} params.nodes The input nodes\n * @param {array} params.edges The input edges\n * @param {object=} params.layers The node layers if specified\n * @param {number} params.spaceX The minimum gap between nodes in X\n * @param {number} params.spaceY The minimum gap between nodes in Y\n * @param {number} params.spreadX Adjusts the gap for each node in X based on the number of connected edges it has\n * @param {number} params.layerSpaceY The additional gap between nodes in Y between layers\n * @param {number} params.iterations The number of solver iterations to perform\n * @returns {void}\n */\nexport const layout = ({\n  nodes,\n  edges,\n  layers,\n  spaceX,\n  spaceY,\n  spreadX,\n  layerSpaceY,\n  iterations,\n}) => {\n  // Set initial positions for nodes\n  for (const node of nodes) {\n    node.x = 0;\n    node.y = 0;\n  }\n\n  // Constants used by constraints\n  const constants = {\n    spaceX,\n    spaceY,\n    spreadX,\n    layerSpace: (spaceY + layerSpaceY) * 0.5,\n  };\n\n  // Constraints to separate nodes into rows and layers\n  const rowConstraints = createRowConstraints(edges);\n  const layerConstraints = createLayerConstraints(nodes, layers);\n\n  // Find the node positions given these constraints\n  solveStrict([...rowConstraints, ...layerConstraints], constants, 1);\n\n  // Find the solved rows using the node positions after solving\n  const rows = groupByRow(nodes);\n\n  // Constraints to avoid edges crossing and maintain parallel vertical edges\n  const crossingConstraints = createCrossingConstraints(edges, constants);\n  const parallelConstraints = createParallelConstraints(edges, constants);\n\n  // Solve these constraints iteratively\n  for (let i = 0; i < iterations; i += 1) {\n    solveLoose(crossingConstraints, 1, constants);\n    solveLoose(parallelConstraints, 50, constants);\n  }\n\n  // Constraints to maintain a minimum horizontal node spacing\n  const separationConstraints = createSeparationConstraints(rows, constants);\n\n  // Find the final node positions given these strict constraints\n  solveStrict([...separationConstraints, ...parallelConstraints], constants, 1);\n\n  // Adjust vertical spacing between rows for legibility\n  expandDenseRows(edges, rows, spaceY);\n};\n\n/**\n * Creates row constraints for the given edges.\n * @param {array} edges The input edges\n * @returns {array} The constraints\n */\nconst createRowConstraints = (edges) =>\n  edges.map((edge) => ({\n    base: rowConstraint,\n    a: edge.targetNode,\n    b: edge.sourceNode,\n  }));\n\n/**\n * Creates layer constraints for the given nodes and layers.\n * @param {array} nodes The input nodes\n * @param {array=} layers The input layers if any\n * @returns {array} The constraints\n */\nconst createLayerConstraints = (nodes, layers) => {\n  const layerConstraints = [];\n\n  // Early out if no layers defined\n  if (!layers) {\n    return layerConstraints;\n  }\n\n  // Group the nodes for each layer\n  const layerGroups = layers.map((name) =>\n    nodes.filter((node) => node.nearestLayer === name)\n  );\n\n  // For each layer of nodes\n  for (let i = 0; i < layerGroups.length - 1; i += 1) {\n    const layerNodes = layerGroups[i];\n    const nextLayerNodes = layerGroups[i + 1];\n\n    // Create a temporary intermediary node for the layer\n    const intermediary = { id: `layer-${i}`, x: 0, y: 0 };\n\n    // Constrain each node in the layer to above the intermediary\n    for (const node of layerNodes) {\n      layerConstraints.push({\n        base: layerConstraint,\n        a: intermediary,\n        b: node,\n      });\n    }\n\n    // Constrain each node in the next layer to below the intermediary\n    for (const node of nextLayerNodes) {\n      layerConstraints.push({\n        base: layerConstraint,\n        a: node,\n        b: intermediary,\n      });\n    }\n  }\n\n  return layerConstraints;\n};\n\n/**\n * Creates crossing constraints for the given edges.\n * @param {array} edges The input edges\n * @param {object} constants The constraint constants\n * @param {number} constants.spaceX The minimum gap between nodes in X\n * @returns {array} The constraints\n */\nconst createCrossingConstraints = (edges, constants) => {\n  const { spaceX } = constants;\n  const crossingConstraints = [];\n\n  // For every pair of edges\n  for (let i = 0; i < edges.length; i += 1) {\n    const edgeA = edges[i];\n    const { sourceNode: sourceA, targetNode: targetA } = edgeA;\n\n    // Count the connected edges\n    const edgeADegree =\n      sourceA.sources.length +\n      sourceA.targets.length +\n      targetA.sources.length +\n      targetA.targets.length;\n\n    for (let j = i + 1; j < edges.length; j += 1) {\n      const edgeB = edges[j];\n      const { sourceNode: sourceB, targetNode: targetB } = edgeB;\n\n      // Skip if edges are not intersecting by row so can't cross\n      if (sourceA.row >= targetB.row || targetA.row <= sourceB.row) {\n        continue;\n      }\n\n      // Count the connected edges\n      const edgeBDegree =\n        sourceB.sources.length +\n        sourceB.targets.length +\n        targetB.sources.length +\n        targetB.targets.length;\n\n      crossingConstraints.push({\n        base: crossingConstraint,\n        edgeA: edgeA,\n        edgeB: edgeB,\n        // The required horizontal spacing between connected nodes\n        separationA: sourceA.width * 0.5 + spaceX + sourceB.width * 0.5,\n        separationB: targetA.width * 0.5 + spaceX + targetB.width * 0.5,\n        // Evenly distribute the constraint\n        strength: 1 / Math.max(1, (edgeADegree + edgeBDegree) / 4),\n      });\n    }\n  }\n\n  return crossingConstraints;\n};\n\n/**\n * Creates parallel constraints for the given edges.\n * Returns object with additional arrays that identify these special cases:\n * - edges connected to single-degree nodes at either end\n * - edges connected to single-degree nodes at both ends\n * @param {array} edges The input edges\n * @returns {object} An object containing the constraints\n */\nconst createParallelConstraints = (edges) =>\n  edges.map(({ sourceNode, targetNode }) => ({\n    base: parallelConstraint,\n    a: sourceNode,\n    b: targetNode,\n    // Evenly distribute the constraint\n    strength:\n      0.6 /\n      Math.max(1, sourceNode.targets.length + targetNode.sources.length - 2),\n  }));\n\n/**\n * Creates horizontal separation constraints for the given rows of nodes.\n * @param {array} rows The rows containing nodes\n * @returns {array} The constraints\n */\nconst createSeparationConstraints = (rows, constants) => {\n  const { spaceX } = constants;\n  const separationConstraints = [];\n\n  // For each row of nodes\n  for (let i = 0; i < rows.length; i += 1) {\n    const rowNodes = rows[i];\n\n    // Stable sort row nodes horizontally, breaks ties with ids\n    rowNodes.sort((a, b) => compare(a.x, b.x, a.id, b.id));\n\n    // Update constraints given updated row node order\n    for (let j = 0; j < rowNodes.length - 1; j += 1) {\n      const nodeA = rowNodes[j];\n      const nodeB = rowNodes[j + 1];\n\n      // Count the connected edges\n      const degreeA = Math.max(\n        1,\n        nodeA.targets.length + nodeA.sources.length - 2\n      );\n      const degreeB = Math.max(\n        1,\n        nodeB.targets.length + nodeB.sources.length - 2\n      );\n\n      // Allow more spacing for nodes with more edges\n      const spread = Math.min(10, degreeA * degreeB * constants.spreadX);\n      const space = snap(spread * spaceX, spaceX);\n\n      separationConstraints.push({\n        base: separationConstraint,\n        a: nodeA,\n        b: nodeB,\n        separation: nodeA.width * 0.5 + space + nodeB.width * 0.5,\n      });\n    }\n  }\n\n  return separationConstraints;\n};\n\n/**\n * Adds additional spacing in Y relative to row density, see function `rowDensity` for definition.\n * Node positions are updated in-place\n * @param {array} edges The input edges\n * @param {array} rows The input rows of nodes\n * @param {number} spaceY The spacing between nodes in Y\n * @param {number} [scale=1.25] The amount of expansion to apply relative to row density\n * @param {number} [unit=0.25] The unit size for rounding expansion relative to spaceY\n */\nconst expandDenseRows = (edges, rows, spaceY, scale = 1.25, unit = 0.25) => {\n  const densities = rowDensity(edges);\n  const spaceYUnit = Math.round(spaceY * unit);\n  let currentOffsetY = 0;\n\n  // Add spacing based relative to row density\n  for (let i = 0; i < rows.length - 1; i += 1) {\n    const density = densities[i] || 0;\n\n    // Round offset to a common unit amount to improve vertical rhythm\n    const offsetY = snap(density * scale * spaceY, spaceYUnit);\n    currentOffsetY += offsetY;\n\n    // Apply offset to all nodes following the current node\n    for (const node of rows[i + 1]) {\n      node.y += currentOffsetY;\n    }\n  }\n};\n\n/**\n * Estimates an average 'density' for each row based on average edge angle at that row.\n * Rows with edges close to horizontal are more 'dense' than rows with straight vertical edges.\n * Rows are determined by each edge's source and target node Y positions.\n * Intermediate row edges are assumed always vertical as a simplification, only the start end rows are measured.\n * Returns a list of values in `(0, 1)` where `0` means all edges on that row are vertical and `1` means all horizontal\n * @param {array} edges The input edges\n * @returns {array} The density of each row\n */\nconst rowDensity = (edges) => {\n  const rows = {};\n\n  for (const edge of edges) {\n    // Find the normalized angle of the edge source and target nodes, relative to the X axis\n    const edgeAngle =\n      Math.abs(angle(edge.targetNode, edge.sourceNode) - HALF_PI) / HALF_PI;\n\n    const sourceRow = edge.sourceNode.row;\n    const targetRow = edge.targetNode.row - 1;\n\n    // Add angle to the source row total\n    rows[sourceRow] = rows[sourceRow] || [0, 0];\n    rows[sourceRow][0] += edgeAngle;\n    rows[sourceRow][1] += 1;\n\n    if (targetRow !== sourceRow) {\n      // Add angle to the target row total\n      rows[targetRow] = rows[targetRow] || [0, 0];\n      rows[targetRow][0] += edgeAngle;\n      rows[targetRow][1] += 1;\n    }\n  }\n\n  // Find the average angle for each row\n  for (const row in rows) {\n    rows[row] = rows[row][0] / (rows[row][1] || 1);\n  }\n\n  return Object.values(rows);\n};\n","import {\n  compare,\n  distance1d,\n  angle,\n  nearestOnLine,\n  groupByRow,\n  nodeLeft,\n  nodeRight,\n  nodeTop,\n  nodeBottom,\n} from './common';\n\n/**\n * Finds positions for the given edges relative to their nodes.\n * Input nodes and edges are updated in-place.\n * Results are stored in the `points` property on edges.\n * @param {object} params The layout parameters\n * @param {array} params.nodes The input nodes\n * @param {array} params.edges The input edges\n * @param {number} params.spaceX The minimum gap between a node and passing edges in X\n * @param {number} params.spaceY The minimum gap between a node and passing edges in Y\n * @param {number} params.minPassageGap The minimum gap between two nodes in which an edge can pass in X\n * @param {number} params.stemUnit The unit length for edge stems at anchors\n * @param {number} params.stemMax The maximum length of edge stems at anchors\n * @param {number} params.stemMinSource The minimum length for edge stems at source anchors\n * @param {number} params.stemMinTarget The minimum length for edge stems at target anchors\n * @param {number} params.stemSpaceSource The ideal spacing between edge stems at source anchors\n * @param {number} params.stemSpaceTarget The ideal spacing between edge stems at target anchors\n * @returns {void}\n */\nexport const routing = ({\n  nodes,\n  edges,\n  spaceX,\n  spaceY,\n  minPassageGap,\n  stemUnit,\n  stemMinSource,\n  stemMinTarget,\n  stemMax,\n  stemSpaceSource,\n  stemSpaceTarget,\n}) => {\n  // Find the rows formed by nodes\n  const rows = groupByRow(nodes);\n\n  // For each node\n  for (const node of nodes) {\n    // Sort the node's target edges by the angle between source and target nodes\n    node.targets.sort((a, b) =>\n      compare(\n        angle(b.sourceNode, b.targetNode),\n        angle(a.sourceNode, a.targetNode)\n      )\n    );\n  }\n\n  // For each edge\n  for (const edge of edges) {\n    const source = edge.sourceNode;\n    const target = edge.targetNode;\n\n    // Initialise result container\n    edge.points = [];\n\n    // Find the ideal gap between edge source anchors\n    const sourceSeparation = Math.min(\n      (source.width - stemSpaceSource) / source.targets.length,\n      stemSpaceSource\n    );\n\n    const sourceEdgeDistance =\n      source.targets.indexOf(edge) - (source.targets.length - 1) * 0.5;\n\n    const sourceOffsetX = sourceSeparation * sourceEdgeDistance;\n\n    // Start at source node offset\n    const startPoint = { x: source.x + sourceOffsetX, y: source.y };\n    let currentPoint = startPoint;\n\n    // For each row between the source and target rows exclusive\n    for (let i = source.row + 1; i < target.row; i += 1) {\n      const firstNode = rows[i][0];\n\n      // Initialise search for next point\n      let nearestPoint = { x: nodeLeft(firstNode) - spaceX, y: firstNode.y };\n      let nearestDistance = Infinity;\n\n      // Extend the row 'to infinity' on each side in X\n      const rowExtended = [\n        { ...firstNode, x: Number.MIN_SAFE_INTEGER },\n        ...rows[i],\n        { ...firstNode, x: Number.MAX_SAFE_INTEGER },\n      ];\n\n      // For each gap between each nodes on the row\n      for (let i = 0; i < rowExtended.length - 1; i += 1) {\n        const node = rowExtended[i];\n        const nextNode = rowExtended[i + 1];\n        const nodeGap = nodeLeft(nextNode) - nodeRight(node);\n\n        // Avoid routing through small gaps, increase bundling\n        if (nodeGap < minPassageGap) {\n          continue;\n        }\n\n        const offsetX = Math.min(spaceX, nodeGap * 0.5);\n\n        // Find the next potential point. Include offset to reduce overlapping edges\n        const candidatePoint = nearestOnLine(\n          currentPoint.x,\n          currentPoint.y,\n          nodeRight(node) + offsetX,\n          nodeTop(node) - spaceY,\n          nodeLeft(nextNode) - offsetX,\n          nodeTop(nextNode) - spaceY\n        );\n\n        const distance = distance1d(currentPoint.x, candidatePoint.x);\n\n        // Early out if diverging\n        if (distance > nearestDistance) {\n          break;\n        }\n\n        // Keep the nearest point\n        if (distance < nearestDistance) {\n          nearestDistance = distance;\n          nearestPoint = candidatePoint;\n        }\n      }\n\n      // Pass the node at nearest point\n      const offsetY = firstNode.height + spaceY;\n      edge.points.push({\n        x: nearestPoint.x + sourceOffsetX,\n        y: nearestPoint.y,\n      });\n      edge.points.push({\n        x: nearestPoint.x + sourceOffsetX,\n        y: nearestPoint.y + offsetY,\n      });\n\n      currentPoint = {\n        x: nearestPoint.x,\n        y: nearestPoint.y + offsetY,\n      };\n    }\n  }\n\n  // For each node\n  for (const node of nodes) {\n    // Sort the node's outgoing edges by the starting angle of the edge path\n    node.targets.sort((a, b) =>\n      compare(\n        angle(b.sourceNode, b.points[0] || b.targetNode),\n        angle(a.sourceNode, a.points[0] || a.targetNode)\n      )\n    );\n    // Sort the node's incoming edges by the ending angle of the edge path\n    node.sources.sort((a, b) =>\n      compare(\n        angle(a.points[a.points.length - 1] || a.sourceNode, a.targetNode),\n        angle(b.points[b.points.length - 1] || b.sourceNode, b.targetNode)\n      )\n    );\n  }\n\n  // For each edge\n  for (const edge of edges) {\n    const source = edge.sourceNode;\n    const target = edge.targetNode;\n\n    // Find the ideal gap between edge source and target anchors\n    const sourceSeparation = Math.min(\n      (source.width - stemSpaceSource) / source.targets.length,\n      stemSpaceSource\n    );\n\n    const targetSeparation = Math.min(\n      (target.width - stemSpaceTarget) / target.sources.length,\n      stemSpaceTarget\n    );\n\n    const sourceEdgeDistance =\n      source.targets.indexOf(edge) - (source.targets.length - 1) * 0.5;\n    const targetEdgeDistance =\n      target.sources.indexOf(edge) - (target.sources.length - 1) * 0.5;\n\n    const sourceOffsetX = sourceSeparation * sourceEdgeDistance;\n    const targetOffsetX = targetSeparation * targetEdgeDistance;\n\n    // Decrease stem length outwards from the middle stem\n    const sourceOffsetY =\n      stemUnit *\n      source.targets.length *\n      (1 - Math.abs(sourceEdgeDistance) / source.targets.length);\n\n    const targetOffsetY =\n      stemUnit *\n      target.sources.length *\n      (1 - Math.abs(targetEdgeDistance) / target.sources.length);\n\n    // Build the source stem for the edge\n    const sourceStem = [\n      {\n        x: source.x + sourceOffsetX,\n        y: nodeBottom(source),\n      },\n      {\n        x: source.x + sourceOffsetX,\n        y: nodeBottom(source) + stemMinSource,\n      },\n      {\n        x: source.x + sourceOffsetX,\n        y:\n          nodeBottom(source) + stemMinSource + Math.min(sourceOffsetY, stemMax),\n      },\n    ];\n\n    // Build the target stem for the edge\n    const targetStem = [\n      {\n        x: target.x + targetOffsetX,\n        y: nodeTop(target) - stemMinTarget - Math.min(targetOffsetY, stemMax),\n      },\n      {\n        x: target.x + targetOffsetX,\n        y: nodeTop(target) - stemMinTarget,\n      },\n      {\n        x: target.x + targetOffsetX,\n        y: nodeTop(target),\n      },\n    ];\n\n    // Combine all points\n    const points = [...sourceStem, ...edge.points, ...targetStem];\n\n    // Fix any invalid points caused by invalid layouts\n    let pointYMax = points[0].y;\n\n    for (const point of points) {\n      // Ensure increasing Y values for each point\n      if (point.y < pointYMax) {\n        point.y = pointYMax;\n      } else {\n        pointYMax = point.y;\n      }\n    }\n\n    // Assign finished points to edge\n    edge.points = points;\n  }\n};\n","/*\n * The Kedro-Viz Graph Layout Engine\n *\n * Refer to LAYOUT_ENGINE.md for description of the approach.\n */\n\nimport { offsetNode, offsetEdge } from './common';\nimport { layout } from './layout';\nimport { routing } from './routing';\n\nconst defaultOptions = {\n  layout: {\n    spaceX: 14,\n    spaceY: 110,\n    layerSpaceY: 55,\n    spreadX: 2.2,\n    padding: 100,\n    iterations: 25,\n  },\n  routing: {\n    spaceX: 26,\n    spaceY: 28,\n    minPassageGap: 40,\n    stemUnit: 8,\n    stemMinSource: 5,\n    stemMinTarget: 5,\n    stemMax: 20,\n    stemSpaceSource: 6,\n    stemSpaceTarget: 10,\n  },\n};\n\n/**\n * Generates a diagram of the given DAG.\n * Input nodes and edges are updated in-place.\n * Results are stored as `x, y` properties on nodes\n * and `points` properties on edges.\n * @param {array} nodes The input nodes\n * @param {array} edges The input edges\n * @param {object=} layers The node layers if specified\n * @param {object=} options The graph options\n * @returns {object} The generated graph\n */\nexport const graph = (nodes, edges, layers, options = defaultOptions) => {\n  addEdgeLinks(nodes, edges);\n  addNearestLayers(nodes, layers);\n\n  layout({ nodes, edges, layers, ...options.layout });\n  routing({ nodes, edges, layers, ...options.routing });\n\n  const size = bounds(nodes, options.layout.padding);\n  nodes.forEach((node) => offsetNode(node, size.min));\n  edges.forEach((edge) => offsetEdge(edge, size.min));\n\n  return {\n    nodes,\n    edges,\n    layers,\n    size,\n  };\n};\n\n/**\n * Adds lists of source edges and target edges to each node in-place\n * @param {array} nodes The input nodes\n * @param {array} edges The input edges\n */\nexport const addEdgeLinks = (nodes, edges) => {\n  const nodeById = {};\n\n  for (const node of nodes) {\n    nodeById[node.id] = node;\n    node.targets = [];\n    node.sources = [];\n  }\n\n  for (const edge of edges) {\n    edge.sourceNode = nodeById[edge.source];\n    edge.targetNode = nodeById[edge.target];\n    edge.sourceNode.targets.push(edge);\n    edge.targetNode.sources.push(edge);\n  }\n};\n\n/**\n * Adds the nearest valid layer to each node whilst maintaining the correct layer order\n * @param {array} nodes The input nodes\n * @param {?array} layers The input layers\n */\nconst addNearestLayers = (nodes, layers) => {\n  if (layers && layers.length > 0) {\n    // Create the set of valid layers for lookup\n    const validLayers = {};\n    for (const layer of layers) {\n      validLayers[layer] = true;\n    }\n\n    const hasValidLayer = (node) => Boolean(node && node.layer in validLayers);\n    const lastLayer = layers[layers.length - 1];\n\n    // For each node\n    for (const node of nodes) {\n      // Find first descendant node that has a valid layer following rank order (including itself)\n      const layerNode = findNodeBy(\n        // Starting node\n        node,\n        // Next connected nodes to search\n        targetNodes,\n        // Lowest rank first\n        orderRankAscending,\n        // Acceptance criteria\n        hasValidLayer\n      );\n\n      // Assign the nearest layer if found otherwise must be the last layer\n      node.nearestLayer = layerNode ? layerNode.layer : lastLayer;\n    }\n  }\n};\n\n/**\n * Returns the list of target nodes directly connected to the given node\n * @param {object} node The input node\n * @returns {array} The target nodes\n */\nconst targetNodes = (node) => node.targets.map((edge) => edge.targetNode);\n\n/**\n * Comparator function for sorting nodes rank ascending\n * @param {object} nodeA The first input node\n * @param {object} nodeB The second input node\n * @returns {number} The signed difference\n */\nconst orderRankAscending = (nodeA, nodeB) => nodeA.rank - nodeB.rank;\n\n/**\n * Starting at the given node and expanding successors, returns the first node accepted in order\n * @param {object} node The starting node\n * @param {function} successors A function returning the next nodes to expand\n * @param {function} order A comparator function used for prioritising successors\n * @param {function} accept A function that returns true if the current node fits the criteria\n * @param {object=} visited An object keeping track of nodes already searched\n * @returns {?object} The first node accepted in order, or undefined if none\n */\nconst findNodeBy = (node, successors, order, accept, visited) => {\n  // If the current node is accepted then return it without further search\n  if (accept(node)) {\n    return node;\n  }\n\n  // Keep track of visited nodes\n  visited = visited || {};\n  visited[node.id] = true;\n\n  const results = successors(node)\n    // Remove successors already visited\n    .filter((successor) => !visited[successor.id])\n    // Order unvisited successors\n    .sort(order)\n    // Search the unvisited successors recursively\n    .map((successor) =>\n      findNodeBy(successor, successors, order, accept, visited)\n    )\n    // Keep only the accepted resulting nodes if any\n    .filter(accept)\n    // Order resulting nodes\n    .sort(order);\n\n  // Return the first node accepted in order, or undefined if none\n  return results[0];\n};\n\n/**\n * Finds the region bounding the given nodes\n * @param {array} nodes The input nodes\n * @param {number} padding Additional padding around the bounds\n * @returns {object} The bounds\n */\nconst bounds = (nodes, padding) => {\n  const size = {\n    min: { x: Infinity, y: Infinity },\n    max: { x: -Infinity, y: -Infinity },\n  };\n\n  for (const node of nodes) {\n    const x = node.x;\n    const y = node.y;\n\n    if (x < size.min.x) {\n      size.min.x = x;\n    }\n    if (x > size.max.x) {\n      size.max.x = x;\n    }\n    if (y < size.min.y) {\n      size.min.y = y;\n    }\n    if (y > size.max.y) {\n      size.max.y = y;\n    }\n  }\n\n  size.width = size.max.x - size.min.x + 2 * padding;\n  size.height = size.max.y - size.min.y + 2 * padding;\n  size.min.x -= padding;\n  size.min.y -= padding;\n\n  return size;\n};\n","import { graph } from './graph';\n\n/**\n * Calculate chart layout with experimental new graphing algorithm\n * This is an extremely expensive operation so we want it to run as infrequently\n * as possible, and keep it separate from other properties (like node.active)\n * which don't affect layout.\n */\nexport const graphNew = ({ nodes, edges, layers }) => {\n  const result = graph(nodes, edges, layers);\n  return {\n    ...result,\n    size: { ...result.size, marginx: 100, marginy: 100 },\n  };\n};\n"],"sourceRoot":""}